import{_ as a,c as n,b as e,o as l}from"./app-CdavFJLb.js";const o={};function p(t,s){return l(),n("div",null,s[0]||(s[0]=[e('<h1 id="session-and-tsfile-api" tabindex="-1"><a class="header-anchor" href="#session-and-tsfile-api"><span>Session And TsFile API</span></a></h1><p>在使用Session、TsFIle API时，如果您调用的方法需要以字符串形式传入物理量（measurement）、设备（device）、数据库（database）、路径（path）等参数，<strong>请保证所传入字符串与使用 SQL 语句时的写法一致</strong>，下面是一些帮助您理解的例子。具体代码示例可以参考：<code>example/session/src/main/java/org/apache/iotdb/SyntaxConventionRelatedExample.java</code></p><ol><li>以创建时间序列 createTimeseries 为例：</li></ol><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#282c34;color:#abb2bf;"><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">public</span><span style="color:#C678DD;"> void</span><span style="color:#61AFEF;"> createTimeseries</span><span style="color:#E06C75;">(</span></span>\n<span class="line"><span style="color:#E5C07B;">    String</span><span style="color:#E06C75;"> path</span><span style="color:#ABB2BF;">,</span></span>\n<span class="line"><span style="color:#E5C07B;">    TSDataType</span><span style="color:#E06C75;"> dataType</span><span style="color:#ABB2BF;">,</span></span>\n<span class="line"><span style="color:#E5C07B;">    TSEncoding</span><span style="color:#E06C75;"> encoding</span><span style="color:#ABB2BF;">,</span></span>\n<span class="line"><span style="color:#E5C07B;">    CompressionType</span><span style="color:#E06C75;"> compressor)</span></span>\n<span class="line"><span style="color:#E06C75;">    throws IoTDBConnectionException</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> StatementExecutionException</span><span style="color:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果您希望创建时间序列 root.sg.a，<a href="http://root.sg" target="_blank" rel="noopener noreferrer">root.sg</a>.`a.``&quot;b`，<a href="http://root.sg" target="_blank" rel="noopener noreferrer">root.sg</a>.`111`，您使用的 SQL 语句应该如下所示：</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="background-color:#282c34;color:#abb2bf;"><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">create</span><span style="color:#ABB2BF;"> timeseries </span><span style="color:#D19A66;">root</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">sg</span><span style="color:#ABB2BF;">.a </span><span style="color:#C678DD;">with</span><span style="color:#ABB2BF;"> datatype</span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;">FLOAT</span><span style="color:#ABB2BF;">,</span><span style="color:#C678DD;">encoding</span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;">PLAIN,compressor</span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;">SNAPPY;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#ABB2BF;"># 路径结点名中包含特殊字符，时间序列各结点为</span><span style="color:#E06C75;">[&quot;root&quot;,&quot;sg&quot;,&quot;a.`\\&quot;b&quot;]</span></span>\n<span class="line"><span style="color:#C678DD;">create</span><span style="color:#ABB2BF;"> timeseries </span><span style="color:#D19A66;">root</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">sg</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">`a.``&quot;b`</span><span style="color:#C678DD;"> with</span><span style="color:#ABB2BF;"> datatype</span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;">FLOAT</span><span style="color:#ABB2BF;">,</span><span style="color:#C678DD;">encoding</span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;">PLAIN,compressor</span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;">SNAPPY;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#ABB2BF;"># 路径结点名为实数</span></span>\n<span class="line"><span style="color:#C678DD;">create</span><span style="color:#ABB2BF;"> timeseries </span><span style="color:#D19A66;">root</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">sg</span><span style="color:#ABB2BF;">.</span><span style="color:#98C379;">`111`</span><span style="color:#C678DD;"> with</span><span style="color:#ABB2BF;"> datatype</span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;">FLOAT</span><span style="color:#ABB2BF;">,</span><span style="color:#C678DD;">encoding</span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;">PLAIN,compressor</span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;">SNAPPY;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>您在调用 createTimeseries 方法时，应该按照如下方法赋值 path 字符串，保证 path 字符串内容与使用 SQL 时一致：</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#282c34;color:#abb2bf;"><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// 时间序列 root.sg.a</span></span>\n<span class="line"><span style="color:#E5C07B;">String</span><span style="color:#E06C75;"> path </span><span style="color:#56B6C2;">=</span><span style="color:#98C379;"> &quot;root.sg.a&quot;</span><span style="color:#ABB2BF;">;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#7F848E;font-style:italic;">// 时间序列 root.sg.`a``&quot;b`</span></span>\n<span class="line"><span style="color:#E5C07B;">String</span><span style="color:#E06C75;"> path </span><span style="color:#56B6C2;">=</span><span style="color:#98C379;"> &quot;root.sg.`a``</span><span style="color:#56B6C2;">\\&quot;</span><span style="color:#98C379;">b`&quot;</span><span style="color:#ABB2BF;">;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#7F848E;font-style:italic;">// 时间序列 root.sg.`111`</span></span>\n<span class="line"><span style="color:#E5C07B;">String</span><span style="color:#E06C75;"> path </span><span style="color:#56B6C2;">=</span><span style="color:#98C379;"> &quot;root.sg.`111`&quot;</span><span style="color:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>以插入数据 insertRecord 为例：</li></ol><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#282c34;color:#abb2bf;"><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">public</span><span style="color:#C678DD;"> void</span><span style="color:#61AFEF;"> insertRecord</span><span style="color:#E06C75;">(</span></span>\n<span class="line"><span style="color:#E5C07B;">    String</span><span style="color:#E06C75;"> deviceId</span><span style="color:#ABB2BF;">,</span></span>\n<span class="line"><span style="color:#C678DD;">    long</span><span style="color:#E06C75;"> time</span><span style="color:#ABB2BF;">,</span></span>\n<span class="line"><span style="color:#E5C07B;">    List</span><span style="color:#56B6C2;">&lt;</span><span style="color:#E06C75;">String</span><span style="color:#56B6C2;">&gt;</span><span style="color:#E06C75;"> measurements</span><span style="color:#ABB2BF;">,</span></span>\n<span class="line"><span style="color:#E5C07B;">    List</span><span style="color:#56B6C2;">&lt;</span><span style="color:#E06C75;">TSDataType</span><span style="color:#56B6C2;">&gt;</span><span style="color:#E06C75;"> types</span><span style="color:#ABB2BF;">,</span></span>\n<span class="line"><span style="color:#E5C07B;">    Object</span><span style="color:#ABB2BF;">...</span><span style="color:#E5C07B;"> values</span><span style="color:#E06C75;">)</span></span>\n<span class="line"><span style="color:#E06C75;">    throws IoTDBConnectionException</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> StatementExecutionException</span><span style="color:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果您希望向时间序列 root.sg.a，<a href="http://root.sg" target="_blank" rel="noopener noreferrer">root.sg</a>.`a.``&quot;b`，<a href="http://root.sg" target="_blank" rel="noopener noreferrer">root.sg</a>.`111`中插入数据，您使用的 SQL 语句应该如下所示：</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="background-color:#282c34;color:#abb2bf;"><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">insert into</span><span style="color:#D19A66;"> root</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">sg</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">timestamp</span><span style="color:#ABB2BF;">, a, </span><span style="color:#98C379;">`a.``&quot;b`</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">`111`</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">values</span><span style="color:#ABB2BF;"> (</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>您在调用 insertRecord 方法时，应该按照如下方法赋值 deviceId 和 measurements：</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#282c34;color:#abb2bf;"><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// deviceId 为 root.sg</span></span>\n<span class="line"><span style="color:#E5C07B;">String</span><span style="color:#E06C75;"> deviceId </span><span style="color:#56B6C2;">=</span><span style="color:#98C379;"> &quot;root.sg&quot;</span><span style="color:#ABB2BF;">;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#7F848E;font-style:italic;">// measurements</span></span>\n<span class="line"><span style="color:#E5C07B;">String</span><span style="color:#E06C75;">[] measurements </span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;"> new</span><span style="color:#E5C07B;"> String</span><span style="color:#E06C75;">[]{</span><span style="color:#98C379;">&quot;a&quot;</span><span style="color:#ABB2BF;">,</span><span style="color:#98C379;"> &quot;`a.``</span><span style="color:#56B6C2;">\\&quot;</span><span style="color:#98C379;">b`&quot;</span><span style="color:#ABB2BF;">,</span><span style="color:#98C379;"> &quot;`111`&quot;</span><span style="color:#E06C75;">}</span><span style="color:#ABB2BF;">;</span></span>\n<span class="line"><span style="color:#E5C07B;">List</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">&gt;</span><span style="color:#E06C75;"> measurementList </span><span style="color:#56B6C2;">=</span><span style="color:#E5C07B;"> Arrays</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">asList</span><span style="color:#ABB2BF;">(measurements);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>以查询数据 executeRawDataQuery 为例：</li></ol><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#282c34;color:#abb2bf;"><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">public</span><span style="color:#E5C07B;"> SessionDataSet</span><span style="color:#61AFEF;"> executeRawDataQuery</span><span style="color:#E06C75;">(</span></span>\n<span class="line"><span style="color:#E5C07B;">    List</span><span style="color:#56B6C2;">&lt;</span><span style="color:#E06C75;">String</span><span style="color:#56B6C2;">&gt;</span><span style="color:#E06C75;"> paths</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span></span>\n<span class="line"><span style="color:#C678DD;">    long</span><span style="color:#E06C75;"> startTime</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span></span>\n<span class="line"><span style="color:#C678DD;">    long</span><span style="color:#E06C75;"> endTime)</span></span>\n<span class="line"><span style="color:#E06C75;">    throws StatementExecutionException</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> IoTDBConnectionException</span><span style="color:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果您希望查询时间序列 root.sg.a，<a href="http://root.sg" target="_blank" rel="noopener noreferrer">root.sg</a>.`a.``&quot;b`，<a href="http://root.sg" target="_blank" rel="noopener noreferrer">root.sg</a>.`111`的数据，您使用的 SQL 语句应该如下所示：</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" data-title="sql" style="background-color:#282c34;color:#abb2bf;"><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">select</span><span style="color:#ABB2BF;"> a </span><span style="color:#C678DD;">from</span><span style="color:#D19A66;"> root</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">sg</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#ABB2BF;"># 路径结点名中包含特殊字符</span></span>\n<span class="line"><span style="color:#C678DD;">select</span><span style="color:#98C379;"> `a.``&quot;b`</span><span style="color:#C678DD;"> from</span><span style="color:#D19A66;"> root</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">sg</span><span style="color:#ABB2BF;">;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#ABB2BF;"># 路径结点名为实数</span></span>\n<span class="line"><span style="color:#C678DD;">select</span><span style="color:#98C379;"> `111`</span><span style="color:#C678DD;"> from</span><span style="color:#D19A66;"> root</span><span style="color:#ABB2BF;">.</span><span style="color:#D19A66;">sg</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>您在调用 executeRawDataQuery 方法时，应该按照如下方法赋值 paths：</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" data-title="java" style="background-color:#282c34;color:#abb2bf;"><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// paths</span></span>\n<span class="line"><span style="color:#E5C07B;">String</span><span style="color:#E06C75;">[] paths </span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;"> new</span><span style="color:#E5C07B;"> String</span><span style="color:#E06C75;">[]{</span><span style="color:#98C379;">&quot;root.sg.a&quot;</span><span style="color:#ABB2BF;">,</span><span style="color:#98C379;"> &quot;root.sg.`a.``</span><span style="color:#56B6C2;">\\&quot;</span><span style="color:#98C379;">b`&quot;</span><span style="color:#ABB2BF;">,</span><span style="color:#98C379;"> &quot;root.sg.`111`&quot;</span><span style="color:#E06C75;">}</span><span style="color:#ABB2BF;">;</span></span>\n<span class="line"><span style="color:#E5C07B;">List</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">&gt;</span><span style="color:#E06C75;"> pathList </span><span style="color:#56B6C2;">=</span><span style="color:#E5C07B;"> Arrays</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">asList</span><span style="color:#ABB2BF;">(paths);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>',20)]))}const c=a(o,[["render",p],["__file","Session-And-TsFile-API.html.vue"]]),i=JSON.parse('{"path":"/zh/UserGuide/V1.0.x/Syntax-Conventions/Session-And-TsFile-API.html","title":"Session And TsFile API","lang":"zh-CN","frontmatter":{"description":"Session And TsFile API 在使用Session、TsFIle API时，如果您调用的方法需要以字符串形式传入物理量（measurement）、设备（device）、数据库（database）、路径（path）等参数，请保证所传入字符串与使用 SQL 语句时的写法一致，下面是一些帮助您理解的例子。具体代码示例可以参考：example/...","head":[["link",{"rel":"alternate","hreflang":"en-us","href":"https://iotdb.apache.org/UserGuide/V1.0.x/Syntax-Conventions/Session-And-TsFile-API.html"}],["meta",{"property":"og:url","content":"https://iotdb.apache.org/zh/UserGuide/V1.0.x/Syntax-Conventions/Session-And-TsFile-API.html"}],["meta",{"property":"og:site_name","content":"IoTDB Website"}],["meta",{"property":"og:title","content":"Session And TsFile API"}],["meta",{"property":"og:description","content":"Session And TsFile API 在使用Session、TsFIle API时，如果您调用的方法需要以字符串形式传入物理量（measurement）、设备（device）、数据库（database）、路径（path）等参数，请保证所传入字符串与使用 SQL 语句时的写法一致，下面是一些帮助您理解的例子。具体代码示例可以参考：example/..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:locale:alternate","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2023-07-10T03:11:17.000Z"}],["meta",{"property":"article:modified_time","content":"2023-07-10T03:11:17.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Session And TsFile API\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2023-07-10T03:11:17.000Z\\",\\"author\\":[]}"]]},"headers":[],"git":{"createdTime":1688958677000,"updatedTime":1688958677000,"contributors":[{"name":"CritasWang","username":"CritasWang","email":"critas@outlook.com","commits":1,"url":"https://github.com/CritasWang"}]},"readingTime":{"minutes":2.15,"words":645},"filePathRelative":"zh/UserGuide/V1.0.x/Syntax-Conventions/Session-And-TsFile-API.md","localizedDate":"2023年7月10日","autoDesc":true}');export{c as comp,i as data};
