import{_ as e,c as s,b as a,o as n}from"./app-DFpOc5Ny.js";const i={};function r(l,t){return n(),s("div",null,t[0]||(t[0]=[a(`<h1 id="data-export" tabindex="-1"><a class="header-anchor" href="#data-export"><span>Data Export</span></a></h1><h2 id="_1-introduction-to-export-tools" tabindex="-1"><a class="header-anchor" href="#_1-introduction-to-export-tools"><span>1. Introduction to Export Tools</span></a></h2><p>Export tools can export data queried from SQL into specified formats, including the <code>export-tsfile.sh/bat</code> script for exporting TsFile files and the <code>export-data.sh/bat</code> script that supports exporting in CSV and SQL formats.</p><h2 id="_2-supported-data-types" tabindex="-1"><a class="header-anchor" href="#_2-supported-data-types"><span>2. Supported Data Types</span></a></h2><ul><li><p>CSV: A plain text format for storing formatted data, which needs to be constructed according to the specified CSV format mentioned below.</p></li><li><p>SQL: A file containing custom SQL statements.</p></li><li><p>TsFile: The file format for time series used in IoTDB.</p></li></ul><h2 id="_3-export-tsfile-script" tabindex="-1"><a class="header-anchor" href="#_3-export-tsfile-script"><span>3. export-tsfile Script</span></a></h2><p>Supports TsFile: The file format for time series used in IoTDB.</p><h4 id="_3-1-command" tabindex="-1"><a class="header-anchor" href="#_3-1-command"><span>3.1 Command</span></a></h4><div class="language-Bash line-numbers-mode" data-highlighter="prismjs" data-ext="Bash" data-title="Bash"><pre><code><span class="line"># Unix/OS X</span>
<span class="line">tools/export-tsfile.sh  -h &lt;ip&gt; -p &lt;port&gt; -u &lt;username&gt; -pw &lt;password&gt; -td &lt;directory&gt; [-f &lt;export filename&gt; -q &lt;query command&gt; -s &lt;sql file&gt;]</span>
<span class="line"></span>
<span class="line"># Windows</span>
<span class="line">tools\\export-tsfile.bat -h &lt;ip&gt; -p &lt;port&gt; -u &lt;username&gt; -pw &lt;password&gt; -td &lt;directory&gt; [-f &lt;export filename&gt; -q &lt;query command&gt; -s &lt;sql file&gt;]</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-2-parameter-introduction" tabindex="-1"><a class="header-anchor" href="#_3-2-parameter-introduction"><span>3.2 Parameter Introduction</span></a></h4><table><thead><tr><th><strong>Parameter</strong></th><th><strong>Definition</strong></th><th><strong>Required</strong></th><th><strong>Default</strong></th></tr></thead><tbody><tr><td>-h</td><td>Hostname</td><td>No</td><td>root</td></tr><tr><td>-p</td><td>Port</td><td>No</td><td>root</td></tr><tr><td>-u</td><td>Username</td><td>No</td><td>127.0.0.1</td></tr><tr><td>-pw</td><td>Password</td><td>No</td><td>6667</td></tr><tr><td>-t</td><td>Target file directory, used to specify the directory where the output file should be saved</td><td>Yes</td><td>-</td></tr><tr><td>-tfn</td><td>Name of the export file</td><td>No</td><td>-</td></tr><tr><td>-q</td><td>Number of query commands to be executed, possibly used for batch execution of queries</td><td>No</td><td>-</td></tr><tr><td>-s</td><td>SQL file path, used to specify the location of the file containing the SQL statements to be executed</td><td>No</td><td>-</td></tr><tr><td>-timeout</td><td>Session query timeout, used to specify the maximum allowed time before the query operation is automatically terminated</td><td>No</td><td>-</td></tr></tbody></table><p>In addition, if the <code>-s</code> and <code>-q</code> parameters are not used, after the export script is started, you need to enter the query statement according to the program prompt, and different query results will be saved to different TsFile files.</p><h4 id="_3-3-running-examples" tabindex="-1"><a class="header-anchor" href="#_3-3-running-examples"><span>3.3 Running Examples</span></a></h4><div class="language-Bash line-numbers-mode" data-highlighter="prismjs" data-ext="Bash" data-title="Bash"><pre><code><span class="line"># Unix/OS X</span>
<span class="line">tools/export-tsfile.sh -h 127.0.0.1 -p 6667 -u root -pw root -td ./</span>
<span class="line"># or</span>
<span class="line">tools/export-tsfile.sh -h 127.0.0.1 -p 6667 -u root -pw root -td ./ -q &quot;select * from root.**&quot;</span>
<span class="line"># Or</span>
<span class="line">tools/export-tsfile.sh -h 127.0.0.1 -p 6667 -u root -pw root -td ./ -s ./sql.txt</span>
<span class="line"># Or</span>
<span class="line">tools/export-tsfile.sh -h 127.0.0.1 -p 6667 -u root -pw root -td ./ -s ./sql.txt -f myTsFile</span>
<span class="line"># Or</span>
<span class="line">tools/export-tsfile.sh -h 127.0.0.1 -p 6667 -u root -pw root -td ./ -s ./sql.txt -f myTsFile -t 10000</span>
<span class="line"></span>
<span class="line"># Windows</span>
<span class="line">tools/export-tsfile.bat -h 127.0.0.1 -p 6667 -u root -pw root -td ./</span>
<span class="line"># Or</span>
<span class="line">tools/export-tsfile.bat -h 127.0.0.1 -p 6667 -u root -pw root -td ./ -q &quot;select * from root.**&quot;</span>
<span class="line"># Or</span>
<span class="line">tools/export-tsfile.bat -h 127.0.0.1 -p 6667 -u root -pw root -td ./ -s ./sql.txt</span>
<span class="line"># Or</span>
<span class="line">tools/export-tsfile.bat -h 127.0.0.1 -p 6667 -u root -pw root -td ./ -s ./sql.txt -f myTsFile</span>
<span class="line"># Or</span>
<span class="line">tools/export-tsfile.sh -h 127.0.0.1 -p 6667 -u root -pw root -td ./ -s ./sql.txt -f myTsFile -t 10000</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-export-data-script" tabindex="-1"><a class="header-anchor" href="#_4-export-data-script"><span>4. export-data Script</span></a></h2><p>Supports CSV: A plain text format for storing formatted data, which needs to be constructed according to the specified CSV format below.</p><p>Supports SQL: A file containing custom SQL statements.</p><h4 id="_4-1-command" tabindex="-1"><a class="header-anchor" href="#_4-1-command"><span>4.1 Command</span></a></h4><div class="language-Bash line-numbers-mode" data-highlighter="prismjs" data-ext="Bash" data-title="Bash"><pre><code><span class="line"># Unix/OS X</span>
<span class="line">&gt;tools/export-data.sh  -h &lt;ip&gt; -p &lt;port&gt; -u &lt;username&gt; -pw &lt;password&gt; -t &lt;directory&gt; [-tf &lt;time-format&gt; -datatype &lt;true/false&gt; -q &lt;query command&gt; -s &lt;source sql file&gt; -tfn &lt;target file name&gt; -lpf &lt;int&gt; -type &lt;export type&gt; -aligned &lt;true/false&gt;]</span>
<span class="line"></span>
<span class="line"># Windows</span>
<span class="line">&gt;tools\\export-data.bat -h &lt;ip&gt; -p &lt;port&gt; -u &lt;username&gt; -pw &lt;password&gt; -t &lt;directory&gt; [-tf &lt;time-format&gt; -datatype &lt;true/false&gt; -q &lt;query command&gt; -s &lt;source sql file&gt; -tfn &lt;target file name&gt; -lpf &lt;int&gt; -type &lt;export type&gt; -aligned &lt;true/false&gt;]</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-2-parameter-introduction" tabindex="-1"><a class="header-anchor" href="#_4-2-parameter-introduction"><span>4.2 Parameter Introduction</span></a></h4><table><thead><tr><th><strong>Parameter</strong></th><th><strong>Definition</strong></th><th><strong>Required</strong></th><th><strong>Default</strong></th></tr></thead><tbody><tr><td>-h</td><td>Hostname</td><td>No</td><td>127.0.0.1</td></tr><tr><td>-p</td><td>Port</td><td>No</td><td>6667</td></tr><tr><td>-u</td><td>Username</td><td>No</td><td>root</td></tr><tr><td>-pw</td><td>Password</td><td>No</td><td>root</td></tr><tr><td>-t</td><td>Exported CSV or SQL file output path (In V1.3.2, the parameter was <code>-td</code>)</td><td>Yes</td><td></td></tr><tr><td>-datatype</td><td>Whether to print the corresponding data type behind the time series in the CSV file header, options are true or false</td><td>No</td><td>true</td></tr><tr><td>-q</td><td>Directly specify the query statement to be executed in the command (currently only supports some statements, detailed list see below) Note: -q and -s parameters are required to fill in one, if filled in at the same time, -q takes effect. For detailed supported SQL statement examples, please refer to &quot;SQL Statement Support Details&quot; below</td><td>否</td><td></td></tr><tr><td>-s</td><td>Specify the SQL file, which may contain one or more SQL statements. If it contains multiple SQL statements, they should be separated by newlines (carriage returns). Each SQL statement corresponds to one or more output CSV or SQL files. Note: -q and -s parameters are required to fill in one, if filled in at the same time, -q takes effect. For detailed supported SQL statement examples, please refer to &quot;SQL Statement Support Rules&quot; below</td><td>否</td><td></td></tr><tr><td>-type</td><td>Specify the type of exported file, options are csv or sql</td><td>No</td><td>csv</td></tr><tr><td>-tf</td><td>Specify the time format. The time format must comply with the<a href="https://calendars.wikia.org/wiki/ISO_8601" target="_blank" rel="noopener noreferrer">ISO 8601</a>standard, or <code>timestamp</code> Explanation: Only effective when the - type is CSV</td><td>否</td><td>yyyy-MM-dd HH:mm:ss.SSSz</td></tr><tr><td>-lpf</td><td>Specify the maximum number of lines in the dump file to be exported (V1.3.2 version parameter is<code>-linesPerFile</code>)</td><td>No</td><td>10000</td></tr><tr><td>-timeout</td><td>Specify the timeout period for session queries, in ms</td><td>No</td><td>-1</td></tr></tbody></table><h4 id="_4-3-sql-语句支持规则" tabindex="-1"><a class="header-anchor" href="#_4-3-sql-语句支持规则"><span>4.3 SQL 语句支持规则</span></a></h4><ol><li><p>Only query statements are supported; non-query statements (such as metadata management, system management, etc.) are not supported. For unsupported SQL, the program will automatically skip and output an error message.</p></li><li><p>In query statements, the current version only supports the export of raw data. If there are group by, aggregate functions, UDFs, operational operators, etc., they are not supported for export as SQL. When exporting raw data, please note that if exporting data from multiple devices, please use the align by device statement. Detailed examples are as follows:</p></li></ol><table><thead><tr><th></th><th><strong>支持导出</strong></th><th><strong>示例</strong></th></tr></thead><tbody><tr><td>Raw data single device query</td><td>Supported</td><td>select * from root.s_0.d_0</td></tr><tr><td></td><td>原始数据多设备查询（aligin by device）</td><td>Supported</td></tr></tbody></table><pre><code>| 支持         | select * from root.** align by device         |
</code></pre><p>| Raw data multi-device query (without align by device) | Not Supported | select * from root.*<em>select * from root.s_0.</em> |</p><h4 id="_4-4-running-examples" tabindex="-1"><a class="header-anchor" href="#_4-4-running-examples"><span>4.4 Running Examples</span></a></h4><ul><li>Export all data within the scope of a SQL execution to a CSV file.</li></ul><div class="language-Bash line-numbers-mode" data-highlighter="prismjs" data-ext="Bash" data-title="Bash"><pre><code><span class="line"># Unix/OS X</span>
<span class="line">&gt;tools/export-data.sh  -h &lt;ip&gt; -p &lt;port&gt; -u &lt;username&gt; -pw &lt;password&gt; -t &lt;directory&gt; [-tf &lt;time-format&gt; -datatype &lt;true/false&gt; -q &lt;query command&gt; -s &lt;source sql file&gt; -tfn &lt;target file name&gt; -lpf &lt;int&gt; -type &lt;export type&gt; -aligned &lt;true/false&gt;]</span>
<span class="line"></span>
<span class="line"># Windows</span>
<span class="line">&gt;tools\\export-data.bat -h &lt;ip&gt; -p &lt;port&gt; -u &lt;username&gt; -pw &lt;password&gt; -t &lt;directory&gt; [-tf &lt;time-format&gt; -datatype &lt;true/false&gt; -q &lt;query command&gt; -s &lt;source sql file&gt; -tfn &lt;target file name&gt; -lpf &lt;int&gt; -type &lt;export type&gt; -aligned &lt;true/false&gt;]</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Export results</li></ul><div class="language-Bash line-numbers-mode" data-highlighter="prismjs" data-ext="Bash" data-title="Bash"><pre><code><span class="line">Time,root.stock.Legacy.0700HK.L1_BidPrice,root.stock.Legacy.0700HK.Type,root.stock.Legacy.0700HK.L1_BidSize,root.stock.Legacy.0700HK.Domain,root.stock.Legacy.0700HK.L1_BuyNo,root.stock.Legacy.0700HK.L1_AskPrice</span>
<span class="line">2024-07-29T18:37:18.700+08:00,0.9666617,3.0,0.021367407654674264,-6.0,false,0.8926191</span>
<span class="line">2024-07-29T18:37:19.701+08:00,0.3057328,3.0,0.9965377284981661,-5.0,false,0.15167356</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Export all data within the scope of all SQL executions in a SQL file to a CSV file.</li></ul><div class="language-Bash line-numbers-mode" data-highlighter="prismjs" data-ext="Bash" data-title="Bash"><pre><code><span class="line"># Unix/OS X</span>
<span class="line">&gt;tools/export-data.sh -t ./data/ -s export.sql</span>
<span class="line"># Windows</span>
<span class="line">&gt;tools/export-data.bat -t ./data/ -s export.sql</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Content of export.sql file (file pointed to by -s parameter)</li></ul><div class="language-Bash line-numbers-mode" data-highlighter="prismjs" data-ext="Bash" data-title="Bash"><pre><code><span class="line">select * from root.stock.** limit 100</span>
<span class="line">select * from root.db.** limit 100</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Export result file 1</li></ul><div class="language-Bash line-numbers-mode" data-highlighter="prismjs" data-ext="Bash" data-title="Bash"><pre><code><span class="line">Time,root.stock.Legacy.0700HK.L1_BidPrice,root.stock.Legacy.0700HK.Type,root.stock.Legacy.0700HK.L1_BidSize,root.stock.Legacy.0700HK.Domain,root.stock.Legacy.0700HK.L1_BuyNo,root.stock.Legacy.0700HK.L1_AskPrice</span>
<span class="line">2024-07-29T18:37:18.700+08:00,0.9666617,3.0,0.021367407654674264,-6.0,false,0.8926191</span>
<span class="line">2024-07-29T18:37:19.701+08:00,0.3057328,3.0,0.9965377284981661,-5.0,false,0.15167356</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Export result file 2</li></ul><div class="language-Bash line-numbers-mode" data-highlighter="prismjs" data-ext="Bash" data-title="Bash"><pre><code><span class="line">Time,root.db.Random.RandomBoolean</span>
<span class="line">2024-07-22T17:16:05.820+08:00,true</span>
<span class="line">2024-07-22T17:16:02.597+08:00,false</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Export data defined in the SQL file within the IoTDB database in an aligned format as SQL statements.</li></ul><div class="language-Bash line-numbers-mode" data-highlighter="prismjs" data-ext="Bash" data-title="Bash"><pre><code><span class="line"># Unix/OS X</span>
<span class="line">&gt;tools/export-data.sh -h 127.0.0.1 -p 6667 -u root -p root -t ./data/ -s export.sql -type sql -aligned true</span>
<span class="line"># Windows</span>
<span class="line">&gt;tools/export-data.bat -h 127.0.0.1 -p 6667 -u root -p root -t ./data/ -s export.sql -type sql -aligned true</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Export results</li></ul><div class="language-Bash line-numbers-mode" data-highlighter="prismjs" data-ext="Bash" data-title="Bash"><pre><code><span class="line">INSERT INTO root.stock.Legacy.0700HK(TIMESTAMP,L1_BidPrice,Type,L1_BidSize,Domain,L1_BuyNo,L1_AskPrice) ALIGNED VALUES (1722249629831,0.62308747,2.0,0.012206747854849653,-6.0,false,0.14164352);</span>
<span class="line">INSERT INTO root.stock.Legacy.0700HK(TIMESTAMP,L1_BidPrice,Type,L1_BidSize,Domain,L1_BuyNo,L1_AskPrice) ALIGNED VALUES (1722249630834,0.7520042,3.0,0.22760657101910464,-5.0,true,0.089064896);</span>
<span class="line">INSERT INTO root.stock.Legacy.0700HK(TIMESTAMP,L1_BidPrice,Type,L1_BidSize,Domain,L1_BuyNo,L1_AskPrice) ALIGNED VALUES (1722249631835,0.3981064,3.0,0.6254559288663467,-6.0,false,0.9767922);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Export all data within the scope of a SQL execution to a CSV file, specifying the export time format as <code>yyyy-MM-dd HH:mm:ss</code>, and print the corresponding data type behind the table header time series.</li></ul><div class="language-Bash line-numbers-mode" data-highlighter="prismjs" data-ext="Bash" data-title="Bash"><pre><code><span class="line"># Unix/OS X</span>
<span class="line">&gt;tools/export-data.sh -h 127.0.0.1 -p 6667 -u root -p root -t ./data/ -s export.sql -type sql -aligned true</span>
<span class="line"># Windows</span>
<span class="line">&gt;tools/export-data.bat -h 127.0.0.1 -p 6667 -u root -p root -t ./data/ -s export.sql -type sql -aligned true</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Export results</li></ul><div class="language-Bash line-numbers-mode" data-highlighter="prismjs" data-ext="Bash" data-title="Bash"><pre><code><span class="line">Time,root.stock.Legacy.0700HK.L1_BidPrice(DOUBLE),root.stock.Legacy.0700HK.Type(DOUBLE),root.stock.Legacy.0700HK.L1_BidSize(DOUBLE),root.stock.Legacy.0700HK.Domain(DOUBLE),root.stock.Legacy.0700HK.L1_BuyNo(BOOLEAN),root.stock.Legacy.0700HK.L1_AskPrice(DOUBLE)</span>
<span class="line">2024-07-30 10:33:55,0.44574088,3.0,0.21476832811611501,-4.0,true,0.5951748</span>
<span class="line">2024-07-30 10:33:56,0.6880933,3.0,0.6289119476165305,-5.0,false,0.114634395</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,47)]))}const d=e(i,[["render",r],["__file","Data-Export-Tool.html.vue"]]),p=JSON.parse('{"path":"/UserGuide/latest/Tools-System/Data-Export-Tool.html","title":"Data Export","lang":"en-US","frontmatter":{"description":"Data Export 1. Introduction to Export Tools Export tools can export data queried from SQL into specified formats, including the export-tsfile.sh/bat script for exporting TsFile ...","head":[["link",{"rel":"alternate","hreflang":"zh-cn","href":"https://iotdb.apache.org/zh/UserGuide/latest/Tools-System/Data-Export-Tool.html"}],["meta",{"property":"og:url","content":"https://iotdb.apache.org/UserGuide/latest/Tools-System/Data-Export-Tool.html"}],["meta",{"property":"og:site_name","content":"IoTDB Website"}],["meta",{"property":"og:title","content":"Data Export"}],["meta",{"property":"og:description","content":"Data Export 1. Introduction to Export Tools Export tools can export data queried from SQL into specified formats, including the export-tsfile.sh/bat script for exporting TsFile ..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:locale:alternate","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-11-18T12:54:32.000Z"}],["meta",{"property":"article:modified_time","content":"2024-11-18T12:54:32.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Data Export\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-11-18T12:54:32.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"1. Introduction to Export Tools","slug":"_1-introduction-to-export-tools","link":"#_1-introduction-to-export-tools","children":[]},{"level":2,"title":"2. Supported Data Types","slug":"_2-supported-data-types","link":"#_2-supported-data-types","children":[]},{"level":2,"title":"3. export-tsfile Script","slug":"_3-export-tsfile-script","link":"#_3-export-tsfile-script","children":[]},{"level":2,"title":"4. export-data Script","slug":"_4-export-data-script","link":"#_4-export-data-script","children":[]}],"git":{"createdTime":1731934472000,"updatedTime":1731934472000,"contributors":[{"name":"W1y1r","email":"150988475+W1y1r@users.noreply.github.com","commits":1}]},"readingTime":{"minutes":4.94,"words":1481},"filePathRelative":"UserGuide/latest/Tools-System/Data-Export-Tool.md","localizedDate":"November 18, 2024","autoDesc":true}');export{d as comp,p as data};
