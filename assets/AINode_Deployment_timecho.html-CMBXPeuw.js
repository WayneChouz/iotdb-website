import{_ as s,r as d,o,c as r,b as e,d as t,a,e as n}from"./app-Jz5nF5dV.js";const l={},c=n('<h1 id="ainode-deployment" tabindex="-1"><a class="header-anchor" href="#ainode-deployment"><span>AINode Deployment</span></a></h1><h2 id="_1-ainode-introduction" tabindex="-1"><a class="header-anchor" href="#_1-ainode-introduction"><span>1 AINode Introduction</span></a></h2><h3 id="_1-1-capability-introduction" tabindex="-1"><a class="header-anchor" href="#_1-1-capability-introduction"><span>1.1 Capability Introduction</span></a></h3><p>AINode is the third type of endogenous node provided by IoTDB after the Configurable Node and DataNode. This node extends its ability to perform machine learning analysis on time series by interacting with the DataNode and Configurable Node of the IoTDB cluster. It supports the introduction of existing machine learning models from external sources for registration and the use of registered models to complete time series analysis tasks on specified time series data through simple SQL statements. The creation, management, and inference of models are integrated into the database engine. Currently, machine learning algorithms or self-developed models are available for common time series analysis scenarios, such as prediction and anomaly detection.</p><h3 id="_1-2-delivery-method" tabindex="-1"><a class="header-anchor" href="#_1-2-delivery-method"><span>1.2 Delivery Method</span></a></h3><p>It is an additional package outside the IoTDB cluster, with independent installation and activation (if you need to try or use it, please contact Tianmu Technology Business or Technical Support).</p><h3 id="_1-3-deployment-mode" tabindex="-1"><a class="header-anchor" href="#_1-3-deployment-mode"><span>1.3 Deployment mode</span></a></h3><div align="center"><img src="https://alioss.timecho.com/docs/img/AINode部署1.png" alt="" style="width:60%;"></div><div align="center"><img src="https://alioss.timecho.com/docs/img/AINode部署2.png" alt="" style="width:70%;"></div><h2 id="_2-installation-preparation" tabindex="-1"><a class="header-anchor" href="#_2-installation-preparation"><span>2 Installation preparation</span></a></h2><h3 id="_2-1-get-installation-package" tabindex="-1"><a class="header-anchor" href="#_2-1-get-installation-package"><span>2.1 Get installation package</span></a></h3><p>Users can download the software installation package for AINode, download and unzip it to complete the installation of AINode.</p><p>Unzip and install the package<br><code>(iotdb-enterprise-ainode-&lt;version&gt;.zip)</code>， The directory structure after unpacking the installation package is as follows:</p>',13),h=e("thead",null,[e("tr",null,[e("th",null,[e("strong",null,"Catalogue")]),e("th",null,[e("strong",null,"Type")]),e("th",null,[e("strong",null,"Explain")])])],-1),u=e("tr",null,[e("td",null,"lib"),e("td",null,"folder"),e("td",null,"AINode compiled binary executable files and related code dependencies")],-1),p=e("tr",null,[e("td",null,"sbin"),e("td",null,"folder"),e("td",null,"The running script of AINode can start, remove, and stop AINode")],-1),m=e("tr",null,[e("td",null,"conf"),e("td",null,"folder"),e("td",null,"Contains configuration items for AINode, specifically including the following configuration items")],-1),v=e("tr",null,[e("td",null,"LICENSE"),e("td",null,"file"),e("td",null,"Certificate")],-1),g=e("tr",null,[e("td",null,"NOTICE"),e("td",null,"file"),e("td",null,"Tips")],-1),b=e("tr",null,[e("td",null,"README_ZH.md"),e("td",null,"file"),e("td",null,"Explanation of the Chinese version of the markdown format")],-1),f={href:"http://README.md",target:"_blank",rel:"noopener noreferrer"},y=e("td",null,"file",-1),_=e("td",null,"Instructions",-1),I=e("h3",{id:"_2-2-environmental-preparation",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#_2-2-environmental-preparation"},[e("span",null,"2.2 Environmental preparation")])],-1),N=e("li",null,[e("p",null,"Suggested operating environment：Ubuntu, CentOS, MacOS")],-1),w=e("p",null,"Runtime Environment",-1),x={href:"https://cloud.tsinghua.edu.cn/d/4c1342f6c272439aa96c/?p=%2Flibs&mode=list",target:"_blank",rel:"noopener noreferrer"},B=e("code",null,"lib",-1),A=e("code",null,"enterprise android -<version>",-1),k=e("img",{src:"https://alioss.timecho.com/docs/img/AINode部署3.png",alt:"",style:{width:"80%"}},null,-1),T=n(`<li><p>There must be a Python interpreter in the environment variables that can be directly called through the <code>python</code> instruction.</p></li><li><p>It is recommended to create a Python interpreter venv virtual environment in the <code>iotdb enterprise android -&lt;version&gt;</code> folder. If installing version 3.8.0 virtual environment, the statement is as follows:</p><div class="language-Bash line-numbers-mode" data-ext="Bash" data-title="Bash"><pre class="language-Bash"><code>  # Install version 3.8.0 of Venv 
  ../Python-3.8.0/python -m venv venv(Folder Name）
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li>`,2),S=n(`<h2 id="_3-installation-steps" tabindex="-1"><a class="header-anchor" href="#_3-installation-steps"><span>3 Installation steps</span></a></h2><h3 id="_3-1-ainode-activation" tabindex="-1"><a class="header-anchor" href="#_3-1-ainode-activation"><span>3.1 AINode activation</span></a></h3><p>Require IoTDB to be in normal operation and have AINode module authorization in the license (usually not in the license, please contact Tianmou Business or technical support personnel to obtain AINode module authorization).</p><p>The authorization method for activating the AINode module is as follows：</p><ul><li><p>Method 1: Activate file copy activation</p><ul><li>After restarting the confignode node, enter the activation folder, copy the system_info file to the Tianmou staff, and inform them to apply for independent authorization for AINode;</li><li>Received the license file returned by the staff;</li><li>Put the license file into the activation folder of the corresponding node;</li></ul></li><li><p>Method 2: Activate Script Activation</p><ul><li>Obtain the required machine code for activation, enter the <code>sbin</code> directory of the installation directory, and execute the activation script：<div class="language-Bash line-numbers-mode" data-ext="Bash" data-title="Bash"><pre class="language-Bash"><code>  cd sbin 
  ./start-activate.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li>The following information is displayed. Please copy the machine code (i.e. this string of characters) to the Tianmou staff and inform them to apply for independent authorization of AINode：<div class="language-Bash line-numbers-mode" data-ext="Bash" data-title="Bash"><pre class="language-Bash"><code>Please copy the system_info&#39;s content and send it to Timecho:
Y17hFA0xRCE1TmkVxILuCIEPc7uJcr5bzlXWiptw8uZTmTX5aThfypQdLUIhMljw075hNRSicyvyJR9JM7QaNm1gcFZPHVRWVXIiY5IlZkXdxCVc1erXMsbCqUYsR2R2Mw4PSpFJsUF5jHWSoFIIjQ2bmJFW5P52KCccFMVeHTc=
Please enter license:
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li>Enter the activation code returned by the staff into the <code>Please enter license:</code> command prompt in the previous step, as shown below：<div class="language-Bash line-numbers-mode" data-ext="Bash" data-title="Bash"><pre class="language-Bash"><code>Please enter license:
Jw+MmF+AtexsfgNGOFgTm83BgXbq0zT1+fOfPvQsLlj6ZsooHFU6HycUSEGC78eT1g67KPvkcLCUIsz2QpbyVmPLr9x1+kVjBubZPYlVpsGYLqLFc8kgpb5vIrPLd3hGLbJ5Ks8fV1WOVrDDVQq89YF2atQa2EaB9EAeTWd0bRMZ+s9ffjc/1Zmh9NSP/T3VCfJcJQyi7YpXWy5nMtcW0gSV+S6fS5r7a96PjbtE0zXNjnEhqgRzdU+mfO8gVuUNaIy9l375cp1GLpeCh6m6pF+APW1CiXLTSijK9Qh3nsL5bAOXNeob5l+HO5fEMgzrW8OJPh26Vl6ljKUpCvpTiw==
License has been stored to sbin/../activation/license
Import completed. Please start cluster and excute &#39;show cluster&#39; to verify activation status
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p>After updating the license, restart the DataNode node and enter the sbin directory of IoTDB to start the datanode：</p><div class="language-Bash line-numbers-mode" data-ext="Bash" data-title="Bash"><pre class="language-Bash"><code>  cd sbin
  ./start-datanode.sh   -d   #The parameter&#39;d &#39;will be started in the background 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h3 id="_3-2-configuration-item-modification" tabindex="-1"><a class="header-anchor" href="#_3-2-configuration-item-modification"><span>3.2 Configuration item modification</span></a></h3><p>AINode supports modifying some necessary parameters. You can find the following parameters in the <code>conf/iotdb-ainode.properties</code> file and make persistent modifications to them:<br> ：</p><table><thead><tr><th style="text-align:left;"><strong>Name</strong></th><th><strong>Describe</strong></th><th><strong>Type</strong></th><th><strong>Default value</strong></th><th><strong>Effective method after modification</strong></th></tr></thead><tbody><tr><td style="text-align:left;">cluster_name</td><td>The identifier for AINode to join the cluster</td><td>string</td><td>defaultCluster</td><td>Only allow modifications before the first service startup</td></tr><tr><td style="text-align:left;">ain_seed_config_node</td><td>The Configurable Node address registered during AINode startup</td><td>String</td><td>10710</td><td>Only allow modifications before the first service startup</td></tr><tr><td style="text-align:left;">ain_inference_rpc_address</td><td>AINode provides service and communication addresses</td><td>String</td><td>127.0.0.1</td><td>Effective after restart</td></tr><tr><td style="text-align:left;">ain_inference_rpc_port</td><td>AINode provides ports for services and communication</td><td>String</td><td>10810</td><td>Effective after restart</td></tr><tr><td style="text-align:left;">ain_system_dir</td><td>AINode metadata storage path, the starting directory of the relative path is related to the operating system, and it is recommended to use an absolute path</td><td>String</td><td>data/AINode/system</td><td>Effective after restart</td></tr><tr><td style="text-align:left;">ain_models_dir</td><td>AINode stores the path of the model file, and the starting directory of the relative path is related to the operating system. It is recommended to use an absolute path</td><td>String</td><td>data/AINode/models</td><td>Effective after restart</td></tr><tr><td style="text-align:left;">ain_logs_dir</td><td>The path where AINode stores logs, the starting directory of the relative path is related to the operating system, and it is recommended to use an absolute path</td><td>String</td><td>logs/AINode</td><td>Effective after restart</td></tr><tr><td style="text-align:left;">ain_thrift_compression_enabled</td><td>Does AINode enable Thrift&#39;s compression mechanism , 0-Do not start, 1-Start</td><td>Boolean</td><td>0</td><td>Effective after restart</td></tr></tbody></table><h3 id="_3-3-start-ainode" tabindex="-1"><a class="header-anchor" href="#_3-3-start-ainode"><span>3.3 Start AINode</span></a></h3><p>After completing the deployment of Seed Config Node, the registration and inference functions of the model can be supported by adding AINode nodes. After specifying the information of the IoTDB cluster in the configuration item, the corresponding instruction can be executed to start AINode and join the IoTDB cluster。</p><h3 id="networking-environment-startup" tabindex="-1"><a class="header-anchor" href="#networking-environment-startup"><span>Networking environment startup</span></a></h3><h4 id="start-command" tabindex="-1"><a class="header-anchor" href="#start-command"><span>Start command</span></a></h4><div class="language-Bash line-numbers-mode" data-ext="Bash" data-title="Bash"><pre class="language-Bash"><code>  # Linux / MacOS 
  bash sbin/start-ainode.sh  -i &lt;directory&gt;  -r  -n

  # Windows
  sbin\\start-ainode.bat  -i &lt;directory&gt;  -r  -n
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="parameter-introduction" tabindex="-1"><a class="header-anchor" href="#parameter-introduction"><span>Parameter introduction:</span></a></h4><table><thead><tr><th><strong>Name</strong></th><th><strong>Label</strong></th><th><strong>Describe</strong></th><th><strong>Is it mandatory</strong></th><th><strong>Type</strong></th><th><strong>Default value</strong></th><th><strong>Input method</strong></th></tr></thead><tbody><tr><td>ain_interpreter_dir</td><td>-i</td><td>The interpreter path of the virtual environment where AINode is installed requires the use of an absolute path.</td><td>no</td><td>String</td><td>Default reading of environment variables</td><td>Input or persist modifications during invocation</td></tr><tr><td>ain_force_reinstall</td><td>-r</td><td>Does this script check the version when checking the installation status of AINode. If it does, it will force the installation of the whl package in lib if the version is incorrect.</td><td>no</td><td>Bool</td><td>false</td><td>Input when calling</td></tr><tr><td>ain_no_dependencies</td><td>-n</td><td>Specify whether to install dependencies when installing AINode, and if so, only install the AINode main program without installing dependencies.</td><td>no</td><td>Bool</td><td>false</td><td>Input when calling</td></tr></tbody></table><p>If you don&#39;t want to specify the corresponding parameters every time you start, you can also persistently modify the parameters in the <code>ainode-env.sh</code> and <code>ainode-env.bat</code> scripts in the <code>conf</code> folder (currently supporting persistent modification of the ain_interpreter-dir parameter).</p><p><code>ainode-env.sh</code> :</p><div class="language-Bash line-numbers-mode" data-ext="Bash" data-title="Bash"><pre class="language-Bash"><code> # The defaulte venv environment is used if ain_interpreter_dir is not set. Please use absolute path without quotation mark
 # ain_interpreter_dir=
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><code>ainode-env.bat</code> :</p><div class="language-Bash line-numbers-mode" data-ext="Bash" data-title="Bash"><pre class="language-Bash"><code>  @REM The defaulte venv environment is used if ain_interpreter_dir is not set. Please use absolute path without quotation mark
  @REM set ain_interpreter_dir=
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>After writing the parameter value, uncomment the corresponding line and save it to take effect on the next script execution.</p><h3 id="example" tabindex="-1"><a class="header-anchor" href="#example"><span>Example</span></a></h3><h4 id="directly-start" tabindex="-1"><a class="header-anchor" href="#directly-start"><span>Directly start:</span></a></h4><div class="language-Bash line-numbers-mode" data-ext="Bash" data-title="Bash"><pre class="language-Bash"><code>  # Start command
  # Linux and MacOS systems
  bash sbin/start-ainode.sh
  # Windows systems
  sbin\\start-ainode.bat 


  # Backend startup command (recommended for long-term running)
  # Linux and MacOS systems
  nohup bash sbin/start-ainode.sh  &gt; myout.file 2&gt;&amp; 1 &amp;
  # Windows systems
  nohup bash sbin/start-ainode.bat  &gt; myout.file 2&gt;&amp; 1 &amp;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="update-start" tabindex="-1"><a class="header-anchor" href="#update-start"><span>Update Start:</span></a></h4><p>If the version of AINode has been updated (such as updating the <code>lib</code> folder), this command can be used. Firstly, it is necessary to ensure that AINode has stopped running, and then restart it using the <code>-r</code> parameter, which will reinstall AINode based on the files under <code>lib</code>.</p><div class="language-Bash line-numbers-mode" data-ext="Bash" data-title="Bash"><pre class="language-Bash"><code>  # Update startup command
  # Linux and MacOS systems
  bash sbin/start-ainode.sh -r
  # Windows systems
  sbin\\start-ainode.bat -r


  # Backend startup command (recommended for long-term running)
  # Linux and MacOS systems
  nohup bash sbin/start-ainode.sh -r &gt; myout.file 2&gt;&amp; 1 &amp;
  # Windows systems
  nohup bash sbin/start-ainode.bat -r &gt; myout.file 2&gt;&amp; 1 &amp;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="non-networked-environment-startup" tabindex="-1"><a class="header-anchor" href="#non-networked-environment-startup"><span>Non networked environment startup</span></a></h3><h3 id="start-command-1" tabindex="-1"><a class="header-anchor" href="#start-command-1"><span>Start command</span></a></h3><div class="language-Bash line-numbers-mode" data-ext="Bash" data-title="Bash"><pre class="language-Bash"><code>  # Linux / MacOS 
  bash sbin/start-ainode.sh  -i &lt;directory&gt;  -r  -n

  # Windows
  sbin\\start-ainode.bat  -i &lt;directory&gt;  -r  -n
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="parameter-introduction-1" tabindex="-1"><a class="header-anchor" href="#parameter-introduction-1"><span>Parameter introduction:</span></a></h4><table><thead><tr><th><strong>Name</strong></th><th><strong>Label</strong></th><th><strong>Describe</strong></th><th><strong>Is it mandatory</strong></th><th><strong>Type</strong></th><th><strong>Default value</strong></th><th><strong>Input method</strong></th></tr></thead><tbody><tr><td>ain_interpreter_dir</td><td>-i</td><td>The interpreter path of the virtual environment where AINode is installed requires the use of an absolute path</td><td>no</td><td>String</td><td>Default reading of environment variables</td><td>Input or persist modifications during invocation</td></tr><tr><td>ain_force_reinstall</td><td>-r</td><td>Does this script check the version when checking the installation status of AINode. If it does, it will force the installation of the whl package in lib if the version is incorrect</td><td>no</td><td>Bool</td><td>false</td><td>Input when calling</td></tr></tbody></table><blockquote><p>Attention: When installation fails in a non networked environment, first check if the installation package corresponding to the platform is selected, and then confirm that the Python version is 3.8 (due to the limitations of the downloaded installation package on Python versions, 3.7, 3.9, and others are not allowed)</p></blockquote><h3 id="example-1" tabindex="-1"><a class="header-anchor" href="#example-1"><span>Example</span></a></h3><h4 id="directly-start-1" tabindex="-1"><a class="header-anchor" href="#directly-start-1"><span>Directly start:</span></a></h4><div class="language-Bash line-numbers-mode" data-ext="Bash" data-title="Bash"><pre class="language-Bash"><code>  # Start command
  # Linux and MacOS systems
  bash sbin/start-ainode.sh
  # Windows systems
  sbin\\start-ainode.bat 

  # Backend startup command (recommended for long-term running)
  # Linux and MacOS systems
  nohup bash sbin/start-ainode.sh  &gt; myout.file 2&gt;&amp; 1 &amp;
  # Windows systems
  nohup bash sbin/start-ainode.bat  &gt; myout.file 2&gt;&amp; 1 &amp;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-4-detecting-the-status-of-ainode-nodes" tabindex="-1"><a class="header-anchor" href="#_3-4-detecting-the-status-of-ainode-nodes"><span>3.4 Detecting the status of AINode nodes</span></a></h3><p>During the startup process of AINode, the new AINode will be automatically added to the IoTDB cluster. After starting AINode, you can enter SQL in the command line to query. If you see an AINode node in the cluster and its running status is Running (as shown below), it indicates successful joining.</p><div class="language-Bash line-numbers-mode" data-ext="Bash" data-title="Bash"><pre class="language-Bash"><code>IoTDB&gt; show cluster
+------+----------+-------+---------------+------------+-------+-----------+
|NodeID|  NodeType| Status|InternalAddress|InternalPort|Version|  BuildInfo|
+------+----------+-------+---------------+------------+-------+-----------+
|     0|ConfigNode|Running|      127.0.0.1|       10710|UNKNOWN|190e303-dev|
|     1|  DataNode|Running|      127.0.0.1|       10730|UNKNOWN|190e303-dev|
|     2|    AINode|Running|      127.0.0.1|       10810|UNKNOWN|190e303-dev|
+------+----------+-------+---------------+------------+-------+-----------+
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-5-stop-ainode" tabindex="-1"><a class="header-anchor" href="#_3-5-stop-ainode"><span>3.5 Stop AINode</span></a></h3><p>If you need to stop a running AINode node, execute the corresponding shutdown script.</p><h3 id="stop-command" tabindex="-1"><a class="header-anchor" href="#stop-command"><span>Stop command</span></a></h3><div class="language-Bash line-numbers-mode" data-ext="Bash" data-title="Bash"><pre class="language-Bash"><code>  # Linux / MacOS 
  bash sbin/stop-ainode.sh  -t&lt;AINode-id&gt;/&lt;ip&gt;:&lt;rpc-port&gt;

  #Windows
  sbin\\stop-ainode.bat  -t&lt;AINode-id&gt;/&lt;ip&gt;:&lt;rpc-port&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="parameter-introduction-2" tabindex="-1"><a class="header-anchor" href="#parameter-introduction-2"><span>Parameter introduction:</span></a></h4><table><thead><tr><th><strong>Name</strong></th><th><strong>Label</strong></th><th><strong>Describe</strong></th><th><strong>Is it mandatory</strong></th><th><strong>Type</strong></th><th><strong>Default value</strong></th><th><strong>Input method</strong></th></tr></thead><tbody><tr><td>ain_remove_target</td><td>-t</td><td>When closing AINode, you can specify the Node ID, address, and port number of the target AINode to be removed, in the format of <code>&lt;AINode id&gt;/&lt;ip&gt;:&lt;rpc port&gt;</code></td><td>no</td><td>String</td><td>nothing</td><td>Input when calling</td></tr></tbody></table><h3 id="example-2" tabindex="-1"><a class="header-anchor" href="#example-2"><span>Example</span></a></h3><div class="language-Bash line-numbers-mode" data-ext="Bash" data-title="Bash"><pre class="language-Bash"><code>  # Linux / MacOS 
  bash sbin/stop-ainode.sh

  # Windows
  sbin\\stop-ainode.bat
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>After stopping AINode, you can still see AINode nodes in the cluster, whose running status is UNKNOWN (as shown below), and the AINode function cannot be used at this time.</p><div class="language-Bash line-numbers-mode" data-ext="Bash" data-title="Bash"><pre class="language-Bash"><code>IoTDB&gt; show cluster
+------+----------+-------+---------------+------------+-------+-----------+
|NodeID|  NodeType| Status|InternalAddress|InternalPort|Version|  BuildInfo|
+------+----------+-------+---------------+------------+-------+-----------+
|     0|ConfigNode|Running|      127.0.0.1|       10710|UNKNOWN|190e303-dev|
|     1|  DataNode|Running|      127.0.0.1|       10730|UNKNOWN|190e303-dev|
|     2|    AINode|UNKNOWN|      127.0.0.1|       10790|UNKNOWN|190e303-dev|
+------+----------+-------+---------------+------------+-------+-----------+
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>If you need to restart the node, you need to execute the startup script again.</p><h3 id="_3-6-remove-ainode" tabindex="-1"><a class="header-anchor" href="#_3-6-remove-ainode"><span>3.6 Remove AINode</span></a></h3><p>When it is necessary to remove an AINode node from the cluster, a removal script can be executed. The difference between removing and stopping scripts is that stopping retains the AINode node in the cluster but stops the AINode service, while removing removes the AINode node from the cluster.</p><h3 id="remove-command" tabindex="-1"><a class="header-anchor" href="#remove-command"><span>Remove command</span></a></h3><div class="language-Bash line-numbers-mode" data-ext="Bash" data-title="Bash"><pre class="language-Bash"><code>  # Linux / MacOS 
  bash sbin/stop-ainode.sh  -i&lt;directory&gt;  -t&lt;AINode-id&gt;/&lt;ip&gt;:&lt;rpc-port&gt;  -r  -n

  # Windows
  sbin\\stop-ainode.bat  -i&lt;directory&gt;  -t&lt;AINode-id&gt;/&lt;ip&gt;:&lt;rpc-port&gt;  -r  -n
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="parameter-introduction-3" tabindex="-1"><a class="header-anchor" href="#parameter-introduction-3"><span>Parameter introduction:</span></a></h4><table><thead><tr><th><strong>Name</strong></th><th><strong>Label</strong></th><th><strong>Describe</strong></th><th><strong>Is it mandatory</strong></th><th><strong>Type</strong></th><th><strong>Default value</strong></th><th><strong>Input method</strong></th></tr></thead><tbody><tr><td>ain_interpreter_dir</td><td>-i</td><td>The interpreter path of the virtual environment where AINode is installed requires the use of an absolute path</td><td>no</td><td>String</td><td>Default reading of environment variables</td><td>Input+persistent modification during invocation</td></tr><tr><td>ain_remove_target</td><td>-t</td><td>When closing AINode, you can specify the Node ID, address, and port number of the target AINode to be removed, in the format of <code>&lt;AINode id&gt;/&lt;ip&gt;:&lt;rpc port&gt;</code></td><td>no</td><td>String</td><td>nothing</td><td>Input when calling</td></tr><tr><td>ain_force_reinstall</td><td>-r</td><td>Does this script check the version when checking the installation status of AINode. If it does, it will force the installation of the whl package in lib if the version is incorrect</td><td>no</td><td>Bool</td><td>false</td><td>Input when calling</td></tr><tr><td>ain_no_dependencies</td><td>-n</td><td>Specify whether to install dependencies when installing AINode, and if so, only install the AINode main program without installing dependencies</td><td>no</td><td>Bool</td><td>false</td><td>Input when calling</td></tr></tbody></table><p>If you don&#39;t want to specify the corresponding parameters every time you start, you can also persistently modify the parameters in the <code>ainode-env.sh</code> and <code>ainode-env.bat</code> scripts in the <code>conf</code> folder (currently supporting persistent modification of the ain_interpreter-dir parameter).</p><p><code>ainode-env.sh</code> :</p><div class="language-Bash line-numbers-mode" data-ext="Bash" data-title="Bash"><pre class="language-Bash"><code> # The defaulte venv environment is used if ain_interpreter_dir is not set. Please use absolute path without quotation mark
 # ain_interpreter_dir=
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><code>ainode-env.bat</code> :</p><div class="language-Bash line-numbers-mode" data-ext="Bash" data-title="Bash"><pre class="language-Bash"><code>  @REM The defaulte venv environment is used if ain_interpreter_dir is not set. Please use absolute path without quotation mark
  @REM set ain_interpreter_dir=
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>After writing the parameter value, uncomment the corresponding line and save it to take effect on the next script execution.</p><h3 id="example-3" tabindex="-1"><a class="header-anchor" href="#example-3"><span>Example</span></a></h3><h4 id="directly-remove" tabindex="-1"><a class="header-anchor" href="#directly-remove"><span>Directly remove:</span></a></h4><div class="language-Bash line-numbers-mode" data-ext="Bash" data-title="Bash"><pre class="language-Bash"><code># Linux / MacOS 
bash sbin/remove-ainode.sh

# Windows
sbin\\remove-ainode.bat
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>After removing the node, relevant information about the node cannot be queried.</p><div class="language-Bash line-numbers-mode" data-ext="Bash" data-title="Bash"><pre class="language-Bash"><code>IoTDB&gt; show cluster
+------+----------+-------+---------------+------------+-------+-----------+
|NodeID|  NodeType| Status|InternalAddress|InternalPort|Version|  BuildInfo|
+------+----------+-------+---------------+------------+-------+-----------+
|     0|ConfigNode|Running|      127.0.0.1|       10710|UNKNOWN|190e303-dev|
|     1|  DataNode|Running|      127.0.0.1|       10730|UNKNOWN|190e303-dev|
+------+----------+-------+---------------+------------+-------+-----------+
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="specify-removal" tabindex="-1"><a class="header-anchor" href="#specify-removal"><span>Specify removal:</span></a></h4><p>If the user loses files in the data folder, AINode may not be able to actively remove them locally. The user needs to specify the node number, address, and port number for removal. In this case, we support users to input parameters according to the following methods for deletion.</p><div class="language-Bash line-numbers-mode" data-ext="Bash" data-title="Bash"><pre class="language-Bash"><code># Linux / MacOS 
bash sbin/remove-ainode.sh -t &lt;AINode-id&gt;/&lt;ip&gt;:&lt;rpc-port&gt;

# Windows
sbin\\remove-ainode.bat -t &lt;AINode-id&gt;/&lt;ip&gt;:&lt;rpc-port&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-common-problem" tabindex="-1"><a class="header-anchor" href="#_4-common-problem"><span>4 common problem</span></a></h2><h3 id="_4-1-an-error-occurs-when-starting-ainode-stating-that-the-venv-module-cannot-be-found" tabindex="-1"><a class="header-anchor" href="#_4-1-an-error-occurs-when-starting-ainode-stating-that-the-venv-module-cannot-be-found"><span>4.1 An error occurs when starting AINode stating that the venv module cannot be found</span></a></h3><p>When starting AINode using the default method, a Python virtual environment will be created in the installation package directory and dependencies will be installed, so it is required to install the venv module. Generally speaking, Python 3.8 and above versions come with built-in VenV, but for some systems with built-in Python environments, this requirement may not be met. There are two solutions when this error occurs (choose one or the other):</p><p>To install the Venv module locally, taking Ubuntu as an example, you can run the following command to install the built-in Venv module in Python. Or install a Python version with built-in Venv from the Python official website.</p><div class="language-Bash line-numbers-mode" data-ext="Bash" data-title="Bash"><pre class="language-Bash"><code>apt-get install python3.8-venv 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Install version 3.8.0 of venv into AINode in the AINode path.</p><div class="language-Bash line-numbers-mode" data-ext="Bash" data-title="Bash"><pre class="language-Bash"><code>../Python-3.8.0/python -m venv venv(Folder Name）
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>When running the startup script, use <code>-i</code> to specify an existing Python interpreter path as the running environment for AINode, eliminating the need to create a new virtual environment.</p><h3 id="_4-2-the-ssl-module-in-python-is-not-properly-installed-and-configured-to-handle-https-resources" tabindex="-1"><a class="header-anchor" href="#_4-2-the-ssl-module-in-python-is-not-properly-installed-and-configured-to-handle-https-resources"><span>4.2 The SSL module in Python is not properly installed and configured to handle HTTPS resources</span></a></h3><p>WARNING: pip is configured with locations that require TLS/SSL, however the ssl module in Python is not available.<br> You can install OpenSSLS and then rebuild Python to solve this problem</p><blockquote><p>Currently Python versions 3.6 to 3.9 are compatible with OpenSSL 1.0.2, 1.1.0, and 1.1.1.</p></blockquote>`,81),D={href:"https://stackoverflow.com/questions/56552390/how-to-fix-ssl-module-in-python-is-not-available-in-centos",target:"_blank",rel:"noopener noreferrer"},P=n(`<div class="language-Bash line-numbers-mode" data-ext="Bash" data-title="Bash"><pre class="language-Bash"><code>sudo apt-get install build-essential libssl-dev zlib1g-dev libbz2-dev libreadline-dev libsqlite3-dev wget curl llvm libncurses5-dev libncursesw5-dev xz-utils tk-dev libffi-dev liblzma-dev uuid-dev lzma-dev liblzma-dev
sudo -E ./configure --with-ssl
make
sudo make install
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-3-pip-version-is-lower" tabindex="-1"><a class="header-anchor" href="#_4-3-pip-version-is-lower"><span>4.3 Pip version is lower</span></a></h3><p>A compilation issue similar to &quot;error: Microsoft Visual C++14.0 or greater is required...&quot; appears on Windows</p><p>The corresponding error occurs during installation and compilation, usually due to insufficient C++version or Setup tools version. You can check it in</p><div class="language-Bash line-numbers-mode" data-ext="Bash" data-title="Bash"><pre class="language-Bash"><code>./python -m pip install --upgrade pip
./python -m pip install --upgrade setuptools
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-4-install-and-compile-python" tabindex="-1"><a class="header-anchor" href="#_4-4-install-and-compile-python"><span>4.4 Install and compile Python</span></a></h3><p>Use the following instructions to download the installation package from the official website and extract it:</p><div class="language-Bash line-numbers-mode" data-ext="Bash" data-title="Bash"><pre class="language-Bash"><code>.wget https://www.python.org/ftp/python/3.8.0/Python-3.8.0.tar.xz
tar Jxf Python-3.8.0.tar.xz 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>Compile and install the corresponding Python package:</p><div class="language-Bash line-numbers-mode" data-ext="Bash" data-title="Bash"><pre class="language-Bash"><code>cd Python-3.8.0
./configure prefix=/usr/local/python3
make
sudo make install
python3 --version
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,10);function E(W,C){const i=d("ExternalLinkIcon");return o(),r("div",null,[c,e("table",null,[h,e("tbody",null,[u,p,m,v,g,b,e("tr",null,[e("td",null,[e("a",f,[t("README.md"),a(i)])]),y,_])])]),I,e("ul",null,[N,e("li",null,[w,e("ul",null,[e("li",null,[e("p",null,[t("Python>=3.8 is sufficient in a networked environment, and comes with pip and venv tools; Python 3.8 version is required for non networked environments,And from "),e("a",x,[t("here"),a(i)]),t(" Download the zip file corresponding to the operating system (Note that when downloading dependencies, you need to select the zip file in the libs folder, as shown in the following figure)，Copy all files in the folder to the "),B,t(" folder in the iotdb "),A,t(" folder, and follow the steps below to start AINode.")]),k]),T])])]),S,e("p",null,[t("Python requires OpenSSL to be installed on our system, the specific installation method can be found in "),e("a",D,[t("link"),a(i)])]),P])}const O=s(l,[["render",E],["__file","AINode_Deployment_timecho.html.vue"]]),M=JSON.parse('{"path":"/UserGuide/latest/Deployment-and-Maintenance/AINode_Deployment_timecho.html","title":"AINode Deployment","lang":"en-US","frontmatter":{"description":"AINode Deployment 1 AINode Introduction 1.1 Capability Introduction AINode is the third type of endogenous node provided by IoTDB after the Configurable Node and DataNode. This ...","head":[["link",{"rel":"alternate","hreflang":"zh-cn","href":"https://iotdb.apache.org/zh/UserGuide/latest/Deployment-and-Maintenance/AINode_Deployment_timecho.html"}],["meta",{"property":"og:url","content":"https://iotdb.apache.org/UserGuide/latest/Deployment-and-Maintenance/AINode_Deployment_timecho.html"}],["meta",{"property":"og:site_name","content":"IoTDB Website"}],["meta",{"property":"og:title","content":"AINode Deployment"}],["meta",{"property":"og:description","content":"AINode Deployment 1 AINode Introduction 1.1 Capability Introduction AINode is the third type of endogenous node provided by IoTDB after the Configurable Node and DataNode. This ..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:locale:alternate","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-08-01T07:47:59.000Z"}],["meta",{"property":"article:modified_time","content":"2024-08-01T07:47:59.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"AINode Deployment\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-08-01T07:47:59.000Z\\",\\"author\\":[]}"]]},"headers":[{"level":2,"title":"1 AINode Introduction","slug":"_1-ainode-introduction","link":"#_1-ainode-introduction","children":[{"level":3,"title":"1.1 Capability Introduction","slug":"_1-1-capability-introduction","link":"#_1-1-capability-introduction","children":[]},{"level":3,"title":"1.2 Delivery Method","slug":"_1-2-delivery-method","link":"#_1-2-delivery-method","children":[]},{"level":3,"title":"1.3 Deployment mode","slug":"_1-3-deployment-mode","link":"#_1-3-deployment-mode","children":[]}]},{"level":2,"title":"2 Installation preparation","slug":"_2-installation-preparation","link":"#_2-installation-preparation","children":[{"level":3,"title":"2.1 Get installation package","slug":"_2-1-get-installation-package","link":"#_2-1-get-installation-package","children":[]},{"level":3,"title":"2.2 Environmental preparation","slug":"_2-2-environmental-preparation","link":"#_2-2-environmental-preparation","children":[]}]},{"level":2,"title":"3 Installation steps","slug":"_3-installation-steps","link":"#_3-installation-steps","children":[{"level":3,"title":"3.1 AINode activation","slug":"_3-1-ainode-activation","link":"#_3-1-ainode-activation","children":[]},{"level":3,"title":"3.2 Configuration item modification","slug":"_3-2-configuration-item-modification","link":"#_3-2-configuration-item-modification","children":[]},{"level":3,"title":"3.3 Start AINode","slug":"_3-3-start-ainode","link":"#_3-3-start-ainode","children":[]},{"level":3,"title":"Networking environment startup","slug":"networking-environment-startup","link":"#networking-environment-startup","children":[]},{"level":3,"title":"Example","slug":"example","link":"#example","children":[]},{"level":3,"title":"Non networked environment startup","slug":"non-networked-environment-startup","link":"#non-networked-environment-startup","children":[]},{"level":3,"title":"Start command","slug":"start-command-1","link":"#start-command-1","children":[]},{"level":3,"title":"Example","slug":"example-1","link":"#example-1","children":[]},{"level":3,"title":"3.4 Detecting the status of AINode nodes","slug":"_3-4-detecting-the-status-of-ainode-nodes","link":"#_3-4-detecting-the-status-of-ainode-nodes","children":[]},{"level":3,"title":"3.5 Stop AINode","slug":"_3-5-stop-ainode","link":"#_3-5-stop-ainode","children":[]},{"level":3,"title":"Stop command","slug":"stop-command","link":"#stop-command","children":[]},{"level":3,"title":"Example","slug":"example-2","link":"#example-2","children":[]},{"level":3,"title":"3.6 Remove AINode","slug":"_3-6-remove-ainode","link":"#_3-6-remove-ainode","children":[]},{"level":3,"title":"Remove command","slug":"remove-command","link":"#remove-command","children":[]},{"level":3,"title":"Example","slug":"example-3","link":"#example-3","children":[]}]},{"level":2,"title":"4 common problem","slug":"_4-common-problem","link":"#_4-common-problem","children":[{"level":3,"title":"4.1 An error occurs when starting AINode stating that the venv module cannot be found","slug":"_4-1-an-error-occurs-when-starting-ainode-stating-that-the-venv-module-cannot-be-found","link":"#_4-1-an-error-occurs-when-starting-ainode-stating-that-the-venv-module-cannot-be-found","children":[]},{"level":3,"title":"4.2 The SSL module in Python is not properly installed and configured to handle HTTPS resources","slug":"_4-2-the-ssl-module-in-python-is-not-properly-installed-and-configured-to-handle-https-resources","link":"#_4-2-the-ssl-module-in-python-is-not-properly-installed-and-configured-to-handle-https-resources","children":[]},{"level":3,"title":"4.3 Pip version is lower","slug":"_4-3-pip-version-is-lower","link":"#_4-3-pip-version-is-lower","children":[]},{"level":3,"title":"4.4 Install and compile Python","slug":"_4-4-install-and-compile-python","link":"#_4-4-install-and-compile-python","children":[]}]}],"git":{"createdTime":1722498479000,"updatedTime":1722498479000,"contributors":[{"name":"W1y1r","email":"150988475+W1y1r@users.noreply.github.com","commits":1}]},"readingTime":{"minutes":9.73,"words":2920},"filePathRelative":"UserGuide/latest/Deployment-and-Maintenance/AINode_Deployment_timecho.md","localizedDate":"August 1, 2024","autoDesc":true}');export{O as comp,M as data};
