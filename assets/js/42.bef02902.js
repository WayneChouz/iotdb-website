(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{447:function(t,e,a){"use strict";a.r(e);var s=a(30),n=Object(s.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h2",{attrs:{id:"cluster-setup"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#cluster-setup"}},[t._v("#")]),t._v(" Cluster Setup")]),t._v(" "),e("p",[t._v("This article is the setup process of IoTDB Cluster (0.14.0-preview1).")]),t._v(" "),e("h2",{attrs:{id:"environments"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#environments"}},[t._v("#")]),t._v(" Environments")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("JDK>=1.8.")])]),t._v(" "),e("li",[e("p",[t._v("Max open file 65535.")])]),t._v(" "),e("li",[e("p",[t._v("Disable the swap memory.")])])]),t._v(" "),e("h2",{attrs:{id:"get-the-binary-distribution"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#get-the-binary-distribution"}},[t._v("#")]),t._v(" Get the binary distribution")]),t._v(" "),e("h3",{attrs:{id:"download"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#download"}},[t._v("#")]),t._v(" Download")]),t._v(" "),e("p",[t._v("Download the binary distribution from website "),e("a",{attrs:{href:"https://iotdb.apache.org/Download/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Download Page"),e("OutboundLink")],1),t._v(".")]),t._v(" "),e("h3",{attrs:{id:"compiled-from-source-code"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#compiled-from-source-code"}},[t._v("#")]),t._v(" Compiled from source code")]),t._v(" "),e("p",[t._v("Download the source code:")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("git clone https://github.com/apache/iotdb.git\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("p",[t._v("The default branch is master, you should checkout to the release tag:")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("git checkout v0.14.0-preview1\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("p",[t._v("Under the source root folder:")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("mvn clean package -pl distribution -am -DskipTests\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("p",[t._v("Then you will get the binary distribution under "),e("strong",[t._v("distribution/target")]),t._v(", in which the "),e("strong",[t._v("all-bin")]),t._v(" contains ConfigNode and DataNode, and DataNode contains the Cli.")]),t._v(" "),e("h2",{attrs:{id:"binary-distribution-content"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#binary-distribution-content"}},[t._v("#")]),t._v(" Binary Distribution Content")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[e("strong",[t._v("Folder")])]),t._v(" "),e("th",[e("strong",[t._v("Description")])])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("confignode")]),t._v(" "),e("td",[t._v("Contains start/stop/remove shell, configurations, logs, data of ConfigNode")])]),t._v(" "),e("tr",[e("td",[t._v("datanode")]),t._v(" "),e("td",[t._v("Contains start/stop/remove shell, configurations, logs, data of DataNode, cli shell")])]),t._v(" "),e("tr",[e("td",[t._v("grafana-metrics-example")]),t._v(" "),e("td",[t._v("Grafana metric page module")])]),t._v(" "),e("tr",[e("td",[t._v("lib")]),t._v(" "),e("td",[t._v("Jar files folder")])]),t._v(" "),e("tr",[e("td",[t._v("tools")]),t._v(" "),e("td",[t._v("System tools")])])])]),t._v(" "),e("h2",{attrs:{id:"start-the-cluster"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#start-the-cluster"}},[t._v("#")]),t._v(" Start the Cluster")]),t._v(" "),e("p",[t._v("Users could start a cluster which contains multiple ConfigNode and DataNode.\nA cluster need at least one ConfigNode and no less than the number of data/schema_replication_factor DataNodes.")]),t._v(" "),e("p",[t._v("The total process are three steps:")]),t._v(" "),e("ul",[e("li",[t._v("Start the first ConfigNode")]),t._v(" "),e("li",[t._v("Add ConfigNode (Optional)")]),t._v(" "),e("li",[t._v("Add DataNode")])]),t._v(" "),e("h3",{attrs:{id:"start-the-first-confignode"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#start-the-first-confignode"}},[t._v("#")]),t._v(" Start the first ConfigNode")]),t._v(" "),e("p",[t._v("Please set the important parameters in iotdb-confignode.properties:")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[e("strong",[t._v("Configuration")])]),t._v(" "),e("th",[e("strong",[t._v("Description")])])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("internal_address")]),t._v(" "),e("td",[t._v("Internal rpc service address of ConfigNode")])]),t._v(" "),e("tr",[e("td",[t._v("internal_port")]),t._v(" "),e("td",[t._v("Internal rpc service address of ConfigNode")])]),t._v(" "),e("tr",[e("td",[t._v("consensus_port")]),t._v(" "),e("td",[t._v("ConfigNode replication consensus protocol communication port")])]),t._v(" "),e("tr",[e("td",[t._v("target_config_nodes")]),t._v(" "),e("td",[t._v("Target ConfigNode address, if the current is the first ConfigNode, then set its address:port")])]),t._v(" "),e("tr",[e("td",[t._v("data_replication_factor")]),t._v(" "),e("td",[t._v("Data replication factor, no more than DataNode number")])]),t._v(" "),e("tr",[e("td",[t._v("data_region_consensus_protocol_class")]),t._v(" "),e("td",[t._v("Consensus protocol of data replicas")])]),t._v(" "),e("tr",[e("td",[t._v("schema_replication_factor")]),t._v(" "),e("td",[t._v("Schema replication factor, no more than DataNode number")])]),t._v(" "),e("tr",[e("td",[t._v("schema_region_consensus_protocol_class")]),t._v(" "),e("td",[t._v("Consensus protocol of schema replicas")])])])]),t._v(" "),e("p",[t._v("Start on Linux:")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("# Foreground\n./confignode/sbin/start-confignode.sh\n\n# Background\nnohup ./confignode/sbin/start-confignode.sh >/dev/null 2>&1 &\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br")])]),e("p",[t._v("Start on Windows:")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("confignode\\sbin\\start-confignode.bat\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("p",[t._v("More details  "),e("a",{attrs:{href:"https://iotdb.apache.org/UserGuide/Master/Reference/ConfigNode-Config-Manual.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("ConfigNode Configurations"),e("OutboundLink")],1),t._v(".")]),t._v(" "),e("h3",{attrs:{id:"add-confignode-optional"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#add-confignode-optional"}},[t._v("#")]),t._v(" Add ConfigNode (Optional)")]),t._v(" "),e("p",[t._v("This will add the replication factor of ConfigNode, except for the port couldn't conflict, make sure other configurations are the same with existing ConfigNode in Cluster.")]),t._v(" "),e("p",[t._v("The adding ConfigNode also use the start-confignode.sh/bat.")]),t._v(" "),e("h3",{attrs:{id:"start-datanode"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#start-datanode"}},[t._v("#")]),t._v(" Start DataNode")]),t._v(" "),e("p",[t._v("You could add any number of DataNode.")]),t._v(" "),e("p",[t._v("Please set the important parameters in iotdb-datanode.properties.")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[e("strong",[t._v("Configuration")])]),t._v(" "),e("th",[e("strong",[t._v("Description")])])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("rpc_address")]),t._v(" "),e("td",[t._v("Client RPC Service address")])]),t._v(" "),e("tr",[e("td",[t._v("rpc_port")]),t._v(" "),e("td",[t._v("Client RPC Service port")])]),t._v(" "),e("tr",[e("td",[t._v("internal_address")]),t._v(" "),e("td",[t._v("Control flow address of DataNode inside cluster")])]),t._v(" "),e("tr",[e("td",[t._v("internal_port")]),t._v(" "),e("td",[t._v("Control flow port of DataNode inside cluster")])]),t._v(" "),e("tr",[e("td",[t._v("mpp_data_exchange_port")]),t._v(" "),e("td",[t._v("Data flow port of DataNode inside cluster")])]),t._v(" "),e("tr",[e("td",[t._v("data_region_consensus_port")]),t._v(" "),e("td",[t._v("Data replicas communication port for consensus")])]),t._v(" "),e("tr",[e("td",[t._v("schema_region_consensus_port")]),t._v(" "),e("td",[t._v("Schema replicas communication port for consensus")])]),t._v(" "),e("tr",[e("td",[t._v("target_config_nodes")]),t._v(" "),e("td",[t._v("Running ConfigNode of the Cluster")])])])]),t._v(" "),e("p",[t._v("Start on Linux:")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("# Foreground\n./datanode/sbin/start-datanode.sh\n\n# Background\nnohup ./datanode/sbin/start-datanode.sh >/dev/null 2>&1 &\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br")])]),e("p",[t._v("Start on Windows:")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("datanode\\sbin\\start-datanode.bat\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("p",[t._v("More details "),e("a",{attrs:{href:"https://iotdb.apache.org/UserGuide/Master/Reference/DataNode-Config-Manual.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("DataNode Configurations"),e("OutboundLink")],1),t._v(".")]),t._v(" "),e("h3",{attrs:{id:"start-cli"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#start-cli"}},[t._v("#")]),t._v(" Start Cli")]),t._v(" "),e("p",[t._v("Cli is in datanode/sbin folder.")]),t._v(" "),e("p",[t._v("Start on Linux:")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("./datanode/sbin/start-cli.sh\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("p",[t._v("Start on Windows:")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("datanode\\sbin\\start-cli.bat\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("h2",{attrs:{id:"shrink-the-cluster"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#shrink-the-cluster"}},[t._v("#")]),t._v(" Shrink the Cluster")]),t._v(" "),e("h3",{attrs:{id:"remove-confignode"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#remove-confignode"}},[t._v("#")]),t._v(" Remove ConfigNode")]),t._v(" "),e("p",[t._v("Execute the remove-confignode shell on an active ConfigNode.")]),t._v(" "),e("p",[t._v("Remove on Linux:")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("./confignode/sbin/remove-confignode.sh <id>/<internal_address>:<internal_port>\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("p",[t._v("Remove on Windows:")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("confignode\\sbin\\remove-confignode.bat <id>/<internal_address>:<internal_port>\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("h3",{attrs:{id:"remove-datanode"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#remove-datanode"}},[t._v("#")]),t._v(" Remove DataNode")]),t._v(" "),e("p",[t._v("Execute the remove-datanode shell on an active DataNode.")]),t._v(" "),e("p",[t._v("Remove on Linux:")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("./datanode/sbin/remove-datanode.sh <id>/<rpc_address>:<rpc_port>\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("p",[t._v("Remove on Windows:")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("datanode\\sbin\\remove-datanode.bat <id>/<rpc_address>:<rpc_port>\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("h2",{attrs:{id:"quick-start"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#quick-start"}},[t._v("#")]),t._v(" Quick Start")]),t._v(" "),e("p",[t._v("This section uses a local environment as an example to\nillustrate how to start, expand, and shrink a IoTDB Cluster.")]),t._v(" "),e("h3",{attrs:{id:"_1-prepare-the-start-environment"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-prepare-the-start-environment"}},[t._v("#")]),t._v(" 1. Prepare the Start Environment")]),t._v(" "),e("p",[t._v("Unzip the apache-iotdb-0.14.0-preview1-all-bin.zip file to cluster0 folder.")]),t._v(" "),e("h3",{attrs:{id:"_2-starting-a-minimum-cluster"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-starting-a-minimum-cluster"}},[t._v("#")]),t._v(" 2. Starting a Minimum Cluster")]),t._v(" "),e("p",[t._v("Starting the Cluster version with one ConfigNode and one DataNode(1C1D),\nthe default number of replica is one.")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("./cluster0/confignode/sbin/start-confignode.sh\n./cluster0/datanode/sbin/start-datanode.sh\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br")])]),e("h3",{attrs:{id:"_3-verify-the-minimum-cluster"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-verify-the-minimum-cluster"}},[t._v("#")]),t._v(" 3. Verify the Minimum Cluster")]),t._v(" "),e("ul",[e("li",[t._v("The minimum cluster is successfully started. Start the Cli for verification.")])]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("./cluster0/datanode/sbin/start-cli.sh\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("ul",[e("li",[t._v("Execute the "),e("a",{attrs:{href:"https://iotdb.apache.org/UserGuide/Master/Maintenance-Tools/Maintenance-Command.html#show-all-node-information",target:"_blank",rel:"noopener noreferrer"}},[t._v("show cluster"),e("OutboundLink")],1),t._v("\ncommand on the Cli. The result is shown below:")])]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("IoTDB> show cluster\n+------+----------+-------+---------+------------+\n|NodeID|  NodeType| Status|     Host|InternalPort|\n+------+----------+-------+---------+------------+\n|     0|ConfigNode|Running|  0.0.0.0|       22277|\n|     1|  DataNode|Running|127.0.0.1|        9003|\n+------+----------+-------+---------+------------+\nTotal line number = 2\nIt costs 0.160s\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br")])]),e("h3",{attrs:{id:"_4-prepare-the-expanding-environment"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-prepare-the-expanding-environment"}},[t._v("#")]),t._v(" 4. Prepare the Expanding Environment")]),t._v(" "),e("p",[t._v("Unzip the apache-iotdb-0.14.0-preview1-all-bin.zip file to cluster1 and cluster2 folder.")]),t._v(" "),e("h3",{attrs:{id:"_5-modify-the-node-configuration-file"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-modify-the-node-configuration-file"}},[t._v("#")]),t._v(" 5. Modify the Node Configuration file")]),t._v(" "),e("p",[t._v("For folder cluster1:")]),t._v(" "),e("ul",[e("li",[t._v("Modify ConfigNode address:")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[e("strong",[t._v("configuration item")])]),t._v(" "),e("th",[e("strong",[t._v("value")])])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("internal_address")]),t._v(" "),e("td",[t._v("0.0.0.0")])]),t._v(" "),e("tr",[e("td",[t._v("internal_port")]),t._v(" "),e("td",[t._v("22279")])]),t._v(" "),e("tr",[e("td",[t._v("consensus_port")]),t._v(" "),e("td",[t._v("22280")])]),t._v(" "),e("tr",[e("td",[t._v("target_config_nodes")]),t._v(" "),e("td",[t._v("0.0.0.0:22277")])])])]),t._v(" "),e("ul",[e("li",[t._v("Modify DataNode address:")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[e("strong",[t._v("configuration item")])]),t._v(" "),e("th",[e("strong",[t._v("value")])])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("rpc_address")]),t._v(" "),e("td",[t._v("0.0.0.0")])]),t._v(" "),e("tr",[e("td",[t._v("rpc_port")]),t._v(" "),e("td",[t._v("6668")])]),t._v(" "),e("tr",[e("td",[t._v("internal_address")]),t._v(" "),e("td",[t._v("127.0.0.1")])]),t._v(" "),e("tr",[e("td",[t._v("internal_port")]),t._v(" "),e("td",[t._v("9004")])]),t._v(" "),e("tr",[e("td",[t._v("mpp_data_exchange_port")]),t._v(" "),e("td",[t._v("8778")])]),t._v(" "),e("tr",[e("td",[t._v("data_region_consensus_port")]),t._v(" "),e("td",[t._v("40011")])]),t._v(" "),e("tr",[e("td",[t._v("schema_region_consensus_port")]),t._v(" "),e("td",[t._v("50011")])]),t._v(" "),e("tr",[e("td",[t._v("target_config_nodes")]),t._v(" "),e("td",[t._v("127.0.0.1:22277")])])])]),t._v(" "),e("p",[t._v("For folder cluster1:")]),t._v(" "),e("ul",[e("li",[t._v("Modify ConfigNode address:")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[e("strong",[t._v("configuration item")])]),t._v(" "),e("th",[e("strong",[t._v("value")])])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("internal_address")]),t._v(" "),e("td",[t._v("0.0.0.0")])]),t._v(" "),e("tr",[e("td",[t._v("internal_port")]),t._v(" "),e("td",[t._v("22281")])]),t._v(" "),e("tr",[e("td",[t._v("consensus_port")]),t._v(" "),e("td",[t._v("22282")])]),t._v(" "),e("tr",[e("td",[t._v("target_config_nodes")]),t._v(" "),e("td",[t._v("0.0.0.0:22277")])])])]),t._v(" "),e("ul",[e("li",[t._v("Modify DataNode address:")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[e("strong",[t._v("configuration item")])]),t._v(" "),e("th",[e("strong",[t._v("value")])])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("rpc_address")]),t._v(" "),e("td",[t._v("0.0.0.0")])]),t._v(" "),e("tr",[e("td",[t._v("rpc_port")]),t._v(" "),e("td",[t._v("6669")])]),t._v(" "),e("tr",[e("td",[t._v("internal_address")]),t._v(" "),e("td",[t._v("127.0.0.1")])]),t._v(" "),e("tr",[e("td",[t._v("internal_port")]),t._v(" "),e("td",[t._v("9005")])]),t._v(" "),e("tr",[e("td",[t._v("mpp_data_exchange_port")]),t._v(" "),e("td",[t._v("8779")])]),t._v(" "),e("tr",[e("td",[t._v("data_region_consensus_port")]),t._v(" "),e("td",[t._v("40012")])]),t._v(" "),e("tr",[e("td",[t._v("schema_region_consensus_port")]),t._v(" "),e("td",[t._v("50012")])]),t._v(" "),e("tr",[e("td",[t._v("target_config_nodes")]),t._v(" "),e("td",[t._v("127.0.0.1:22277")])])])]),t._v(" "),e("h3",{attrs:{id:"_6-expanding-the-cluster"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_6-expanding-the-cluster"}},[t._v("#")]),t._v(" 6. Expanding the Cluster")]),t._v(" "),e("p",[t._v("Expanding the Cluster to three ConfigNode and three DataNode(3C3D).\nThe following commands can be executed in no particular order.")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("./cluster1/confignode/sbin/start-confignode.sh\n./cluster1/datanode/sbin/start-datanode.sh\n./cluster2/confignode/sbin/start-confignode.sh\n./cluster2/datanode/sbin/start-datanode.sh\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br")])]),e("h3",{attrs:{id:"_7-verify-cluster-expansion"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_7-verify-cluster-expansion"}},[t._v("#")]),t._v(" 7. Verify Cluster expansion")]),t._v(" "),e("p",[t._v("Execute the show cluster command, the result is shown below:")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("IoTDB> show cluster\n+------+----------+-------+---------+------------+\n|NodeID|  NodeType| Status|     Host|InternalPort|\n+------+----------+-------+---------+------------+\n|     0|ConfigNode|Running|  0.0.0.0|       22277|\n|     2|ConfigNode|Running|  0.0.0.0|       22279|\n|     3|ConfigNode|Running|  0.0.0.0|       22281|\n|     1|  DataNode|Running|127.0.0.1|        9003|\n|     4|  DataNode|Running|127.0.0.1|        9004|\n|     5|  DataNode|Running|127.0.0.1|        9005|\n+------+----------+-------+---------+------------+\nTotal line number = 6\nIt costs 0.012s\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br"),e("span",{staticClass:"line-number"},[t._v("12")]),e("br"),e("span",{staticClass:"line-number"},[t._v("13")]),e("br")])]),e("h3",{attrs:{id:"_8-shrinking-the-cluster"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_8-shrinking-the-cluster"}},[t._v("#")]),t._v(" 8. Shrinking the Cluster")]),t._v(" "),e("ul",[e("li",[t._v("Remove a ConfigNode:")])]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("./cluster0/confignode/sbin/remove-confignode.sh -r 0.0.0.0:22279\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("ul",[e("li",[t._v("Remove a DataNode:")])]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("./cluster0/datanode/sbin/remove-datanode.sh 127.0.0.1:6668\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("h3",{attrs:{id:"_9-verify-cluster-shrinkage"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_9-verify-cluster-shrinkage"}},[t._v("#")]),t._v(" 9. Verify Cluster shrinkage")]),t._v(" "),e("p",[t._v("Execute the show cluster command, the result is shown below:")]),t._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("IoTDB> show cluster\n+------+----------+-------+---------+------------+\n|NodeID|  NodeType| Status|     Host|InternalPort|\n+------+----------+-------+---------+------------+\n|     0|ConfigNode|Running|  0.0.0.0|       22277|\n|     3|ConfigNode|Running|  0.0.0.0|       22281|\n|     1|  DataNode|Running|127.0.0.1|        9003|\n|     5|  DataNode|Running|127.0.0.1|        9005|\n+------+----------+-------+---------+------------+\nTotal line number = 4\nIt costs 0.007s\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br"),e("span",{staticClass:"line-number"},[t._v("6")]),e("br"),e("span",{staticClass:"line-number"},[t._v("7")]),e("br"),e("span",{staticClass:"line-number"},[t._v("8")]),e("br"),e("span",{staticClass:"line-number"},[t._v("9")]),e("br"),e("span",{staticClass:"line-number"},[t._v("10")]),e("br"),e("span",{staticClass:"line-number"},[t._v("11")]),e("br")])])])}),[],!1,null,null,null);e.default=n.exports}}]);