(window.webpackJsonp=window.webpackJsonp||[]).push([[139],{543:function(e,s,t){"use strict";t.r(s);var a=t(29),n=Object(a.a)({},(function(){var e=this,s=e._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"programming-tsfile-api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#programming-tsfile-api"}},[e._v("#")]),e._v(" Programming - TsFile API")]),e._v(" "),s("p",[e._v("TsFile is a file format of Time Series we used in IoTDB. In this section, we would like to introduce the usage of this file format.")]),e._v(" "),s("h2",{attrs:{id:"tsfile-library-installation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tsfile-library-installation"}},[e._v("#")]),e._v(" TsFile library Installation")]),e._v(" "),s("p",[e._v("There are two ways to use TsFile in your own project.")]),e._v(" "),s("ul",[s("li",[s("p",[e._v("Using as jars:")]),e._v(" "),s("ul",[s("li",[s("p",[e._v("Compile the source codes and build to jars")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("git clone https://github.com/apache/incubator-iotdb.git\ncd tsfile/\nmvn clean package -Dmaven.test.skip=true\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br")])]),s("p",[e._v("Then, all the jars can be get in folder named "),s("code",[e._v("target/")]),e._v(". Import "),s("code",[e._v("target/tsfile-0.10.1-jar-with-dependencies.jar")]),e._v(" to your project.")])])])]),e._v(" "),s("li",[s("p",[e._v("Using as a maven dependency:")]),e._v(" "),s("p",[e._v("Compile source codes and deploy to your local repository in three steps:")]),e._v(" "),s("ul",[s("li",[s("p",[e._v("Get the source codes")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("git clone https://github.com/apache/incubator-iotdb.git\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])])]),e._v(" "),s("li",[s("p",[e._v("Compile the source codes and deploy")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("cd tsfile/\nmvn clean install -Dmaven.test.skip=true\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br")])])]),e._v(" "),s("li",[s("p",[e._v("add dependencies into your project:")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v(" <dependency>\n   <groupId>org.apache.iotdb</groupId>\n   <artifactId>tsfile</artifactId>\n   <version>0.10.1</version>\n </dependency>\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br")])])])]),e._v(" "),s("p",[e._v("Or, you can download the dependencies from official Maven repository:")]),e._v(" "),s("ul",[s("li",[s("p",[e._v("First, find your maven "),s("code",[e._v("settings.xml")]),e._v(" on path: "),s("code",[e._v("${username}\\.m2\\settings.xml")]),e._v("\n, add this "),s("code",[e._v("<profile>")]),e._v(" to "),s("code",[e._v("<profiles>")]),e._v(":")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("  <profile>\n       <id>allow-snapshots</id>\n          <activation><activeByDefault>true</activeByDefault></activation>\n       <repositories>\n         <repository>  \n            <id>apache.snapshots</id>\n            <name>Apache Development Snapshot Repository</name>\n            <url>https://repository.apache.org/content/repositories/snapshots/</url>\n            <releases>\n                <enabled>false</enabled>\n            </releases>\n            <snapshots>\n                <enabled>true</enabled>\n            </snapshots>\n          </repository>\n       </repositories>\n     </profile>\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br"),s("span",{staticClass:"line-number"},[e._v("13")]),s("br"),s("span",{staticClass:"line-number"},[e._v("14")]),s("br"),s("span",{staticClass:"line-number"},[e._v("15")]),s("br"),s("span",{staticClass:"line-number"},[e._v("16")]),s("br"),s("span",{staticClass:"line-number"},[e._v("17")]),s("br")])])]),e._v(" "),s("li",[s("p",[e._v("Then add dependencies into your project:")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v(" <dependency>\n   <groupId>org.apache.iotdb</groupId>\n   <artifactId>tsfile</artifactId>\n   <version>0.10.1</version>\n </dependency>\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br")])])])])])]),e._v(" "),s("h2",{attrs:{id:"tsfile-usage"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tsfile-usage"}},[e._v("#")]),e._v(" TSFile Usage")]),e._v(" "),s("p",[e._v("This section demonstrates the detailed usages of TsFile.")]),e._v(" "),s("h3",{attrs:{id:"time-series-data"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#time-series-data"}},[e._v("#")]),e._v(" Time-series Data")]),e._v(" "),s("p",[e._v("A time-series is considered as a sequence of quadruples. A quadruple is defined as (device, measurement, time, value).")]),e._v(" "),s("ul",[s("li",[s("p",[s("strong",[e._v("measurement")]),e._v(": A physical or formal measurement that a time-series is taking, e.g., the temperature of a city, the\nsales number of some goods or the speed of a train at different times. As a traditional sensor (like a thermometer) also\ntakes a single measurement and produce a time-series, we will use measurement and sensor interchangeably below.")])]),e._v(" "),s("li",[s("p",[s("strong",[e._v("device")]),e._v(": A device refers to an entity that is taking several measurements (producing multiple time-series), e.g.,\na running train monitors its speed, oil meter, miles it has run, current passengers each is conveyed to a time-series.")])])]),e._v(" "),s("p",[e._v('Table 1 illustrates a set of time-series data. The set showed in the following table contains one device named "device_1"\nwith three measurements named "sensor_1", "sensor_2" and "sensor_3".')]),e._v(" "),s("center",[s("table",{staticStyle:{"text-align":"center"}},[s("tr",[s("th",{attrs:{colspan:"6"}},[e._v("device_1")])]),e._v(" "),s("tr",[s("th",{attrs:{colspan:"2"}},[e._v("sensor_1")]),s("th",{attrs:{colspan:"2"}},[e._v("sensor_2")]),s("th",{attrs:{colspan:"2"}},[e._v("sensor_3")])]),e._v(" "),s("tr",[s("th",[e._v("time")]),s("th",[e._v("value")]),s("th",[e._v("time")]),s("th",[e._v("value")]),s("th",[e._v("time")]),s("th",[e._v("value")])]),e._v(" "),s("tr",[s("td",[e._v("1")]),s("td",[e._v("1.2")]),s("td",[e._v("1")]),s("td",[e._v("20")]),s("td",[e._v("2")]),s("td",[e._v("50")])]),e._v(" "),s("tr",[s("td",[e._v("3")]),s("td",[e._v("1.4")]),s("td",[e._v("2")]),s("td",[e._v("20")]),s("td",[e._v("4")]),s("td",[e._v("51")])]),e._v(" "),s("tr",[s("td",[e._v("5")]),s("td",[e._v("1.1")]),s("td",[e._v("3")]),s("td",[e._v("21")]),s("td",[e._v("6")]),s("td",[e._v("52")])]),e._v(" "),s("tr",[s("td",[e._v("7")]),s("td",[e._v("1.8")]),s("td",[e._v("4")]),s("td",[e._v("20")]),s("td",[e._v("8")]),s("td",[e._v("53")])])]),e._v(" "),s("span",[e._v("A set of time-series data")])]),e._v(" "),s("p",[s("strong",[e._v("One Line of Data")]),e._v(": In many industrial applications, a device normally contains more than one sensor and these sensors\nmay have values at a same timestamp, which is called one line of data.")]),e._v(" "),s("p",[e._v("Formally, one line of data consists of a "),s("code",[e._v("device_id")]),e._v(", a timestamp which indicates the milliseconds since January 1,\n1970, 00:00:00, and several data pairs composed of "),s("code",[e._v("measurement_id")]),e._v(" and corresponding "),s("code",[e._v("value")]),e._v(". All data pairs in one\nline belong to this "),s("code",[e._v("device_id")]),e._v(" and have the same timestamp. If one of the "),s("code",[e._v("measurements")]),e._v(" does not have a "),s("code",[e._v("value")]),e._v("\nin the "),s("code",[e._v("timestamp")]),e._v(", use a space instead(Actually, TsFile does not store null values). Its format is shown as follow:")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("device_id, timestamp, <measurement_id, value>...\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("An example is illustrated as follow. In this example, the data type of two measurements are  "),s("code",[e._v("INT32")]),e._v(", "),s("code",[e._v("FLOAT")]),e._v(" respectively.")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("device_1, 1490860659000, m1, 10, m2, 12.12\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("h3",{attrs:{id:"writing-tsfile"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#writing-tsfile"}},[e._v("#")]),e._v(" Writing TsFile")]),e._v(" "),s("h4",{attrs:{id:"generate-a-tsfile-file"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#generate-a-tsfile-file"}},[e._v("#")]),e._v(" Generate a TsFile File.")]),e._v(" "),s("p",[e._v('A TsFile can be generated by following three steps and the complete code will be given in the section "Example for writing TsFile".')]),e._v(" "),s("ul",[s("li",[s("p",[e._v("First, construct a "),s("code",[e._v("TsFileWriter")]),e._v(" instance.")]),e._v(" "),s("p",[e._v("Here are the available constructors:")]),e._v(" "),s("ul",[s("li",[e._v("Without pre-defined schema")])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("public TsFileWriter(File file) throws IOException\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("ul",[s("li",[e._v("With pre-defined schema")])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("public TsFileWriter(File file, Schema schema) throws IOException\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("This one is for using the HDFS file system. "),s("code",[e._v("TsFileOutput")]),e._v(" can be an instance of class "),s("code",[e._v("HDFSOutput")]),e._v(".")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("public TsFileWriter(TsFileOutput output, Schema schema) throws IOException \n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("If you want to set some TSFile configuration on your own, you could use param "),s("code",[e._v("config")]),e._v(". For example:")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('TSFileConfig conf = new TSFileConfig();\nconf.setTSFileStorageFs("HDFS");\nTsFileWriter tsFileWriter = new TsFileWriter(file, schema, conf);\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br")])]),s("p",[e._v("In this example, data files will be stored in HDFS, instead of local file system. If you'd like to store data files in local file system, you can use "),s("code",[e._v('conf.setTSFileStorageFs("LOCAL")')]),e._v(", which is also the default config.")]),e._v(" "),s("p",[e._v("You can also config the ip and port of your HDFS by "),s("code",[e._v("config.setHdfsIp(...)")]),e._v(" and "),s("code",[e._v("config.setHdfsPort(...)")]),e._v(". The default ip is "),s("code",[e._v("localhost")]),e._v(" and default port is "),s("code",[e._v("9000")]),e._v(".")]),e._v(" "),s("p",[s("strong",[e._v("Parameters:")])]),e._v(" "),s("ul",[s("li",[s("p",[e._v("file : The TsFile to write")])]),e._v(" "),s("li",[s("p",[e._v("schema : The file schemas, will be introduced in next part.")])]),e._v(" "),s("li",[s("p",[e._v("config : The config of TsFile.")])])])]),e._v(" "),s("li",[s("p",[e._v("Second, add measurements")]),e._v(" "),s("p",[e._v("Or you can make an instance of class "),s("code",[e._v("Schema")]),e._v(" first and pass this to the constructor of class "),s("code",[e._v("TsFileWriter")])]),e._v(" "),s("p",[e._v("The class "),s("code",[e._v("Schema")]),e._v(" contains a map whose key is the name of one measurement schema, and the value is the schema itself.")]),e._v(" "),s("p",[e._v("Here are the interfaces:")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("// Create an empty Schema or from an existing map\npublic Schema()\npublic Schema(Map<String, MeasurementSchema> measurements)\n// Use this two interfaces to add measurements\npublic void registerMeasurement(MeasurementSchema descriptor)\npublic void registerMeasurements(Map<String, MeasurementSchema> measurements)\n// Some useful getter and checker\npublic TSDataType getMeasurementDataType(String measurementId)\npublic MeasurementSchema getMeasurementSchema(String measurementId)\npublic Map<String, MeasurementSchema> getAllMeasurementSchema()\npublic boolean hasMeasurement(String measurementId)\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br")])]),s("p",[e._v("You can always use the following interface in "),s("code",[e._v("TsFileWriter")]),e._v(" class to add additional measurements:\n​")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("public void addMeasurement(MeasurementSchema measurementSchema) throws WriteProcessException\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("The class "),s("code",[e._v("MeasurementSchema")]),e._v(" contains the information of one measurement, there are several constructors:")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("public MeasurementSchema(String measurementId, TSDataType type, TSEncoding encoding)\npublic MeasurementSchema(String measurementId, TSDataType type, TSEncoding encoding, CompressionType compressionType)\npublic MeasurementSchema(String measurementId, TSDataType type, TSEncoding encoding, CompressionType compressionType, \nMap<String, String> props)\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br")])]),s("p",[s("strong",[e._v("Parameters:")]),e._v("\n​")]),e._v(" "),s("ul",[s("li",[s("p",[e._v("measurementID: The name of this measurement, typically the name of the sensor.")])]),e._v(" "),s("li",[s("p",[e._v("type: The data type, now support six types: "),s("code",[e._v("BOOLEAN")]),e._v(", "),s("code",[e._v("INT32")]),e._v(", "),s("code",[e._v("INT64")]),e._v(", "),s("code",[e._v("FLOAT")]),e._v(", "),s("code",[e._v("DOUBLE")]),e._v(", "),s("code",[e._v("TEXT")]),e._v(";")])]),e._v(" "),s("li",[s("p",[e._v("encoding: The data encoding. See "),s("RouterLink",{attrs:{to:"/UserGuide/V0.10.x/Concept/Encoding.html"}},[e._v("Chapter 2-3")]),e._v(".")],1)]),e._v(" "),s("li",[s("p",[e._v("compression: The data compression. Now supports "),s("code",[e._v("UNCOMPRESSED")]),e._v(" and "),s("code",[e._v("SNAPPY")]),e._v(".")])]),e._v(" "),s("li",[s("p",[e._v("props: Properties for special data types.Such as "),s("code",[e._v("max_point_number")]),e._v(" for "),s("code",[e._v("FLOAT")]),e._v(" and "),s("code",[e._v("DOUBLE")]),e._v(", "),s("code",[e._v("max_string_length")]),e._v(" for\n"),s("code",[e._v("TEXT")]),e._v('. Use as string pairs into a map such as ("max_point_number", "3").')])])]),e._v(" "),s("blockquote",[s("p",[s("strong",[e._v("Notice:")]),e._v(" Although one measurement name can be used in multiple deltaObjects, the properties cannot be changed. I.e.\nit's not allowed to add one measurement name for multiple times with different type or encoding.\nHere is a bad example:")])]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[e._v('  // The measurement "sensor_1" is float type\n  addMeasurement(new MeasurementSchema("sensor_1", TSDataType.FLOAT, TSEncoding.RLE));\n  \n  // This call will throw a WriteProcessException exception\n  addMeasurement(new MeasurementSchema("sensor_1", TSDataType.INT32, TSEncoding.RLE));\n')])])])]),e._v(" "),s("li",[s("p",[e._v("Third, insert and write data continually.")]),e._v(" "),s("p",[e._v("Use this interface to create a new "),s("code",[e._v("TSRecord")]),e._v("(a timestamp and device pair).")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("public TSRecord(long timestamp, String deviceId)\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("Then create a "),s("code",[e._v("DataPoint")]),e._v("(a measurement and value pair), and use the addTuple method to add the DataPoint to the correct\nTsRecord.")]),e._v(" "),s("p",[e._v("Use this method to write")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("public void write(TSRecord record) throws IOException, WriteProcessException\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])])]),e._v(" "),s("li",[s("p",[e._v("Finally, call "),s("code",[e._v("close")]),e._v(" to finish this writing process.")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("public void close() throws IOException\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])])])]),e._v(" "),s("p",[e._v("We are also able to write data into a closed TsFile.")]),e._v(" "),s("ul",[s("li",[e._v("Use "),s("code",[e._v("ForceAppendTsFileWriter")]),e._v(" to open a closed file.")])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("public ForceAppendTsFileWriter(File file) throws IOException\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("ul",[s("li",[s("p",[e._v("call "),s("code",[e._v("doTruncate")]),e._v(" truncate the part of Metadata")])]),e._v(" "),s("li",[s("p",[e._v("Then use "),s("code",[e._v("ForceAppendTsFileWriter")]),e._v(" to construct a new "),s("code",[e._v("TsFileWriter")])])])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("public TsFileWriter(TsFileIOWriter fileWriter) throws IOException\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("Please note, we should redo the step of adding measurements before writing new data to the TsFile.")]),e._v(" "),s("h4",{attrs:{id:"example-for-writing-a-tsfile"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#example-for-writing-a-tsfile"}},[e._v("#")]),e._v(" Example for writing a TsFile")]),e._v(" "),s("p",[e._v("You should install TsFile to your local maven repository.")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("mvn clean install -pl tsfile -am -DskipTests\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("You could write a TsFile by constructing "),s("strong",[e._v("TSRecord")]),e._v(" if you have the "),s("strong",[e._v("non-aligned")]),e._v(" (e.g. not all sensors contain values) time series data.")]),e._v(" "),s("p",[e._v("A more thorough example can be found at "),s("code",[e._v("/example/tsfile/src/main/java/org/apache/iotdb/tsfile/TsFileWriteWithTSRecord.java")])]),e._v(" "),s("p",[e._v("You could write a TsFile by constructing "),s("strong",[e._v("Tablet")]),e._v(" if you have the "),s("strong",[e._v("aligned")]),e._v(" time series data.")]),e._v(" "),s("p",[e._v("A more thorough example can be found at "),s("code",[e._v("/example/tsfile/src/main/java/org/apache/iotdb/tsfile/TsFileWriteWithTablet.java")])]),e._v(" "),s("p",[e._v("You could write data into a closed TsFile by using "),s("strong",[e._v("ForceAppendTsFileWriter")]),e._v(".")]),e._v(" "),s("p",[e._v("A more thorough example can be found at "),s("code",[e._v("/example/tsfile/src/main/java/org/apache/iotdb/tsfile/TsFileForceAppendWrite.java")])]),e._v(" "),s("h3",{attrs:{id:"interface-for-reading-tsfile"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#interface-for-reading-tsfile"}},[e._v("#")]),e._v(" Interface for Reading TsFile")]),e._v(" "),s("h4",{attrs:{id:"before-the-start"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#before-the-start"}},[e._v("#")]),e._v(" Before the Start")]),e._v(" "),s("p",[e._v('The set of time-series data in section "Time-series Data" is used here for a concrete introduction in this section. The set showed in the following table contains one deltaObject named "device_1" with three measurements named "sensor_1", "sensor_2" and "sensor_3". And the measurements has been simplified to do a simple illustration, which contains only 4 time-value pairs each.')]),e._v(" "),s("center",[s("table",{staticStyle:{"text-align":"center"}},[s("tr",[s("th",{attrs:{colspan:"6"}},[e._v("device_1")])]),e._v(" "),s("tr",[s("th",{attrs:{colspan:"2"}},[e._v("sensor_1")]),s("th",{attrs:{colspan:"2"}},[e._v("sensor_2")]),s("th",{attrs:{colspan:"2"}},[e._v("sensor_3")])]),e._v(" "),s("tr",[s("th",[e._v("time")]),s("th",[e._v("value")]),s("th",[e._v("time")]),s("th",[e._v("value")]),s("th",[e._v("time")]),s("th",[e._v("value")])]),e._v(" "),s("tr",[s("td",[e._v("1")]),s("td",[e._v("1.2")]),s("td",[e._v("1")]),s("td",[e._v("20")]),s("td",[e._v("2")]),s("td",[e._v("50")])]),e._v(" "),s("tr",[s("td",[e._v("3")]),s("td",[e._v("1.4")]),s("td",[e._v("2")]),s("td",[e._v("20")]),s("td",[e._v("4")]),s("td",[e._v("51")])]),e._v(" "),s("tr",[s("td",[e._v("5")]),s("td",[e._v("1.1")]),s("td",[e._v("3")]),s("td",[e._v("21")]),s("td",[e._v("6")]),s("td",[e._v("52")])]),e._v(" "),s("tr",[s("td",[e._v("7")]),s("td",[e._v("1.8")]),s("td",[e._v("4")]),s("td",[e._v("20")]),s("td",[e._v("8")]),s("td",[e._v("53")])])]),e._v(" "),s("span",[e._v("A set of time-series data")])]),e._v(" "),s("h4",{attrs:{id:"definition-of-path"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#definition-of-path"}},[e._v("#")]),e._v(" Definition of Path")]),e._v(" "),s("p",[e._v('A path is a dot-separated string which uniquely identifies a time-series in TsFile, e.g., "root.area_1.device_1.sensor_1".\nThe last section "sensor_1" is called "measurementId" while the remaining parts "root.area_1.device_1" is called deviceId.\nAs mentioned above, the same measurement in different devices has the same data type and encoding, and devices are also unique.')]),e._v(" "),s("p",[e._v("In read interfaces, The parameter "),s("code",[e._v("paths")]),e._v(" indicates the measurements to be selected.")]),e._v(" "),s("p",[e._v("Path instance can be easily constructed through the class "),s("code",[e._v("Path")]),e._v(". For example:")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('Path p = new Path("device_1.sensor_1");\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("We will pass an ArrayList of paths for final query call to support multiple paths.")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('List<Path> paths = new ArrayList<Path>();\npaths.add(new Path("device_1.sensor_1"));\npaths.add(new Path("device_1.sensor_3"));\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br")])]),s("blockquote",[s("p",[s("strong",[e._v("Notice:")]),e._v(" When constructing a Path, the format of the parameter should be a dot-separated string, the last part will\nbe recognized as measurementId while the remaining parts will be recognized as deviceId.")])]),e._v(" "),s("h4",{attrs:{id:"definition-of-filter"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#definition-of-filter"}},[e._v("#")]),e._v(" Definition of Filter")]),e._v(" "),s("h5",{attrs:{id:"usage-scenario"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#usage-scenario"}},[e._v("#")]),e._v(" Usage Scenario")]),e._v(" "),s("p",[e._v("Filter is used in TsFile reading process to select data satisfying one or more given condition(s).")]),e._v(" "),s("h4",{attrs:{id:"iexpression"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#iexpression"}},[e._v("#")]),e._v(" IExpression")]),e._v(" "),s("p",[e._v("The "),s("code",[e._v("IExpression")]),e._v(" is a filter expression interface and it will be passed to our final query call.\nWe create one or more filter expressions and may use binary filter operators to link them to our final expression.")]),e._v(" "),s("ul",[s("li",[s("p",[s("strong",[e._v("Create a Filter Expression")])]),e._v(" "),s("p",[e._v("There are two types of filters.")]),e._v(" "),s("ul",[s("li",[s("p",[e._v("TimeFilter: A filter for "),s("code",[e._v("time")]),e._v(" in time-series data.")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("IExpression timeFilterExpr = new GlobalTimeExpression(TimeFilter);\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("Use the following relationships to get a "),s("code",[e._v("TimeFilter")]),e._v(" object (value is a long int variable).\n"),s("center",[s("table",{staticStyle:{"text-align":"center"}},[s("tr",[s("th",[e._v("Relationship")]),s("th",[e._v("Description")])]),e._v(" "),s("tr",[s("td",[e._v("TimeFilter.eq(value)")]),s("td",[e._v("Choose the time equal to the value")])]),e._v(" "),s("tr",[s("td",[e._v("TimeFilter.lt(value)")]),s("td",[e._v("Choose the time less than the value")])]),e._v(" "),s("tr",[s("td",[e._v("TimeFilter.gt(value)")]),s("td",[e._v("Choose the time greater than the value")])]),e._v(" "),s("tr",[s("td",[e._v("TimeFilter.ltEq(value)")]),s("td",[e._v("Choose the time less than or equal to the value")])]),e._v(" "),s("tr",[s("td",[e._v("TimeFilter.gtEq(value)")]),s("td",[e._v("Choose the time greater than or equal to the value")])]),e._v(" "),s("tr",[s("td",[e._v("TimeFilter.notEq(value)")]),s("td",[e._v("Choose the time not equal to the value")])]),e._v(" "),s("tr",[s("td",[e._v("TimeFilter.not(TimeFilter)")]),s("td",[e._v("Choose the time not satisfy another TimeFilter")])])])])],1)]),e._v(" "),s("li",[s("p",[e._v("ValueFilter: A filter for "),s("code",[e._v("value")]),e._v(" in time-series data.")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("IExpression valueFilterExpr = new SingleSeriesExpression(Path, ValueFilter);\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("The usage of  "),s("code",[e._v("ValueFilter")]),e._v(" is the same as using "),s("code",[e._v("TimeFilter")]),e._v(", just to make sure that the type of the value\nequal to the measurement's(defined in the path).")])])])]),e._v(" "),s("li",[s("p",[s("strong",[e._v("Binary Filter Operators")])]),e._v(" "),s("p",[e._v("Binary filter operators can be used to link two single expressions.")]),e._v(" "),s("ul",[s("li",[e._v("BinaryExpression.and(Expression, Expression): Choose the value satisfy for both expressions.")]),e._v(" "),s("li",[e._v("BinaryExpression.or(Expression, Expression): Choose the value satisfy for at least one expression.")])])])]),e._v(" "),s("h5",{attrs:{id:"filter-expression-examples"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#filter-expression-examples"}},[e._v("#")]),e._v(" Filter Expression Examples")]),e._v(" "),s("ul",[s("li",[s("p",[s("strong",[e._v("TimeFilterExpression Examples")])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("IExpression timeFilterExpr = new GlobalTimeExpression(TimeFilter.eq(15)); // series time = 15\n\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br")])]),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("IExpression timeFilterExpr = new GlobalTimeExpression(TimeFilter.ltEq(15)); // series time <= 15\n\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br")])]),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("IExpression timeFilterExpr = new GlobalTimeExpression(TimeFilter.lt(15)); // series time < 15\n\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br")])]),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("IExpression timeFilterExpr = new GlobalTimeExpression(TimeFilter.gtEq(15)); // series time >= 15\n\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br")])]),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("IExpression timeFilterExpr = new GlobalTimeExpression(TimeFilter.notEq(15)); // series time != 15\n\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br")])]),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("IExpression timeFilterExpr = BinaryExpression.and(new GlobalTimeExpression(TimeFilter.gtEq(15L)),\n                                         new GlobalTimeExpression(TimeFilter.lt(25L))); // 15 <= series time < 25\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br")])]),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("IExpression timeFilterExpr = BinaryExpression.or(new GlobalTimeExpression(TimeFilter.gtEq(15L)),\n                                         new GlobalTimeExpression(TimeFilter.lt(25L))); // series time >= 15 or series time < 25\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br")])])])]),e._v(" "),s("h4",{attrs:{id:"read-interface"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#read-interface"}},[e._v("#")]),e._v(" Read Interface")]),e._v(" "),s("p",[e._v("First, we open the TsFile and get a "),s("code",[e._v("ReadOnlyTsFile")]),e._v(" instance from a file path string "),s("code",[e._v("path")]),e._v(".")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("TsFileSequenceReader reader = new TsFileSequenceReader(path);\n   \nReadOnlyTsFile readTsFile = new ReadOnlyTsFile(reader);\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br")])]),s("p",[e._v("Next, we prepare the path array and query expression, then get final "),s("code",[e._v("QueryExpression")]),e._v(" object by this interface:")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("QueryExpression queryExpression = QueryExpression.create(paths, statement);\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("The ReadOnlyTsFile class has two "),s("code",[e._v("query")]),e._v(" method to perform a query.")]),e._v(" "),s("ul",[s("li",[s("p",[s("strong",[e._v("Method 1")])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("public QueryDataSet query(QueryExpression queryExpression) throws IOException\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])])]),e._v(" "),s("li",[s("p",[s("strong",[e._v("Method 2")])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("public QueryDataSet query(QueryExpression queryExpression, long partitionStartOffset, long partitionEndOffset) throws IOException\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("This method is designed for advanced applications such as the TsFile-Spark Connector.")]),e._v(" "),s("ul",[s("li",[s("p",[s("strong",[e._v("params")]),e._v(" : For method 2, two additional parameters are added to support partial query:")]),e._v(" "),s("ul",[s("li",[s("code",[e._v("partitionStartOffset")]),e._v(": start offset for a TsFile")]),e._v(" "),s("li",[s("code",[e._v("partitionEndOffset")]),e._v(": end offset for a TsFile")])]),e._v(" "),s("blockquote",[s("p",[s("strong",[e._v("What is Partial Query ?")])]),e._v(" "),s("p",[e._v('In some distributed file systems(e.g. HDFS), a file is split into severval parts which are called "Blocks" and stored in different nodes. Executing a query paralleled in each nodes involved makes better efficiency. Thus Partial Query is needed. Paritial Query only selects the results stored in the part split by '),s("code",[e._v("QueryConstant.PARTITION_START_OFFSET")]),e._v(" and "),s("code",[e._v("QueryConstant.PARTITION_END_OFFSET")]),e._v(" for a TsFile.")])])])])])]),e._v(" "),s("h3",{attrs:{id:"querydataset-interface"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#querydataset-interface"}},[e._v("#")]),e._v(" QueryDataset Interface")]),e._v(" "),s("p",[e._v("The query performed above will return a "),s("code",[e._v("QueryDataset")]),e._v(" object.")]),e._v(" "),s("p",[e._v("Here's the useful interfaces for user.")]),e._v(" "),s("ul",[s("li",[s("p",[s("code",[e._v("bool hasNext();")])]),e._v(" "),s("p",[e._v("Return true if this dataset still has elements.")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("List<Path> getPaths()")])]),e._v(" "),s("p",[e._v("Get the paths in this data set.")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("List<TSDataType> getDataTypes();")])]),e._v(" "),s("p",[e._v("Get the data types. The class TSDataType is an enum class, the value will be one of the following:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[e._v(" BOOLEAN,\n INT32,\n INT64,\n FLOAT,\n DOUBLE,\n TEXT;\n")])])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("RowRecord next() throws IOException;")])]),e._v(" "),s("p",[e._v("Get the next record.")]),e._v(" "),s("p",[e._v("The class "),s("code",[e._v("RowRecord")]),e._v(" consists of a "),s("code",[e._v("long")]),e._v(" timestamp and a "),s("code",[e._v("List<Field>")]),e._v(" for data in different sensors,\nwe can use two getter methods to get them.")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("long getTimestamp();\nList<Field> getFields();\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br")])]),s("p",[e._v("To get data from one Field, use these methods:")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("TSDataType getDataType();\nObject getObjectValue();\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br")])])])]),e._v(" "),s("h4",{attrs:{id:"example-for-reading-an-existing-tsfile"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#example-for-reading-an-existing-tsfile"}},[e._v("#")]),e._v(" Example for reading an existing TsFile")]),e._v(" "),s("p",[e._v("You should install TsFile to your local maven repository.")]),e._v(" "),s("p",[e._v("A more thorough example with query statement can be found at\n"),s("code",[e._v("/tsfile/example/src/main/java/org/apache/iotdb/tsfile/TsFileRead.java")])]),e._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("package")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[e._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("iotdb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("tsfile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("import")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token import"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[e._v("java"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("io"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("IOException")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("import")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token import"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[e._v("java"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("util"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("ArrayList")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("import")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token import"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[e._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("iotdb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("tsfile"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("read"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("ReadOnlyTsFile")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("import")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token import"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[e._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("iotdb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("tsfile"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("read"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("TsFileSequenceReader")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("import")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token import"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[e._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("iotdb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("tsfile"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("read"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("common"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Path")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("import")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token import"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[e._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("iotdb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("tsfile"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("read"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("expression"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("IExpression")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("import")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token import"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[e._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("iotdb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("tsfile"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("read"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("expression"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("QueryExpression")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("import")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token import"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[e._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("iotdb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("tsfile"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("read"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("expression"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("impl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("BinaryExpression")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("import")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token import"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[e._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("iotdb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("tsfile"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("read"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("expression"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("impl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("GlobalTimeExpression")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("import")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token import"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[e._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("iotdb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("tsfile"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("read"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("expression"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("impl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("SingleSeriesExpression")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("import")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token import"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[e._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("iotdb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("tsfile"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("read"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("filter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("TimeFilter")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("import")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token import"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[e._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("iotdb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("tsfile"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("read"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("filter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("ValueFilter")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("import")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token import"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[e._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("iotdb"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("tsfile"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("read"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("query"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("dataset"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("QueryDataSet")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v('/**\n * The class is to show how to read TsFile file named "test.tsfile".\n * The TsFile file "test.tsfile" is generated from class TsFileWrite.\n * Run TsFileWrite to generate the test.tsfile first\n */')]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("public")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("class")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("TsFileRead")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("private")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("static")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("void")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("queryAndPrint")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("ArrayList")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Path")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(">")])]),e._v(" paths"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("ReadOnlyTsFile")]),e._v(" readTsFile"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("IExpression")]),e._v(" statement"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n          "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("throws")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("IOException")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("QueryExpression")]),e._v(" queryExpression "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("QueryExpression")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("create")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("paths"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" statement"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("QueryDataSet")]),e._v(" queryDataSet "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" readTsFile"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("query")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("queryExpression"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("while")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("queryDataSet"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("hasNext")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n      "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("queryDataSet"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("next")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"------------"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("public")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("static")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("void")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("throws")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("IOException")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// file path")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("String")]),e._v(" path "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"test.tsfile"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// create reader and get the readTsFile interface")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("TsFileSequenceReader")]),e._v(" reader "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("new")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("TsFileSequenceReader")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("ReadOnlyTsFile")]),e._v(" readTsFile "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("new")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("ReadOnlyTsFile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("reader"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// use these paths(all sensors) for all the queries")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("ArrayList")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Path")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(">")])]),e._v(" paths "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("new")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("ArrayList")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("<")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n    paths"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("add")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("new")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Path")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"device_1.sensor_1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n    paths"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("add")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("new")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Path")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"device_1.sensor_2"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n    paths"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("add")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("new")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Path")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"device_1.sensor_3"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// no query statement")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("queryAndPrint")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("paths"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" readTsFile"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("//close the reader when you left")]),e._v("\n    reader"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("close")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br"),s("span",{staticClass:"line-number"},[e._v("13")]),s("br"),s("span",{staticClass:"line-number"},[e._v("14")]),s("br"),s("span",{staticClass:"line-number"},[e._v("15")]),s("br"),s("span",{staticClass:"line-number"},[e._v("16")]),s("br"),s("span",{staticClass:"line-number"},[e._v("17")]),s("br"),s("span",{staticClass:"line-number"},[e._v("18")]),s("br"),s("span",{staticClass:"line-number"},[e._v("19")]),s("br"),s("span",{staticClass:"line-number"},[e._v("20")]),s("br"),s("span",{staticClass:"line-number"},[e._v("21")]),s("br"),s("span",{staticClass:"line-number"},[e._v("22")]),s("br"),s("span",{staticClass:"line-number"},[e._v("23")]),s("br"),s("span",{staticClass:"line-number"},[e._v("24")]),s("br"),s("span",{staticClass:"line-number"},[e._v("25")]),s("br"),s("span",{staticClass:"line-number"},[e._v("26")]),s("br"),s("span",{staticClass:"line-number"},[e._v("27")]),s("br"),s("span",{staticClass:"line-number"},[e._v("28")]),s("br"),s("span",{staticClass:"line-number"},[e._v("29")]),s("br"),s("span",{staticClass:"line-number"},[e._v("30")]),s("br"),s("span",{staticClass:"line-number"},[e._v("31")]),s("br"),s("span",{staticClass:"line-number"},[e._v("32")]),s("br"),s("span",{staticClass:"line-number"},[e._v("33")]),s("br"),s("span",{staticClass:"line-number"},[e._v("34")]),s("br"),s("span",{staticClass:"line-number"},[e._v("35")]),s("br"),s("span",{staticClass:"line-number"},[e._v("36")]),s("br"),s("span",{staticClass:"line-number"},[e._v("37")]),s("br"),s("span",{staticClass:"line-number"},[e._v("38")]),s("br"),s("span",{staticClass:"line-number"},[e._v("39")]),s("br"),s("span",{staticClass:"line-number"},[e._v("40")]),s("br"),s("span",{staticClass:"line-number"},[e._v("41")]),s("br"),s("span",{staticClass:"line-number"},[e._v("42")]),s("br"),s("span",{staticClass:"line-number"},[e._v("43")]),s("br"),s("span",{staticClass:"line-number"},[e._v("44")]),s("br"),s("span",{staticClass:"line-number"},[e._v("45")]),s("br"),s("span",{staticClass:"line-number"},[e._v("46")]),s("br"),s("span",{staticClass:"line-number"},[e._v("47")]),s("br"),s("span",{staticClass:"line-number"},[e._v("48")]),s("br"),s("span",{staticClass:"line-number"},[e._v("49")]),s("br"),s("span",{staticClass:"line-number"},[e._v("50")]),s("br"),s("span",{staticClass:"line-number"},[e._v("51")]),s("br"),s("span",{staticClass:"line-number"},[e._v("52")]),s("br"),s("span",{staticClass:"line-number"},[e._v("53")]),s("br")])]),s("h2",{attrs:{id:"change-tsfile-configuration"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#change-tsfile-configuration"}},[e._v("#")]),e._v(" Change TsFile Configuration")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("TSFileConfig config = TSFileDescriptor.getInstance().getConfig();\nconfig.setXXX();\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br")])])],1)}),[],!1,null,null,null);s.default=n.exports}}]);