(window.webpackJsonp=window.webpackJsonp||[]).push([[354],{917:function(s,t,e){"use strict";e.r(t);var a=e(68),r=Object(a.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"csv-工具"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#csv-工具"}},[s._v("#")]),s._v(" CSV 工具")]),s._v(" "),e("p",[s._v("Csv工具是您可以导入csv文件到IoTDB或从IoTDB导出csv文件。")]),s._v(" "),e("h2",{attrs:{id:"使用-import-csv-sh"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用-import-csv-sh"}},[s._v("#")]),s._v(" 使用 import-csv.sh")]),s._v(" "),e("h3",{attrs:{id:"创建元数据-可选"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建元数据-可选"}},[s._v("#")]),s._v(" 创建元数据（可选）")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SET STORAGE GROUP TO root.fit.d1;\nSET STORAGE GROUP TO root.fit.d2;\nSET STORAGE GROUP TO root.fit.p;\nCREATE TIMESERIES root.fit.d1.s1 WITH DATATYPE=INT32,ENCODING=RLE;\nCREATE TIMESERIES root.fit.d1.s2 WITH DATATYPE=TEXT,ENCODING=PLAIN;\nCREATE TIMESERIES root.fit.d2.s1 WITH DATATYPE=INT32,ENCODING=RLE;\nCREATE TIMESERIES root.fit.d2.s3 WITH DATATYPE=INT32,ENCODING=RLE;\nCREATE TIMESERIES root.fit.p.s1 WITH DATATYPE=INT32,ENCODING=RLE;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("p",[s._v("IoTDB具有类型推断的能力，因此在数据导入前创建元数据不是必须的。但我们仍然推荐在使用CSV导入工具导入数据前创建元数据，因为这可以避免不必要的类型转换错误。")]),s._v(" "),e("h3",{attrs:{id:"从-csv-文件导入数据的示例"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#从-csv-文件导入数据的示例"}},[s._v("#")]),s._v(" 从 csv 文件导入数据的示例")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('Time,root.fit.d1.s1,root.fit.d1.s2,root.fit.d2.s1,root.fit.d2.s3,root.fit.p.s1\n1,100,hello,200,300,400\n2,500,world,600,700,800\n3,900,"hello, \\"world\\"",1000,1100,1200\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("blockquote",[e("p",[s._v("注意，在导入数据前，需要特殊处理下列的字符：")]),s._v(" "),e("ol",[e("li",[e("code",[s._v(",")]),s._v(" : 包含"),e("code",[s._v(",")]),s._v("的字段需要使用单引号或者双引号括起来")]),s._v(" "),e("li",[e("code",[s._v('"')]),s._v(' : "字段中的'),e("code",[s._v('"')]),s._v("需要被替换成转义字符"),e("code",[s._v('\\"')]),s._v("或者用"),e("code",[s._v("\\'")]),s._v("将字段括起来。")]),s._v(" "),e("li",[e("code",[s._v("'")]),s._v(' : "字段中的'),e("code",[s._v("'")]),s._v("需要被替换成转义字符"),e("code",[s._v("\\'")]),s._v("或者用"),e("code",[s._v('\\"')]),s._v("将字段括起来。")])])]),s._v(" "),e("h3",{attrs:{id:"运行-import-shell"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#运行-import-shell"}},[s._v("#")]),s._v(" 运行 import shell")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# Unix/OS X\n> tools/import-csv.sh -h <ip> -p <port> -u <username> -pw <password> -f <xxx.csv>\n\n# Windows\n> tools\\import-csv.bat -h <ip> -p <port> -u <username> -pw <password> -f <xxx.csv>\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("h2",{attrs:{id:"使用-export-csv-sh"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用-export-csv-sh"}},[s._v("#")]),s._v(" 使用 export-csv.sh")]),s._v(" "),e("h3",{attrs:{id:"运行-export-shell"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#运行-export-shell"}},[s._v("#")]),s._v(" 运行 export shell")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# Unix/OS X\n> tools/export-csv.sh -h <ip> -p <port> -u <username> -pw <password> -td <directory> [-tf <time-format> -s <sqlfile>]\n\n# Windows\n> tools\\export-csv.bat -h <ip> -p <port> -u <username> -pw <password> -td <directory> [-tf <time-format> -s <sqlfile>]\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v("在运行导出脚本之后，您需要输入一些查询或指定一些sql文件。如果在一个sql文件中有多个sql, sql应该被换行符分割。")]),s._v(" "),e("p",[s._v("一个sql文件例子")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("select * from root.fit.d1\nselect * from root.sg1.d1\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("blockquote",[e("p",[s._v("注意，如果导出字段存在如下特殊字符：")]),s._v(" "),e("ol",[e("li",[e("code",[s._v(",")]),s._v(" : 整个字段会被用"),e("code",[s._v('"')]),s._v("括起来。")]),s._v(" "),e("li",[e("code",[s._v('"')]),s._v(" : 整个字段会被用"),e("code",[s._v('"')]),s._v("括起来且"),e("code",[s._v('"')]),s._v("会被替换为"),e("code",[s._v('\\"')]),s._v("。")])])])])}),[],!1,null,null,null);t.default=r.exports}}]);