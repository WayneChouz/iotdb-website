(window.webpackJsonp=window.webpackJsonp||[]).push([[987],{1396:function(e,_,t){"use strict";t.r(_);var v=t(19),a=Object(v.a)({},(function(){var e=this,_=e._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[_("p",[e._v("在 IoTDB 的运行过程中，我们希望对 IoTDB 的状态进行观测，以便于排查系统问题或者及时发现系统潜在的风险，能够**反映系统运行状态的一系列指标\n**就是系统监控指标。")]),e._v(" "),_("h2",{attrs:{id:"_1-什么场景下会使用到监控"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_1-什么场景下会使用到监控"}},[e._v("#")]),e._v(" 1. 什么场景下会使用到监控?")]),e._v(" "),_("p",[e._v("那么什么时候会用到监控框架呢？下面列举一些常见的场景。")]),e._v(" "),_("ol",[_("li",[_("p",[e._v("系统变慢了")]),e._v(" "),_("p",[e._v("系统变慢几乎是最常见也最头疼的问题，这时候我们需要尽可能多的信息来帮助我们找到系统变慢的原因，比如：")]),e._v(" "),_("ul",[_("li",[e._v("JVM信息：是不是有FGC？GC耗时多少？GC后内存有没有恢复？是不是有大量的线程？")]),e._v(" "),_("li",[e._v("系统信息：CPU使用率是不是太高了？磁盘IO是不是很频繁？")]),e._v(" "),_("li",[e._v("连接数：当前连接是不是太多？")]),e._v(" "),_("li",[e._v("接口：当前TPS是多少？各个接口耗时有没有变化？")]),e._v(" "),_("li",[e._v("线程池：系统中各种任务是否有积压？")]),e._v(" "),_("li",[e._v("缓存命中率")])])]),e._v(" "),_("li",[_("p",[e._v("磁盘快满了")]),e._v(" "),_("p",[e._v("这时候我们迫切想知道最近一段时间数据文件的增长情况，看看是不是某种文件有突增。")])]),e._v(" "),_("li",[_("p",[e._v("系统运行是否正常")]),e._v(" "),_("p",[e._v("此时我们可能需要通过错误日志的数量、集群节点的状态等指标来判断系统是否在正常运行。")])])]),e._v(" "),_("h2",{attrs:{id:"_2-什么人需要使用监控"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2-什么人需要使用监控"}},[e._v("#")]),e._v(" 2. 什么人需要使用监控?")]),e._v(" "),_("p",[e._v("所有关注系统状态的人员都可以使用，包括但不限于研发、测试、运维、DBA等等")]),e._v(" "),_("h2",{attrs:{id:"_3-什么是监控指标"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-什么是监控指标"}},[e._v("#")]),e._v(" 3. 什么是监控指标？")]),e._v(" "),_("h3",{attrs:{id:"_3-1-监控指标名词解释"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-监控指标名词解释"}},[e._v("#")]),e._v(" 3.1. 监控指标名词解释")]),e._v(" "),_("p",[e._v("在 IoTDB 的监控模块，每个监控指标被 "),_("code",[e._v("Metric Name")]),e._v(" 和 "),_("code",[e._v("Tags")]),e._v(" 唯一标识。")]),e._v(" "),_("ul",[_("li",[_("code",[e._v("Metric Name")]),e._v("：指标类型名称，比如"),_("code",[e._v("logback_events")]),e._v("表示日志事件。")]),e._v(" "),_("li",[_("code",[e._v("Tags")]),e._v("：指标分类，形式为Key-Value对，每个指标下面可以有0到多个分类，常见的Key-Value对：\n"),_("ul",[_("li",[_("code",[e._v("name = xxx")]),e._v("：被监控对象的名称，是对"),_("strong",[e._v("业务逻辑")]),e._v("的说明。比如对于"),_("code",[e._v("Metric Name = entry_seconds_count")]),e._v("\n类型的监控项，name的含义是指被监控的业务接口。")]),e._v(" "),_("li",[_("code",[e._v("type = xxx")]),e._v("：监控指标类型细分，是对"),_("strong",[e._v("监控指标")]),e._v("本身的说明。比如对于"),_("code",[e._v("Metric Name = point")]),e._v("\n类型的监控项，type的含义是指监控具体是什么类型的点数。")]),e._v(" "),_("li",[_("code",[e._v("status = xxx")]),e._v("：被监控对象的状态，是对"),_("strong",[e._v("业务逻辑")]),e._v("的说明。比如对于"),_("code",[e._v("Metric Name = Task")]),e._v("类型的监控项可以通过该参数，从而区分被监控对象的状态。")]),e._v(" "),_("li",[_("code",[e._v("user = xxx")]),e._v("：被监控对象的相关用户，是对"),_("strong",[e._v("业务逻辑")]),e._v("的说明。比如统计"),_("code",[e._v("root")]),e._v("用户的写入总点数。")]),e._v(" "),_("li",[e._v("根据具体情况自定义：比如logback_events_total下有一个level的分类，用来表示特定级别下的日志数量。")])])]),e._v(" "),_("li",[_("code",[e._v("Metric Level")]),e._v("："),_("strong",[e._v("指标管理级别")]),e._v("，默认启动级别为"),_("code",[e._v("Core")]),e._v("级别，建议启动级别为"),_("code",[e._v("Important级别")]),e._v("\n，审核严格程度"),_("code",[e._v("Core > Important > Normal > All")]),e._v(" "),_("ul",[_("li",[_("code",[e._v("Core")]),e._v("：系统的核心指标，供"),_("strong",[e._v("系统内核和运维人员")]),e._v("使用，关乎系统的"),_("strong",[e._v("性能、稳定性、安全性")]),e._v("，比如实例的状况，系统的负载等。")]),e._v(" "),_("li",[_("code",[e._v("Important")]),e._v("：模块的重要指标，供"),_("strong",[e._v("运维和测试人员")]),e._v("使用，直接关乎"),_("strong",[e._v("每个模块的运行状态")]),e._v("，比如合并文件个数、执行情况等。")]),e._v(" "),_("li",[_("code",[e._v("Normal")]),e._v("：模块的一般指标，供"),_("strong",[e._v("开发人员")]),e._v("使用，方便在出现问题时"),_("strong",[e._v("定位模块")]),e._v("，比如合并中的特定关键操作情况。")]),e._v(" "),_("li",[_("code",[e._v("All")]),e._v("：模块的全部指标，供"),_("strong",[e._v("模块开发人员")]),e._v("使用，往往在复现问题的时候使用，从而快速解决问题。")])])])]),e._v(" "),_("h3",{attrs:{id:"_3-2-监控指标对外获取数据格式"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-监控指标对外获取数据格式"}},[e._v("#")]),e._v(" 3.2. 监控指标对外获取数据格式")]),e._v(" "),_("ul",[_("li",[e._v("IoTDB 对外提供 JMX、 Prometheus 和 IoTDB 格式的监控指标：\n"),_("ul",[_("li",[e._v("对于 JMX ，可以通过"),_("code",[e._v("org.apache.iotdb.metrics")]),e._v("获取系统监控指标指标。")]),e._v(" "),_("li",[e._v("对于 Prometheus ，可以通过对外暴露的端口获取监控指标的值")]),e._v(" "),_("li",[e._v("对于 IoTDB 方式对外暴露：可以通过执行 IoTDB 的查询来获取监控指标")])])])]),e._v(" "),_("h2",{attrs:{id:"_4-监控指标有哪些"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-监控指标有哪些"}},[e._v("#")]),e._v(" 4. 监控指标有哪些？")]),e._v(" "),_("p",[e._v("目前，IoTDB 对外提供一些主要模块的监控指标，并且随着新功能的开发以及系统优化或者重构，监控指标也会同步添加和更新。如果想自己在\nIoTDB\n中添加更多系统监控指标埋点，可以参考"),_("a",{attrs:{href:"https://github.com/apache/iotdb/tree/master/metrics",target:"_blank",rel:"noopener noreferrer"}},[e._v("IoTDB Metrics Framework"),_("OutboundLink")],1),e._v("使用说明。")]),e._v(" "),_("h3",{attrs:{id:"_4-1-core-级别监控指标"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-core-级别监控指标"}},[e._v("#")]),e._v(" 4.1. Core 级别监控指标")]),e._v(" "),_("p",[e._v("Core 级别的监控指标在系统运行中默认开启，每一个 Core 级别的监控指标的添加都需要经过谨慎的评估，目前 Core 级别的监控指标如下所述：")]),e._v(" "),_("h4",{attrs:{id:"_4-1-1-集群运行状态"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-1-集群运行状态"}},[e._v("#")]),e._v(" 4.1.1. 集群运行状态")]),e._v(" "),_("table",[_("thead",[_("tr",[_("th",[e._v("Metric")]),e._v(" "),_("th",[e._v("Tags")]),e._v(" "),_("th",[e._v("Type")]),e._v(" "),_("th",[e._v("Description")])])]),e._v(" "),_("tbody",[_("tr",[_("td",[e._v("config_node")]),e._v(" "),_("td",[e._v('name="total",status="Registered/Online/Unknown"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("已注册/在线/离线 confignode 的节点数量")])]),e._v(" "),_("tr",[_("td",[e._v("data_node")]),e._v(" "),_("td",[e._v('name="total",status="Registered/Online/Unknown"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("已注册/在线/离线 datanode 的节点数量")])]),e._v(" "),_("tr",[_("td",[e._v("cluster_node_leader_count")]),e._v(" "),_("td",[e._v('name="{ip}:{port}"')]),e._v(" "),_("td",[e._v("Gauge")]),e._v(" "),_("td",[e._v("节点上共识组Leader的数量")])]),e._v(" "),_("tr",[_("td",[e._v("cluster_node_status")]),e._v(" "),_("td",[e._v('name="{ip}:{port}",type="ConfigNode/DataNode"')]),e._v(" "),_("td",[e._v("Gauge")]),e._v(" "),_("td",[e._v("节点的状态，0=Unkonwn 1=online")])]),e._v(" "),_("tr",[_("td",[e._v("entry")]),e._v(" "),_("td",[e._v('name="{interface}"')]),e._v(" "),_("td",[e._v("Timer")]),e._v(" "),_("td",[e._v("Client 建立的 Thrift 的耗时情况")])]),e._v(" "),_("tr",[_("td",[e._v("mem")]),e._v(" "),_("td",[e._v('name="IoTConsensus"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("IoT共识协议的内存占用，单位为byte")])])])]),e._v(" "),_("h4",{attrs:{id:"_4-1-2-接口层统计"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-2-接口层统计"}},[e._v("#")]),e._v(" 4.1.2. 接口层统计")]),e._v(" "),_("table",[_("thead",[_("tr",[_("th",[e._v("Metric")]),e._v(" "),_("th",[e._v("Tags")]),e._v(" "),_("th",[e._v("Type")]),e._v(" "),_("th",[e._v("Description")])])]),e._v(" "),_("tbody",[_("tr",[_("td",[e._v("thrift_connections")]),e._v(" "),_("td",[e._v('name="ConfigNodeRPC"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("ConfigNode 的内部 Thrift 连接数")])]),e._v(" "),_("tr",[_("td",[e._v("thrift_connections")]),e._v(" "),_("td",[e._v('name="InternalRPC"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("DataNode 的内部 Thrift 连接数")])]),e._v(" "),_("tr",[_("td",[e._v("thrift_connections")]),e._v(" "),_("td",[e._v('name="MPPDataExchangeRPC"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("MPP 框架的内部 Thrift 连接数")])]),e._v(" "),_("tr",[_("td",[e._v("thrift_connections")]),e._v(" "),_("td",[e._v('name="ClientRPC"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("Client 建立的 Thrift 连接数")])]),e._v(" "),_("tr",[_("td",[e._v("thrift_active_threads")]),e._v(" "),_("td",[e._v('name="ConfigNodeRPC-Service"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("ConfigNode 的内部活跃 Thrift 连接数")])]),e._v(" "),_("tr",[_("td",[e._v("thrift_active_threads")]),e._v(" "),_("td",[e._v('name="DataNodeInternalRPC-Service"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("DataNode 的内部活跃 Thrift 连接数")])]),e._v(" "),_("tr",[_("td",[e._v("thrift_active_threads")]),e._v(" "),_("td",[e._v('name="MPPDataExchangeRPC-Service"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("MPP 框架的内部活跃 Thrift 连接数")])]),e._v(" "),_("tr",[_("td",[e._v("thrift_active_threads")]),e._v(" "),_("td",[e._v('name="ClientRPC-Service"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("Client 建立的活跃 Thrift 连接数")])]),e._v(" "),_("tr",[_("td",[e._v("session_idle_time")]),e._v(" "),_("td",[e._v('name = "sessionId"')]),e._v(" "),_("td",[e._v("Histogram")]),e._v(" "),_("td",[e._v("不同 Session 的空闲时间分布情况")])])])]),e._v(" "),_("h4",{attrs:{id:"_4-1-3-节点统计"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-3-节点统计"}},[e._v("#")]),e._v(" 4.1.3. 节点统计")]),e._v(" "),_("table",[_("thead",[_("tr",[_("th",[e._v("Metric")]),e._v(" "),_("th",[e._v("Tags")]),e._v(" "),_("th",[e._v("Type")]),e._v(" "),_("th",[e._v("Description")])])]),e._v(" "),_("tbody",[_("tr",[_("td",[e._v("quantity")]),e._v(" "),_("td",[e._v('name="database"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("系统数据库数量")])]),e._v(" "),_("tr",[_("td",[e._v("quantity")]),e._v(" "),_("td",[e._v('name="timeSeries"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("系统时间序列数量")])]),e._v(" "),_("tr",[_("td",[e._v("quantity")]),e._v(" "),_("td",[e._v('name="pointsIn"')]),e._v(" "),_("td",[e._v("Counter")]),e._v(" "),_("td",[e._v("系统累计写入点数")])]),e._v(" "),_("tr",[_("td",[e._v("points")]),e._v(" "),_("td",[e._v('database="{database}", type="flush"')]),e._v(" "),_("td",[e._v("Gauge")]),e._v(" "),_("td",[e._v("最新一个刷盘的memtale的点数")])])])]),e._v(" "),_("h4",{attrs:{id:"_4-1-4-集群全链路"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-4-集群全链路"}},[e._v("#")]),e._v(" 4.1.4. 集群全链路")]),e._v(" "),_("table",[_("thead",[_("tr",[_("th",[e._v("Metric")]),e._v(" "),_("th",[e._v("Tags")]),e._v(" "),_("th",[e._v("Type")]),e._v(" "),_("th",[e._v("Description")])])]),e._v(" "),_("tbody",[_("tr",[_("td",[e._v("performance_overview")]),e._v(" "),_("td",[e._v('interface="{interface}", type="{statement_type}"')]),e._v(" "),_("td",[e._v("Timer")]),e._v(" "),_("td",[e._v("客户端执行的操作的耗时情况")])]),e._v(" "),_("tr",[_("td",[e._v("performance_overview_detail")]),e._v(" "),_("td",[e._v('stage="authority"')]),e._v(" "),_("td",[e._v("Timer")]),e._v(" "),_("td",[e._v("权限认证总耗时")])]),e._v(" "),_("tr",[_("td",[e._v("performance_overview_detail")]),e._v(" "),_("td",[e._v('stage="parser"')]),e._v(" "),_("td",[e._v("Timer")]),e._v(" "),_("td",[e._v("解析构造总耗时")])]),e._v(" "),_("tr",[_("td",[e._v("performance_overview_detail")]),e._v(" "),_("td",[e._v('stage="analyzer"')]),e._v(" "),_("td",[e._v("Timer")]),e._v(" "),_("td",[e._v("语句分析总耗时")])]),e._v(" "),_("tr",[_("td",[e._v("performance_overview_detail")]),e._v(" "),_("td",[e._v('stage="planner"')]),e._v(" "),_("td",[e._v("Timer")]),e._v(" "),_("td",[e._v("请求规划总耗时")])]),e._v(" "),_("tr",[_("td",[e._v("performance_overview_detail")]),e._v(" "),_("td",[e._v('stage="scheduler"')]),e._v(" "),_("td",[e._v("Timer")]),e._v(" "),_("td",[e._v("请求执行总耗时")])]),e._v(" "),_("tr",[_("td",[e._v("performance_overview_schedule_detail")]),e._v(" "),_("td",[e._v('stage="schema_validate"')]),e._v(" "),_("td",[e._v("Timer")]),e._v(" "),_("td",[e._v("元数据验证总耗时")])]),e._v(" "),_("tr",[_("td",[e._v("performance_overview_schedule_detail")]),e._v(" "),_("td",[e._v('stage="trigger"')]),e._v(" "),_("td",[e._v("Timer")]),e._v(" "),_("td",[e._v("Trigger 触发总耗时")])]),e._v(" "),_("tr",[_("td",[e._v("performance_overview_schedule_detail")]),e._v(" "),_("td",[e._v('stage="consensus"')]),e._v(" "),_("td",[e._v("Timer")]),e._v(" "),_("td",[e._v("共识层总耗时")])]),e._v(" "),_("tr",[_("td",[e._v("performance_overview_schedule_detail")]),e._v(" "),_("td",[e._v('stage="lock"')]),e._v(" "),_("td",[e._v("Timer")]),e._v(" "),_("td",[e._v("DataRegion 抢锁总耗时")])]),e._v(" "),_("tr",[_("td",[e._v("performance_overview_schedule_detail")]),e._v(" "),_("td",[e._v('stage="memory_block"')]),e._v(" "),_("td",[e._v("Timer")]),e._v(" "),_("td",[e._v("内存控制阻塞总耗时")])]),e._v(" "),_("tr",[_("td",[e._v("performance_overview_schedule_detail")]),e._v(" "),_("td",[e._v('stage="wal"')]),e._v(" "),_("td",[e._v("Timer")]),e._v(" "),_("td",[e._v("写入 Wal 总耗时")])]),e._v(" "),_("tr",[_("td",[e._v("performance_overview_schedule_detail")]),e._v(" "),_("td",[e._v('stage="memtable"')]),e._v(" "),_("td",[e._v("Timer")]),e._v(" "),_("td",[e._v("写入 Memtable 总耗时")])]),e._v(" "),_("tr",[_("td",[e._v("performance_overview_schedule_detail")]),e._v(" "),_("td",[e._v('stage="last_cache"')]),e._v(" "),_("td",[e._v("Timer")]),e._v(" "),_("td",[e._v("更新 LastCache 总耗时")])])])]),e._v(" "),_("h4",{attrs:{id:"_4-1-5-任务统计"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-5-任务统计"}},[e._v("#")]),e._v(" 4.1.5. 任务统计")]),e._v(" "),_("table",[_("thead",[_("tr",[_("th",[e._v("Metric")]),e._v(" "),_("th",[e._v("Tags")]),e._v(" "),_("th",[e._v("Type")]),e._v(" "),_("th",[e._v("Description")])])]),e._v(" "),_("tbody",[_("tr",[_("td",[e._v("queue")]),e._v(" "),_("td",[e._v('name="compaction_inner", status="running/waiting"')]),e._v(" "),_("td",[e._v("Gauge")]),e._v(" "),_("td",[e._v("空间内合并任务数")])]),e._v(" "),_("tr",[_("td",[e._v("queue")]),e._v(" "),_("td",[e._v('name="compaction_cross", status="running/waiting"')]),e._v(" "),_("td",[e._v("Gauge")]),e._v(" "),_("td",[e._v("跨空间合并任务数")])]),e._v(" "),_("tr",[_("td",[e._v("queue")]),e._v(" "),_("td",[e._v('name="flush",status="running/waiting"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("刷盘任务数")])]),e._v(" "),_("tr",[_("td",[e._v("cost_task")]),e._v(" "),_("td",[e._v('name="inner_compaction/cross_compaction/flush"')]),e._v(" "),_("td",[e._v("Gauge")]),e._v(" "),_("td",[e._v("任务耗时情况")])])])]),e._v(" "),_("h4",{attrs:{id:"_4-1-6-iotdb-进程运行状态"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-6-iotdb-进程运行状态"}},[e._v("#")]),e._v(" 4.1.6. IoTDB 进程运行状态")]),e._v(" "),_("table",[_("thead",[_("tr",[_("th",[e._v("Metric")]),e._v(" "),_("th",[e._v("Tags")]),e._v(" "),_("th",[e._v("Type")]),e._v(" "),_("th",[e._v("Description")])])]),e._v(" "),_("tbody",[_("tr",[_("td",[e._v("process_cpu_load")]),e._v(" "),_("td",[e._v('name="process"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("IoTDB 进程的 CPU 占用率，单位为%")])]),e._v(" "),_("tr",[_("td",[e._v("process_cpu_time")]),e._v(" "),_("td",[e._v('name="process"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("IoTDB 进程占用的 CPU 时间，单位为ns")])]),e._v(" "),_("tr",[_("td",[e._v("process_max_mem")]),e._v(" "),_("td",[e._v('name="memory"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("IoTDB 进程最大可用内存")])]),e._v(" "),_("tr",[_("td",[e._v("process_total_mem")]),e._v(" "),_("td",[e._v('name="memory"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("IoTDB 进程当前已申请内存")])]),e._v(" "),_("tr",[_("td",[e._v("process_free_mem")]),e._v(" "),_("td",[e._v('name="memory"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("IoTDB 进程当前剩余可用内存")])])])]),e._v(" "),_("h4",{attrs:{id:"_4-1-7-系统运行状态"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-7-系统运行状态"}},[e._v("#")]),e._v(" 4.1.7. 系统运行状态")]),e._v(" "),_("table",[_("thead",[_("tr",[_("th",[e._v("Metric")]),e._v(" "),_("th",[e._v("Tags")]),e._v(" "),_("th",[e._v("Type")]),e._v(" "),_("th",[e._v("Description")])])]),e._v(" "),_("tbody",[_("tr",[_("td",[e._v("sys_cpu_load")]),e._v(" "),_("td",[e._v('name="system"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("系统的 CPU 占用率，单位为%")])]),e._v(" "),_("tr",[_("td",[e._v("sys_cpu_cores")]),e._v(" "),_("td",[e._v('name="system"')]),e._v(" "),_("td",[e._v("Gauge")]),e._v(" "),_("td",[e._v("系统的可用处理器数")])]),e._v(" "),_("tr",[_("td",[e._v("sys_total_physical_memory_size")]),e._v(" "),_("td",[e._v('name="memory"')]),e._v(" "),_("td",[e._v("Gauge")]),e._v(" "),_("td",[e._v("系统的最大物理内存")])]),e._v(" "),_("tr",[_("td",[e._v("sys_free_physical_memory_size")]),e._v(" "),_("td",[e._v('name="memory"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("系统的剩余可用内存")])]),e._v(" "),_("tr",[_("td",[e._v("sys_total_swap_space_size")]),e._v(" "),_("td",[e._v('name="memory"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("系统的交换区最大空间")])]),e._v(" "),_("tr",[_("td",[e._v("sys_free_swap_space_size")]),e._v(" "),_("td",[e._v('name="memory"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("系统的交换区剩余可用空间")])]),e._v(" "),_("tr",[_("td",[e._v("sys_committed_vm_size")]),e._v(" "),_("td",[e._v('name="memory"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("系统保证可用于正在运行的进程的虚拟内存量")])]),e._v(" "),_("tr",[_("td",[e._v("sys_disk_total_space")]),e._v(" "),_("td",[e._v('name="disk"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("系统磁盘总大小")])]),e._v(" "),_("tr",[_("td",[e._v("sys_disk_free_space")]),e._v(" "),_("td",[e._v('name="disk"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("系统磁盘可用大小")])])])]),e._v(" "),_("h4",{attrs:{id:"_4-1-8-iotdb-日志统计"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-8-iotdb-日志统计"}},[e._v("#")]),e._v(" 4.1.8. IoTDB 日志统计")]),e._v(" "),_("table",[_("thead",[_("tr",[_("th",[e._v("Metric")]),e._v(" "),_("th",[e._v("Tags")]),e._v(" "),_("th",[e._v("Type")]),e._v(" "),_("th",[e._v("Description")])])]),e._v(" "),_("tbody",[_("tr",[_("td",[e._v("logback_events")]),e._v(" "),_("td",[e._v('level="trace/debug/info/warn/error"')]),e._v(" "),_("td",[e._v("Counter")]),e._v(" "),_("td",[e._v("不同类型的日志个数")])])])]),e._v(" "),_("h4",{attrs:{id:"_4-1-9-文件统计信息"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-9-文件统计信息"}},[e._v("#")]),e._v(" 4.1.9. 文件统计信息")]),e._v(" "),_("table",[_("thead",[_("tr",[_("th",[e._v("Metric")]),e._v(" "),_("th",[e._v("Tags")]),e._v(" "),_("th",[e._v("Type")]),e._v(" "),_("th",[e._v("Description")])])]),e._v(" "),_("tbody",[_("tr",[_("td",[e._v("file_size")]),e._v(" "),_("td",[e._v('name="wal"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("写前日志总大小，单位为byte")])]),e._v(" "),_("tr",[_("td",[e._v("file_size")]),e._v(" "),_("td",[e._v('name="seq"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("顺序TsFile总大小，单位为byte")])]),e._v(" "),_("tr",[_("td",[e._v("file_size")]),e._v(" "),_("td",[e._v('name="unseq"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("乱序TsFile总大小，单位为byte")])]),e._v(" "),_("tr",[_("td",[e._v("file_size")]),e._v(" "),_("td",[e._v('name="inner-seq-temp"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("顺序空间内合并临时文件大小，单位为byte")])]),e._v(" "),_("tr",[_("td",[e._v("file_size")]),e._v(" "),_("td",[e._v('name="inner-unseq-temp"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("乱序空间内合并临时文件大小，单位为byte")])]),e._v(" "),_("tr",[_("td",[e._v("file_size")]),e._v(" "),_("td",[e._v('name="cross-temp"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("跨空间合并临时文件大小，单位为byte")])]),e._v(" "),_("tr",[_("td",[e._v("file_size")]),e._v(" "),_("td",[e._v('name="mods"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("Modification 文件的大小")])]),e._v(" "),_("tr",[_("td",[e._v("file_count")]),e._v(" "),_("td",[e._v('name="wal"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("写前日志文件个数")])]),e._v(" "),_("tr",[_("td",[e._v("file_count")]),e._v(" "),_("td",[e._v('name="seq"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("顺序TsFile文件个数")])]),e._v(" "),_("tr",[_("td",[e._v("file_count")]),e._v(" "),_("td",[e._v('name="unseq"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("乱序TsFile文件个数")])]),e._v(" "),_("tr",[_("td",[e._v("file_count")]),e._v(" "),_("td",[e._v('name="inner-seq-temp"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("顺序空间内合并临时文件个数")])]),e._v(" "),_("tr",[_("td",[e._v("file_count")]),e._v(" "),_("td",[e._v('name="inner-unseq-temp"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("乱序空间内合并临时文件个数")])]),e._v(" "),_("tr",[_("td",[e._v("file_count")]),e._v(" "),_("td",[e._v('name="cross-temp"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("跨空间合并临时文件个数")])]),e._v(" "),_("tr",[_("td",[e._v("file_count")]),e._v(" "),_("td",[e._v('name="open_file_handlers"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("IoTDB 进程打开文件数，仅支持Linux和MacOS")])]),e._v(" "),_("tr",[_("td",[e._v("file_count")]),e._v(" "),_("td",[e._v('name="mods')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("Modification 文件的数目")])])])]),e._v(" "),_("h4",{attrs:{id:"_4-1-10-jvm-内存统计"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-10-jvm-内存统计"}},[e._v("#")]),e._v(" 4.1.10. JVM 内存统计")]),e._v(" "),_("table",[_("thead",[_("tr",[_("th",[e._v("Metric")]),e._v(" "),_("th",[e._v("Tags")]),e._v(" "),_("th",[e._v("Type")]),e._v(" "),_("th",[e._v("Description")])])]),e._v(" "),_("tbody",[_("tr",[_("td",[e._v("jvm_buffer_memory_used_bytes")]),e._v(" "),_("td",[e._v('id="direct/mapped"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("已经使用的缓冲区大小")])]),e._v(" "),_("tr",[_("td",[e._v("jvm_buffer_total_capacity_bytes")]),e._v(" "),_("td",[e._v('id="direct/mapped"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("最大缓冲区大小")])]),e._v(" "),_("tr",[_("td",[e._v("jvm_buffer_count_buffers")]),e._v(" "),_("td",[e._v('id="direct/mapped"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("当前缓冲区数量")])]),e._v(" "),_("tr",[_("td",[e._v("jvm_memory_committed_bytes")]),e._v(" "),_("td",[e._v('{area="heap/nonheap",id="xxx",}')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("当前申请的内存大小")])]),e._v(" "),_("tr",[_("td",[e._v("jvm_memory_max_bytes")]),e._v(" "),_("td",[e._v('{area="heap/nonheap",id="xxx",}')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("最大内存")])]),e._v(" "),_("tr",[_("td",[e._v("jvm_memory_used_bytes")]),e._v(" "),_("td",[e._v('{area="heap/nonheap",id="xxx",}')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("已使用内存大小")])])])]),e._v(" "),_("h4",{attrs:{id:"_4-1-11-jvm-线程统计"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-11-jvm-线程统计"}},[e._v("#")]),e._v(" 4.1.11. JVM 线程统计")]),e._v(" "),_("table",[_("thead",[_("tr",[_("th",[e._v("Metric")]),e._v(" "),_("th",[e._v("Tags")]),e._v(" "),_("th",[e._v("Type")]),e._v(" "),_("th",[e._v("Description")])])]),e._v(" "),_("tbody",[_("tr",[_("td",[e._v("jvm_threads_live_threads")]),e._v(" "),_("td"),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("当前线程数")])]),e._v(" "),_("tr",[_("td",[e._v("jvm_threads_daemon_threads")]),e._v(" "),_("td"),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("当前 Daemon 线程数")])]),e._v(" "),_("tr",[_("td",[e._v("jvm_threads_peak_threads")]),e._v(" "),_("td"),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("峰值线程数")])]),e._v(" "),_("tr",[_("td",[e._v("jvm_threads_states_threads")]),e._v(" "),_("td",[e._v('state="runnable/blocked/waiting/timed-waiting/new/terminated"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("当前处于各种状态的线程数")])])])]),e._v(" "),_("h4",{attrs:{id:"_4-1-12-jvm-gc-统计"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-12-jvm-gc-统计"}},[e._v("#")]),e._v(" 4.1.12. JVM GC 统计")]),e._v(" "),_("table",[_("thead",[_("tr",[_("th",[e._v("Metric")]),e._v(" "),_("th",[e._v("Tags")]),e._v(" "),_("th",[e._v("Type")]),e._v(" "),_("th",[e._v("Description")])])]),e._v(" "),_("tbody",[_("tr",[_("td",[e._v("jvm_gc_pause")]),e._v(" "),_("td",[e._v('action="end of major GC/end of minor GC",cause="xxxx"')]),e._v(" "),_("td",[e._v("Timer")]),e._v(" "),_("td",[e._v("不同原因的Young GC/Full GC的次数与耗时")])]),e._v(" "),_("tr",[_("td"),e._v(" "),_("td"),e._v(" "),_("td"),e._v(" "),_("td")]),e._v(" "),_("tr",[_("td",[e._v("jvm_gc_concurrent_phase_time")]),e._v(" "),_("td",[e._v('action="{action}",cause="{cause}"')]),e._v(" "),_("td",[e._v("Timer")]),e._v(" "),_("td",[e._v("不同原因的Young GC/Full GC的次数与耗时")])]),e._v(" "),_("tr",[_("td"),e._v(" "),_("td"),e._v(" "),_("td"),e._v(" "),_("td")]),e._v(" "),_("tr",[_("td",[e._v("jvm_gc_max_data_size_bytes")]),e._v(" "),_("td"),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("老年代内存的历史最大值")])]),e._v(" "),_("tr",[_("td",[e._v("jvm_gc_live_data_size_bytes")]),e._v(" "),_("td"),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("老年代内存的使用值")])]),e._v(" "),_("tr",[_("td",[e._v("jvm_gc_memory_promoted_bytes")]),e._v(" "),_("td"),e._v(" "),_("td",[e._v("Counter")]),e._v(" "),_("td",[e._v("老年代内存正向增长累计值")])]),e._v(" "),_("tr",[_("td",[e._v("jvm_gc_memory_allocated_bytes")]),e._v(" "),_("td"),e._v(" "),_("td",[e._v("Counter")]),e._v(" "),_("td",[e._v("GC分配内存正向增长累计值")])])])]),e._v(" "),_("h3",{attrs:{id:"_4-2-important-级别监控指标"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-important-级别监控指标"}},[e._v("#")]),e._v(" 4.2. Important 级别监控指标")]),e._v(" "),_("p",[e._v("目前 Important 级别的监控指标如下所述：")]),e._v(" "),_("h4",{attrs:{id:"_4-2-1-节点统计"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-1-节点统计"}},[e._v("#")]),e._v(" 4.2.1. 节点统计")]),e._v(" "),_("table",[_("thead",[_("tr",[_("th",[e._v("Metric")]),e._v(" "),_("th",[e._v("Tags")]),e._v(" "),_("th",[e._v("Type")]),e._v(" "),_("th",[e._v("Description")])])]),e._v(" "),_("tbody",[_("tr",[_("td",[e._v("region")]),e._v(" "),_("td",[e._v('name="total",type="SchemaRegion"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("分区表中 SchemaRegion 总数量")])]),e._v(" "),_("tr",[_("td",[e._v("region")]),e._v(" "),_("td",[e._v('name="total",type="DataRegion"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("分区表中 DataRegion 总数量")])]),e._v(" "),_("tr",[_("td",[e._v("region")]),e._v(" "),_("td",[e._v('name="{ip}:{port}",type="SchemaRegion"')]),e._v(" "),_("td",[e._v("Gauge")]),e._v(" "),_("td",[e._v("分区表中对应节点上 DataRegion 总数量")])]),e._v(" "),_("tr",[_("td",[e._v("region")]),e._v(" "),_("td",[e._v('name="{ip}:{port}",type="DataRegion"')]),e._v(" "),_("td",[e._v("Gauge")]),e._v(" "),_("td",[e._v("分区表中对应节点上 DataRegion 总数量")])])])]),e._v(" "),_("h4",{attrs:{id:"_4-2-2-iot共识协议统计"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-2-iot共识协议统计"}},[e._v("#")]),e._v(" 4.2.2. IoT共识协议统计")]),e._v(" "),_("table",[_("thead",[_("tr",[_("th",[e._v("Metric")]),e._v(" "),_("th",[e._v("Tags")]),e._v(" "),_("th",[e._v("Type")]),e._v(" "),_("th",[e._v("Description")])])]),e._v(" "),_("tbody",[_("tr",[_("td",[e._v("iot_consensus")]),e._v(" "),_("td",[e._v('name="logDispatcher-{IP}:{Port}", region="{region}", type="currentSyncIndex"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("副本组同步线程的当前同步进度")])]),e._v(" "),_("tr",[_("td",[e._v("iot_consensus")]),e._v(" "),_("td",[e._v('name="logDispatcher-{IP}:{Port}", region="{region}", type="cachedRequestInMemoryQueue"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("副本组同步线程缓存队列请求总大小")])]),e._v(" "),_("tr",[_("td",[e._v("iot_consensus")]),e._v(" "),_("td",[e._v('name="IoTConsensusServerImpl", region="{region}", type="searchIndex"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("副本组主流程写入进度")])]),e._v(" "),_("tr",[_("td",[e._v("iot_consensus")]),e._v(" "),_("td",[e._v('name="IoTConsensusServerImpl", region="{region}", type="safeIndex"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("副本组同步进度")])]),e._v(" "),_("tr",[_("td",[e._v("iot_consensus")]),e._v(" "),_("td",[e._v('name="IoTConsensusServerImpl", region="{region}", type="syncLag"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("副本组写入进度与同步进度差")])]),e._v(" "),_("tr",[_("td",[e._v("iot_consensus")]),e._v(" "),_("td",[e._v('name="IoTConsensusServerImpl", region="{region}", type="LogEntriesFromWAL"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("副本组Batch中来自WAL的日志项数量")])]),e._v(" "),_("tr",[_("td",[e._v("iot_consensus")]),e._v(" "),_("td",[e._v('name="IoTConsensusServerImpl", region="{region}", type="LogEntriesFromQueue"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("副本组Batch中来自队列的日志项数量")])]),e._v(" "),_("tr",[_("td",[e._v("stage")]),e._v(" "),_("td",[e._v('name="iot_consensus", region="{region}", type="getStateMachineLock"')]),e._v(" "),_("td",[e._v("Histogram")]),e._v(" "),_("td",[e._v("主流程获取状态机锁耗时")])]),e._v(" "),_("tr",[_("td",[e._v("stage")]),e._v(" "),_("td",[e._v('name="iot_consensus", region="{region}", type="checkingBeforeWrite"')]),e._v(" "),_("td",[e._v("Histogram")]),e._v(" "),_("td",[e._v("主流程写入状态机检查耗时")])]),e._v(" "),_("tr",[_("td",[e._v("stage")]),e._v(" "),_("td",[e._v('name="iot_consensus", region="{region}", type="writeStateMachine"')]),e._v(" "),_("td",[e._v("Histogram")]),e._v(" "),_("td",[e._v("主流程写入状态机耗时")])]),e._v(" "),_("tr",[_("td",[e._v("stage")]),e._v(" "),_("td",[e._v('name="iot_consensus", region="{region}", type="offerRequestToQueue"')]),e._v(" "),_("td",[e._v("Histogram")]),e._v(" "),_("td",[e._v("主流程尝试添加队列耗时")])]),e._v(" "),_("tr",[_("td",[e._v("stage")]),e._v(" "),_("td",[e._v('name="iot_consensus", region="{region}", type="consensusWrite"')]),e._v(" "),_("td",[e._v("Histogram")]),e._v(" "),_("td",[e._v("主流程全写入耗时")])]),e._v(" "),_("tr",[_("td",[e._v("stage")]),e._v(" "),_("td",[e._v('name="iot_consensus", region="{region}", type="constructBatch"')]),e._v(" "),_("td",[e._v("Histogram")]),e._v(" "),_("td",[e._v("同步线程构造 Batch 耗时")])]),e._v(" "),_("tr",[_("td",[e._v("stage")]),e._v(" "),_("td",[e._v('name="iot_consensus", region="{region}", type="syncLogTimePerRequest"')]),e._v(" "),_("td",[e._v("Histogram")]),e._v(" "),_("td",[e._v("异步回调流程同步日志耗时")])])])]),e._v(" "),_("h4",{attrs:{id:"_4-2-3-缓存统计"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-3-缓存统计"}},[e._v("#")]),e._v(" 4.2.3. 缓存统计")]),e._v(" "),_("table",[_("thead",[_("tr",[_("th",[e._v("Metric")]),e._v(" "),_("th",[e._v("Tags")]),e._v(" "),_("th",[e._v("Type")]),e._v(" "),_("th",[e._v("Description")])])]),e._v(" "),_("tbody",[_("tr",[_("td",[e._v("cache_hit")]),e._v(" "),_("td",[e._v('name="chunk"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("ChunkCache的命中率，单位为%")])]),e._v(" "),_("tr",[_("td",[e._v("cache_hit")]),e._v(" "),_("td",[e._v('name="schema"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("SchemaCache的命中率，单位为%")])]),e._v(" "),_("tr",[_("td",[e._v("cache_hit")]),e._v(" "),_("td",[e._v('name="timeSeriesMeta"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("TimeseriesMetadataCache的命中率，单位为%")])]),e._v(" "),_("tr",[_("td",[e._v("cache_hit")]),e._v(" "),_("td",[e._v('name="bloomFilter"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("TimeseriesMetadataCache中的bloomFilter的拦截率，单位为%")])]),e._v(" "),_("tr",[_("td",[e._v("cache")]),e._v(" "),_("td",[e._v('name="Database", type="hit"')]),e._v(" "),_("td",[e._v("Counter")]),e._v(" "),_("td",[e._v("Database Cache 的命中次数")])]),e._v(" "),_("tr",[_("td",[e._v("cache")]),e._v(" "),_("td",[e._v('name="Database", type="all"')]),e._v(" "),_("td",[e._v("Counter")]),e._v(" "),_("td",[e._v("Database Cache 的访问次数")])]),e._v(" "),_("tr",[_("td",[e._v("cache")]),e._v(" "),_("td",[e._v('name="SchemaPartition", type="hit"')]),e._v(" "),_("td",[e._v("Counter")]),e._v(" "),_("td",[e._v("SchemaPartition Cache 的命中次数")])]),e._v(" "),_("tr",[_("td",[e._v("cache")]),e._v(" "),_("td",[e._v('name="SchemaPartition", type="all"')]),e._v(" "),_("td",[e._v("Counter")]),e._v(" "),_("td",[e._v("SchemaPartition Cache 的访问次数")])]),e._v(" "),_("tr",[_("td",[e._v("cache")]),e._v(" "),_("td",[e._v('name="DataPartition", type="hit"')]),e._v(" "),_("td",[e._v("Counter")]),e._v(" "),_("td",[e._v("DataPartition Cache 的命中次数")])]),e._v(" "),_("tr",[_("td",[e._v("cache")]),e._v(" "),_("td",[e._v('name="DataPartition", type="all"')]),e._v(" "),_("td",[e._v("Counter")]),e._v(" "),_("td",[e._v("DataPartition Cache 的访问次数")])])])]),e._v(" "),_("h4",{attrs:{id:"_4-2-4-内存统计"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-4-内存统计"}},[e._v("#")]),e._v(" 4.2.4. 内存统计")]),e._v(" "),_("table",[_("thead",[_("tr",[_("th",[e._v("Metric")]),e._v(" "),_("th",[e._v("Tags")]),e._v(" "),_("th",[e._v("Type")]),e._v(" "),_("th",[e._v("Description")])])]),e._v(" "),_("tbody",[_("tr",[_("td",[e._v("mem")]),e._v(" "),_("td",[e._v('name="database_{name}"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("DataNode内对应DataRegion的内存占用，单位为byte")])]),e._v(" "),_("tr",[_("td",[e._v("mem")]),e._v(" "),_("td",[e._v('name="chunkMetaData_{name}"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("写入TsFile时的ChunkMetaData的内存占用，单位为byte")])]),e._v(" "),_("tr",[_("td",[e._v("mem")]),e._v(" "),_("td",[e._v('name="IoTConsensus"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("IoT共识协议的内存占用，单位为byte")])]),e._v(" "),_("tr",[_("td",[e._v("mem")]),e._v(" "),_("td",[e._v('name="IoTConsensusQueue"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("IoT共识协议用于队列的内存占用，单位为byte")])]),e._v(" "),_("tr",[_("td",[e._v("mem")]),e._v(" "),_("td",[e._v('name="IoTConsensusSync"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("IoT共识协议用于同步的内存占用，单位为byte")])]),e._v(" "),_("tr",[_("td",[e._v("mem")]),e._v(" "),_("td",[e._v('name="schema_region_total_usage"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("所有SchemaRegion的总内存占用，单位为byte")])])])]),e._v(" "),_("h4",{attrs:{id:"_4-2-5-合并统计"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-5-合并统计"}},[e._v("#")]),e._v(" 4.2.5. 合并统计")]),e._v(" "),_("table",[_("thead",[_("tr",[_("th",[e._v("Metric")]),e._v(" "),_("th",[e._v("Tags")]),e._v(" "),_("th",[e._v("Type")]),e._v(" "),_("th",[e._v("Description")])])]),e._v(" "),_("tbody",[_("tr",[_("td",[e._v("data_written")]),e._v(" "),_("td",[e._v('name="compaction", type="aligned/not-aligned/total"')]),e._v(" "),_("td",[e._v("Counter")]),e._v(" "),_("td",[e._v("合并时写入量")])]),e._v(" "),_("tr",[_("td",[e._v("data_read")]),e._v(" "),_("td",[e._v('name="compaction"')]),e._v(" "),_("td",[e._v("Counter")]),e._v(" "),_("td",[e._v("合并时的读取量")])]),e._v(" "),_("tr",[_("td",[e._v("compaction_task_count")]),e._v(" "),_("td",[e._v('name = "inner_compaction", type="sequence"')]),e._v(" "),_("td",[e._v("Counter")]),e._v(" "),_("td",[e._v("顺序空间内合并次数")])]),e._v(" "),_("tr",[_("td",[e._v("compaction_task_count")]),e._v(" "),_("td",[e._v('name = "inner_compaction", type="unsequence"')]),e._v(" "),_("td",[e._v("Counter")]),e._v(" "),_("td",[e._v("乱序空间内合并次数")])]),e._v(" "),_("tr",[_("td",[e._v("compaction_task_count")]),e._v(" "),_("td",[e._v('name = "cross_compaction", type="cross"')]),e._v(" "),_("td",[e._v("Counter")]),e._v(" "),_("td",[e._v("跨空间合并次数")])])])]),e._v(" "),_("h4",{attrs:{id:"_4-2-6-iotdb-进程统计"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-6-iotdb-进程统计"}},[e._v("#")]),e._v(" 4.2.6. IoTDB 进程统计")]),e._v(" "),_("table",[_("thead",[_("tr",[_("th",[e._v("Metric")]),e._v(" "),_("th",[e._v("Tags")]),e._v(" "),_("th",[e._v("Type")]),e._v(" "),_("th",[e._v("Description")])])]),e._v(" "),_("tbody",[_("tr",[_("td",[e._v("process_used_mem")]),e._v(" "),_("td",[e._v('name="memory"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("IoTDB 进程当前使用内存")])]),e._v(" "),_("tr",[_("td",[e._v("process_mem_ratio")]),e._v(" "),_("td",[e._v('name="memory"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("IoTDB 进程的内存占用比例")])]),e._v(" "),_("tr",[_("td",[e._v("process_threads_count")]),e._v(" "),_("td",[e._v('name="process"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("IoTDB 进程当前线程数")])]),e._v(" "),_("tr",[_("td",[e._v("process_status")]),e._v(" "),_("td",[e._v('name="process"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("IoTDB 进程存活状态，1为存活，0为终止")])])])]),e._v(" "),_("h4",{attrs:{id:"_4-2-7-jvm-类加载统计"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-7-jvm-类加载统计"}},[e._v("#")]),e._v(" 4.2.7. JVM 类加载统计")]),e._v(" "),_("table",[_("thead",[_("tr",[_("th",[e._v("Metric")]),e._v(" "),_("th",[e._v("Tags")]),e._v(" "),_("th",[e._v("Type")]),e._v(" "),_("th",[e._v("Description")])])]),e._v(" "),_("tbody",[_("tr",[_("td",[e._v("jvm_classes_unloaded_classes")]),e._v(" "),_("td"),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("累计卸载的class数量")])]),e._v(" "),_("tr",[_("td",[e._v("jvm_classes_loaded_classes")]),e._v(" "),_("td"),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("累计加载的class数量")])])])]),e._v(" "),_("h4",{attrs:{id:"_4-2-8-jvm-编译时间统计"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-8-jvm-编译时间统计"}},[e._v("#")]),e._v(" 4.2.8. JVM 编译时间统计")]),e._v(" "),_("table",[_("thead",[_("tr",[_("th",[e._v("Metric")]),e._v(" "),_("th",[e._v("Tags")]),e._v(" "),_("th",[e._v("Type")]),e._v(" "),_("th",[e._v("Description")])])]),e._v(" "),_("tbody",[_("tr",[_("td",[e._v("jvm_compilation_time_ms")]),e._v(" "),_("td",[e._v('{compiler="HotSpot 64-Bit Tiered Compilers",}')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("耗费在编译上的时间")])])])]),e._v(" "),_("h4",{attrs:{id:"_4-2-9-查询规划耗时统计"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-9-查询规划耗时统计"}},[e._v("#")]),e._v(" 4.2.9. 查询规划耗时统计")]),e._v(" "),_("table",[_("thead",[_("tr",[_("th",[e._v("Metric")]),e._v(" "),_("th",[e._v("Tags")]),e._v(" "),_("th",[e._v("Type")]),e._v(" "),_("th",[e._v("Description")])])]),e._v(" "),_("tbody",[_("tr",[_("td",[e._v("query_plan_cost")]),e._v(" "),_("td",[e._v('stage="analyzer"')]),e._v(" "),_("td",[e._v("Timer")]),e._v(" "),_("td",[e._v("查询语句分析耗时")])]),e._v(" "),_("tr",[_("td",[e._v("query_plan_cost")]),e._v(" "),_("td",[e._v('stage="logical_planner"')]),e._v(" "),_("td",[e._v("Timer")]),e._v(" "),_("td",[e._v("查询逻辑计划规划耗时")])]),e._v(" "),_("tr",[_("td",[e._v("query_plan_cost")]),e._v(" "),_("td",[e._v('stage="distribution_planner"')]),e._v(" "),_("td",[e._v("Timer")]),e._v(" "),_("td",[e._v("查询分布式执行计划规划耗时")])]),e._v(" "),_("tr",[_("td",[e._v("query_plan_cost")]),e._v(" "),_("td",[e._v('stage="partition_fetcher"')]),e._v(" "),_("td",[e._v("Timer")]),e._v(" "),_("td",[e._v("分区信息拉取耗时")])]),e._v(" "),_("tr",[_("td",[e._v("query_plan_cost")]),e._v(" "),_("td",[e._v('stage="schema_fetcher"')]),e._v(" "),_("td",[e._v("Timer")]),e._v(" "),_("td",[e._v("元数据信息拉取耗时")])])])]),e._v(" "),_("h4",{attrs:{id:"_4-2-10-执行计划分发耗时统计"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-10-执行计划分发耗时统计"}},[e._v("#")]),e._v(" 4.2.10. 执行计划分发耗时统计")]),e._v(" "),_("table",[_("thead",[_("tr",[_("th",[e._v("Metric")]),e._v(" "),_("th",[e._v("Tags")]),e._v(" "),_("th",[e._v("Type")]),e._v(" "),_("th",[e._v("Description")])])]),e._v(" "),_("tbody",[_("tr",[_("td",[e._v("dispatcher")]),e._v(" "),_("td",[e._v('stage="wait_for_dispatch"')]),e._v(" "),_("td",[e._v("Timer")]),e._v(" "),_("td",[e._v("分发执行计划耗时")])]),e._v(" "),_("tr",[_("td",[e._v("dispatcher")]),e._v(" "),_("td",[e._v('stage="dispatch_read"')]),e._v(" "),_("td",[e._v("Timer")]),e._v(" "),_("td",[e._v("查询执行计划发送耗时")])])])]),e._v(" "),_("h4",{attrs:{id:"_4-2-11-查询资源访问统计"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-11-查询资源访问统计"}},[e._v("#")]),e._v(" 4.2.11. 查询资源访问统计")]),e._v(" "),_("table",[_("thead",[_("tr",[_("th",[e._v("Metric")]),e._v(" "),_("th",[e._v("Tags")]),e._v(" "),_("th",[e._v("Type")]),e._v(" "),_("th",[e._v("Description")])])]),e._v(" "),_("tbody",[_("tr",[_("td",[e._v("query_resource")]),e._v(" "),_("td",[e._v('type="sequence_tsfile"')]),e._v(" "),_("td",[e._v("Rate")]),e._v(" "),_("td",[e._v("顺序文件访问频率")])]),e._v(" "),_("tr",[_("td",[e._v("query_resource")]),e._v(" "),_("td",[e._v('type="unsequence_tsfile"')]),e._v(" "),_("td",[e._v("Rate")]),e._v(" "),_("td",[e._v("乱序文件访问频率")])]),e._v(" "),_("tr",[_("td",[e._v("query_resource")]),e._v(" "),_("td",[e._v('type="flushing_memtable"')]),e._v(" "),_("td",[e._v("Rate")]),e._v(" "),_("td",[e._v("flushing memtable 访问频率")])]),e._v(" "),_("tr",[_("td",[e._v("query_resource")]),e._v(" "),_("td",[e._v('type="working_memtable"')]),e._v(" "),_("td",[e._v("Rate")]),e._v(" "),_("td",[e._v("working memtable 访问频率")])])])]),e._v(" "),_("h4",{attrs:{id:"_4-2-12-数据传输模块统计"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-12-数据传输模块统计"}},[e._v("#")]),e._v(" 4.2.12. 数据传输模块统计")]),e._v(" "),_("table",[_("thead",[_("tr",[_("th",[e._v("Metric")]),e._v(" "),_("th",[e._v("Tags")]),e._v(" "),_("th",[e._v("Type")]),e._v(" "),_("th",[e._v("Description")])])]),e._v(" "),_("tbody",[_("tr",[_("td",[e._v("data_exchange_cost")]),e._v(" "),_("td",[e._v('operation="source_handle_get_tsblock", type="local/remote"')]),e._v(" "),_("td",[e._v("Timer")]),e._v(" "),_("td",[e._v("source handle 接收 TsBlock 耗时")])]),e._v(" "),_("tr",[_("td",[e._v("data_exchange_cost")]),e._v(" "),_("td",[e._v('operation="source_handle_deserialize_tsblock", type="local/remote"')]),e._v(" "),_("td",[e._v("Timer")]),e._v(" "),_("td",[e._v("source handle 反序列化 TsBlock 耗时")])]),e._v(" "),_("tr",[_("td",[e._v("data_exchange_cost")]),e._v(" "),_("td",[e._v('operation="sink_handle_send_tsblock", type="local/remote"')]),e._v(" "),_("td",[e._v("Timer")]),e._v(" "),_("td",[e._v("sink handle 发送 TsBlock 耗时")])]),e._v(" "),_("tr",[_("td",[e._v("data_exchange_cost")]),e._v(" "),_("td",[e._v('operation="send_new_data_block_event_task", type="server/caller"')]),e._v(" "),_("td",[e._v("Timer")]),e._v(" "),_("td",[e._v("sink handle 发送 TsBlock RPC 耗时")])]),e._v(" "),_("tr",[_("td",[e._v("data_exchange_cost")]),e._v(" "),_("td",[e._v('operation="get_data_block_task", type="server/caller"')]),e._v(" "),_("td",[e._v("Timer")]),e._v(" "),_("td",[e._v("source handle 接收 TsBlock RPC 耗时")])]),e._v(" "),_("tr",[_("td",[e._v("data_exchange_cost")]),e._v(" "),_("td",[e._v('operation="on_acknowledge_data_block_event_task", type="server/caller"')]),e._v(" "),_("td",[e._v("Timer")]),e._v(" "),_("td",[e._v("source handle 确认接收 TsBlock RPC 耗时")])]),e._v(" "),_("tr",[_("td",[e._v("data_exchange_count")]),e._v(" "),_("td",[e._v('name="send_new_data_block_num", type="server/caller"')]),e._v(" "),_("td",[e._v("Histogram")]),e._v(" "),_("td",[e._v("sink handle 发送 TsBlock数量")])]),e._v(" "),_("tr",[_("td",[e._v("data_exchange_count")]),e._v(" "),_("td",[e._v('name="get_data_block_num", type="server/caller"')]),e._v(" "),_("td",[e._v("Histogram")]),e._v(" "),_("td",[e._v("source handle 接收 TsBlock 数量")])]),e._v(" "),_("tr",[_("td",[e._v("data_exchange_count")]),e._v(" "),_("td",[e._v('name="on_acknowledge_data_block_num", type="server/caller"')]),e._v(" "),_("td",[e._v("Histogram")]),e._v(" "),_("td",[e._v("source handle 确认接收 TsBlock 数量")])])])]),e._v(" "),_("h4",{attrs:{id:"_4-2-13-查询任务调度统计"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-13-查询任务调度统计"}},[e._v("#")]),e._v(" 4.2.13. 查询任务调度统计")]),e._v(" "),_("table",[_("thead",[_("tr",[_("th",[e._v("Metric")]),e._v(" "),_("th",[e._v("Tags")]),e._v(" "),_("th",[e._v("Type")]),e._v(" "),_("th",[e._v("Description")])])]),e._v(" "),_("tbody",[_("tr",[_("td",[e._v("driver_scheduler")]),e._v(" "),_("td",[e._v('name="ready_queued_time"')]),e._v(" "),_("td",[e._v("Timer")]),e._v(" "),_("td",[e._v("就绪队列排队时间")])]),e._v(" "),_("tr",[_("td",[e._v("driver_scheduler")]),e._v(" "),_("td",[e._v('name="block_queued_time"')]),e._v(" "),_("td",[e._v("Timer")]),e._v(" "),_("td",[e._v("阻塞队列排队时间")])]),e._v(" "),_("tr",[_("td",[e._v("driver_scheduler")]),e._v(" "),_("td",[e._v('name="ready_queue_task_count"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("就绪队列排队任务数")])]),e._v(" "),_("tr",[_("td",[e._v("driver_scheduler")]),e._v(" "),_("td",[e._v('name="block_queued_task_count"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("阻塞队列排队任务数")])])])]),e._v(" "),_("h4",{attrs:{id:"_4-2-14-查询执行耗时统计"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-14-查询执行耗时统计"}},[e._v("#")]),e._v(" 4.2.14. 查询执行耗时统计")]),e._v(" "),_("table",[_("thead",[_("tr",[_("th",[e._v("Metric")]),e._v(" "),_("th",[e._v("Tags")]),e._v(" "),_("th",[e._v("Type")]),e._v(" "),_("th",[e._v("Description")])])]),e._v(" "),_("tbody",[_("tr",[_("td",[e._v("query_execution")]),e._v(" "),_("td",[e._v('stage="local_execution_planner"')]),e._v(" "),_("td",[e._v("Timer")]),e._v(" "),_("td",[e._v("算子树构造耗时")])]),e._v(" "),_("tr",[_("td",[e._v("query_execution")]),e._v(" "),_("td",[e._v('stage="query_resource_init"')]),e._v(" "),_("td",[e._v("Timer")]),e._v(" "),_("td",[e._v("查询资源初始化耗时")])]),e._v(" "),_("tr",[_("td",[e._v("query_execution")]),e._v(" "),_("td",[e._v('stage="get_query_resource_from_mem"')]),e._v(" "),_("td",[e._v("Timer")]),e._v(" "),_("td",[e._v("查询资源内存查询与构造耗时")])]),e._v(" "),_("tr",[_("td",[e._v("query_execution")]),e._v(" "),_("td",[e._v('stage="driver_internal_process"')]),e._v(" "),_("td",[e._v("Timer")]),e._v(" "),_("td",[e._v("Driver 执行耗时")])]),e._v(" "),_("tr",[_("td",[e._v("query_execution")]),e._v(" "),_("td",[e._v('stage="wait_for_result"')]),e._v(" "),_("td",[e._v("Timer")]),e._v(" "),_("td",[e._v("从resultHandle 获取一次查询结果的耗时")])]),e._v(" "),_("tr",[_("td",[e._v("operator_execution_cost")]),e._v(" "),_("td",[e._v('name="{operator_name}"')]),e._v(" "),_("td",[e._v("Timer")]),e._v(" "),_("td",[e._v("算子执行耗时")])]),e._v(" "),_("tr",[_("td",[e._v("operator_execution_count")]),e._v(" "),_("td",[e._v('name="{operator_name}"')]),e._v(" "),_("td",[e._v("Counter")]),e._v(" "),_("td",[e._v("算子调用次数（以 next 方法调用次数计算）")])]),e._v(" "),_("tr",[_("td",[e._v("aggregation")]),e._v(" "),_("td",[e._v('from="raw_data"')]),e._v(" "),_("td",[e._v("Timer")]),e._v(" "),_("td",[e._v("从一批原始数据进行一次聚合计算的耗时")])]),e._v(" "),_("tr",[_("td",[e._v("aggregation")]),e._v(" "),_("td",[e._v('from="statistics"')]),e._v(" "),_("td",[e._v("Timer")]),e._v(" "),_("td",[e._v("使用统计信息更新一次聚合值的耗时")])]),e._v(" "),_("tr",[_("td",[e._v("series_scan_cost")]),e._v(" "),_("td",[e._v('stage="load_timeseries_metadata", type="aligned/non_aligned", from="mem/disk"')]),e._v(" "),_("td",[e._v("Timer")]),e._v(" "),_("td",[e._v("加载 TimeseriesMetadata 耗时")])]),e._v(" "),_("tr",[_("td",[e._v("series_scan_cost")]),e._v(" "),_("td",[e._v('stage="read_timeseries_metadata", type="", from="cache/file"')]),e._v(" "),_("td",[e._v("Timer")]),e._v(" "),_("td",[e._v("读取一个文件的 Metadata 耗时")])]),e._v(" "),_("tr",[_("td",[e._v("series_scan_cost")]),e._v(" "),_("td",[e._v('stage="timeseries_metadata_modification", type="aligned/non_aligned", from="null"')]),e._v(" "),_("td",[e._v("Timer")]),e._v(" "),_("td",[e._v("过滤删除的 TimeseriesMetadata 耗时")])]),e._v(" "),_("tr",[_("td",[e._v("series_scan_cost")]),e._v(" "),_("td",[e._v('stage="load_chunk_metadata_list", type="aligned/non_aligned", from="mem/disk"')]),e._v(" "),_("td",[e._v("Timer")]),e._v(" "),_("td",[e._v("加载 ChunkMetadata 列表耗时")])]),e._v(" "),_("tr",[_("td",[e._v("series_scan_cost")]),e._v(" "),_("td",[e._v('stage="chunk_metadata_modification", type="aligned/non_aligned", from="mem/disk"')]),e._v(" "),_("td",[e._v("Timer")]),e._v(" "),_("td",[e._v("过滤删除的 ChunkMetadata 耗时")])]),e._v(" "),_("tr",[_("td",[e._v("series_scan_cost")]),e._v(" "),_("td",[e._v('stage="chunk_metadata_filter", type="aligned/non_aligned", from="mem/disk"')]),e._v(" "),_("td",[e._v("Timer")]),e._v(" "),_("td",[e._v("根据查询过滤条件过滤 ChunkMetadata 耗时")])]),e._v(" "),_("tr",[_("td",[e._v("series_scan_cost")]),e._v(" "),_("td",[e._v('stage="construct_chunk_reader", type="aligned/non_aligned", from="mem/disk"')]),e._v(" "),_("td",[e._v("Timer")]),e._v(" "),_("td",[e._v("构造 ChunkReader 耗时")])]),e._v(" "),_("tr",[_("td",[e._v("series_scan_cost")]),e._v(" "),_("td",[e._v('stage="read_chunk", type="", from="cache/file"')]),e._v(" "),_("td",[e._v("Timer")]),e._v(" "),_("td",[e._v("读取 Chunk 的耗时")])]),e._v(" "),_("tr",[_("td",[e._v("series_scan_cost")]),e._v(" "),_("td",[e._v('stage="init_chunk_reader", type="aligned/non_aligned", from="mem/disk"')]),e._v(" "),_("td",[e._v("Timer")]),e._v(" "),_("td",[e._v("初始化 ChunkReader（构造 PageReader） 耗时")])]),e._v(" "),_("tr",[_("td",[e._v("series_scan_cost")]),e._v(" "),_("td",[e._v('stage="build_tsblock_from_page_reader", type="aligned/non_aligned", from="mem/disk"')]),e._v(" "),_("td",[e._v("Timer")]),e._v(" "),_("td",[e._v("从 PageReader 构造 Tsblock 耗时")])]),e._v(" "),_("tr",[_("td",[e._v("series_scan_cost")]),e._v(" "),_("td",[e._v('stage="build_tsblock_from_merge_reader", type="aligned/non_aligned", from="null"')]),e._v(" "),_("td",[e._v("Timer")]),e._v(" "),_("td",[e._v("从 MergeReader 构造 Tsblock （解乱序数据）耗时")])])])]),e._v(" "),_("h4",{attrs:{id:"_4-2-16-元数据引擎统计"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-16-元数据引擎统计"}},[e._v("#")]),e._v(" 4.2.16 元数据引擎统计")]),e._v(" "),_("table",[_("thead",[_("tr",[_("th",[e._v("Metric")]),e._v(" "),_("th",[e._v("Tags")]),e._v(" "),_("th",[e._v("Type")]),e._v(" "),_("th",[e._v("Description")])])]),e._v(" "),_("tbody",[_("tr",[_("td",[e._v("schema_engine")]),e._v(" "),_("td",[e._v('name="schema_region_total_mem_usage"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("SchemaRegion 全局内存使用量")])]),e._v(" "),_("tr",[_("td",[e._v("schema_engine")]),e._v(" "),_("td",[e._v('name="schema_region_mem_capacity"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("SchemaRegion 全局可用内存")])]),e._v(" "),_("tr",[_("td",[e._v("schema_engine")]),e._v(" "),_("td",[e._v('name="schema_engine_mode"')]),e._v(" "),_("td",[e._v("Gauge")]),e._v(" "),_("td",[e._v("SchemaEngine 模式")])]),e._v(" "),_("tr",[_("td",[e._v("schema_engine")]),e._v(" "),_("td",[e._v('name="schema_region_consensus"')]),e._v(" "),_("td",[e._v("Gauge")]),e._v(" "),_("td",[e._v("元数据管理引擎共识协议")])]),e._v(" "),_("tr",[_("td",[e._v("schema_engine")]),e._v(" "),_("td",[e._v('name="schema_region_number"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("SchemaRegion 个数")])]),e._v(" "),_("tr",[_("td",[e._v("schema_region")]),e._v(" "),_("td",[e._v('name="schema_region_mem_usage", region="SchemaRegion[{regionId}]"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("每个 SchemaRegion 分别的内存使用量")])]),e._v(" "),_("tr",[_("td",[e._v("schema_region")]),e._v(" "),_("td",[e._v('name="schema_region_series_cnt", region="SchemaRegion[{regionId}]"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("每个 SchemaRegion 分别的时间序列数")])])])]),e._v(" "),_("h3",{attrs:{id:"_4-3-normal-级别监控指标"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-normal-级别监控指标"}},[e._v("#")]),e._v(" 4.3. Normal 级别监控指标")]),e._v(" "),_("h4",{attrs:{id:"_4-3-1-集群"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-1-集群"}},[e._v("#")]),e._v(" 4.3.1. 集群")]),e._v(" "),_("table",[_("thead",[_("tr",[_("th",[e._v("Metric")]),e._v(" "),_("th",[e._v("Tags")]),e._v(" "),_("th",[e._v("Type")]),e._v(" "),_("th",[e._v("Description")])])]),e._v(" "),_("tbody",[_("tr",[_("td",[e._v("region")]),e._v(" "),_("td",[e._v('name="{DatabaseName}",type="SchemaRegion/DataRegion"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("特定节点上不同 Database 的 DataRegion/SchemaRegion 个数")])]),e._v(" "),_("tr",[_("td",[e._v("slot")]),e._v(" "),_("td",[e._v('name="{DatabaseName}",type="schemaSlotNumber/dataSlotNumber"')]),e._v(" "),_("td",[e._v("AutoGauge")]),e._v(" "),_("td",[e._v("特定节点上不同 Database 的 DataSlot/SchemaSlot 个数")])])])]),e._v(" "),_("h3",{attrs:{id:"_4-4-all-级别监控指标"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-all-级别监控指标"}},[e._v("#")]),e._v(" 4.4. All 级别监控指标")]),e._v(" "),_("p",[e._v("目前还没有All级别的监控指标，后续会持续添加。")]),e._v(" "),_("h2",{attrs:{id:"_5-怎样获取这些系统监控"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_5-怎样获取这些系统监控"}},[e._v("#")]),e._v(" 5. 怎样获取这些系统监控？")]),e._v(" "),_("ul",[_("li",[e._v("监控模块的相关配置均在"),_("code",[e._v("conf/iotdb-{datanode/confignode}.properties")]),e._v("中，所有配置项支持通过"),_("code",[e._v("load configuration")]),e._v("命令热加载。")])]),e._v(" "),_("h3",{attrs:{id:"_5-1-使用-jmx-方式"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-使用-jmx-方式"}},[e._v("#")]),e._v(" 5.1. 使用 JMX 方式")]),e._v(" "),_("p",[e._v("对于使用 JMX 对外暴露的指标，可以通过 Jconsole 来进行查看。在进入 Jconsole 监控页面后，首先会看到 IoTDB\n的各类运行情况的概览。在这里，您可以看到堆内存信息、线程信息、类信息以及服务器的 CPU 使用情况。")]),e._v(" "),_("h4",{attrs:{id:"_5-1-1-获取监控指标数据"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-1-获取监控指标数据"}},[e._v("#")]),e._v(" 5.1.1. 获取监控指标数据")]),e._v(" "),_("p",[e._v('连接到 JMX 后，您可以通过 "MBeans" 标签找到名为 "org.apache.iotdb.metrics" 的 "MBean"，可以在侧边栏中查看所有监控指标的具体值。')]),e._v(" "),_("img",{staticStyle:{width:"100%","max-width":"800px","max-height":"600px","margin-left":"auto","margin-right":"auto",display:"block"},attrs:{alt:"metric-jmx",src:"https://user-images.githubusercontent.com/46039728/204018765-6fda9391-ebcf-4c80-98c5-26f34bd74df0.png"}}),e._v(" "),_("h4",{attrs:{id:"_5-1-2-获取其他相关数据"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-2-获取其他相关数据"}},[e._v("#")]),e._v(" 5.1.2. 获取其他相关数据")]),e._v(" "),_("p",[e._v('连接到 JMX 后，您可以通过 "MBeans" 标签找到名为 "org.apache.iotdb.service" 的 "MBean"，如下图所示，了解服务的基本状态')]),e._v(" "),_("p",[_("img",{staticStyle:{width:"100%","max-width":"800px","max-height":"600px","margin-left":"auto","margin-right":"auto",display:"block"},attrs:{src:"https://user-images.githubusercontent.com/46039728/149951720-707f1ee8-32ee-4fde-9252-048caebd232e.png"}}),e._v(" "),_("br")]),e._v(" "),_("p",[e._v("为了提高查询性能，IOTDB 对 ChunkMetaData 和 TsFileMetaData 进行了缓存。用户可以使用 MXBean\n，展开侧边栏"),_("code",[e._v("org.apache.iotdb.db.service")]),e._v("查看缓存命中率：")]),e._v(" "),_("img",{staticStyle:{width:"100%","max-width":"800px","max-height":"600px","margin-left":"auto","margin-right":"auto",display:"block"},attrs:{src:"https://user-images.githubusercontent.com/19167280/112426760-73e3da80-8d73-11eb-9a8f-9232d1f2033b.png"}}),e._v(" "),_("h3",{attrs:{id:"_5-2-使用-prometheus-方式"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-使用-prometheus-方式"}},[e._v("#")]),e._v(" 5.2. 使用 Prometheus 方式")]),e._v(" "),_("h4",{attrs:{id:"_5-2-1-监控指标的-prometheus-映射关系"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-1-监控指标的-prometheus-映射关系"}},[e._v("#")]),e._v(" 5.2.1. 监控指标的 Prometheus 映射关系")]),e._v(" "),_("blockquote",[_("p",[e._v("对于 Metric Name 为 name, Tags 为 K1=V1, ..., Kn=Vn 的监控指标有如下映射，其中 value 为具体值")])]),e._v(" "),_("table",[_("thead",[_("tr",[_("th",[e._v("监控指标类型")]),e._v(" "),_("th",[e._v("映射关系")])])]),e._v(" "),_("tbody",[_("tr",[_("td",[e._v("Counter")]),e._v(" "),_("td",[e._v('name_total{cluster="clusterName", nodeType="nodeType", nodeId="nodeId",k1="V1" , ..., Kn="Vn"} value')])]),e._v(" "),_("tr",[_("td",[e._v("AutoGauge、Gauge")]),e._v(" "),_("td",[e._v('name{cluster="clusterName", nodeType="nodeType", nodeId="nodeId",k1="V1" , ..., Kn="Vn"} value')])]),e._v(" "),_("tr",[_("td",[e._v("Histogram")]),e._v(" "),_("td",[e._v('name_max{cluster="clusterName", nodeType="nodeType", nodeId="nodeId",k1="V1" , ..., Kn="Vn"} value '),_("br"),e._v(' name_sum{cluster="clusterName", nodeType="nodeType", nodeId="nodeId",k1="V1" , ..., Kn="Vn"} value '),_("br"),e._v(' name_count{cluster="clusterName", nodeType="nodeType", nodeId="nodeId",k1="V1" , ..., Kn="Vn"} value '),_("br"),e._v(' name{cluster="clusterName", nodeType="nodeType", nodeId="nodeId",k1="V1" , ..., Kn="Vn", quantile="0.0"} value '),_("br"),e._v(' name{cluster="clusterName", nodeType="nodeType", nodeId="nodeId",k1="V1" , ..., Kn="Vn", quantile="0.5"} value '),_("br"),e._v(' name{cluster="clusterName", nodeType="nodeType", nodeId="nodeId",k1="V1" , ..., Kn="Vn", quantile="0.75"} value '),_("br"),e._v(' name{cluster="clusterName", nodeType="nodeType", nodeId="nodeId",k1="V1" , ..., Kn="Vn", quantile="0.99"} value '),_("br"),e._v(' name{cluster="clusterName", nodeType="nodeType", nodeId="nodeId",k1="V1" , ..., Kn="Vn", quantile="0.999"} value')])]),e._v(" "),_("tr",[_("td",[e._v("Rate")]),e._v(" "),_("td",[e._v('name_total{cluster="clusterName", nodeType="nodeType", nodeId="nodeId",k1="V1" , ..., Kn="Vn"} value '),_("br"),e._v(' name_total{cluster="clusterName", nodeType="nodeType", nodeId="nodeId",k1="V1" , ..., Kn="Vn", rate="m1"} value '),_("br"),e._v(' name_total{cluster="clusterName", nodeType="nodeType", nodeId="nodeId",k1="V1" , ..., Kn="Vn", rate="m5"} value  '),_("br"),e._v(' name_total{cluster="clusterName", nodeType="nodeType", nodeId="nodeId",k1="V1" , ..., Kn="Vn", rate="m15"} value '),_("br"),e._v(' name_total{cluster="clusterName", nodeType="nodeType", nodeId="nodeId",k1="V1" , ..., Kn="Vn", rate="mean"} value')])]),e._v(" "),_("tr",[_("td",[e._v("Timer")]),e._v(" "),_("td",[e._v('name_seconds_max{cluster="clusterName", nodeType="nodeType", nodeId="nodeId",k1="V1" , ..., Kn="Vn"} value '),_("br"),e._v(' name_seconds_sum{cluster="clusterName", nodeType="nodeType", nodeId="nodeId",k1="V1" , ..., Kn="Vn"} value '),_("br"),e._v(' name_seconds_count{cluster="clusterName", nodeType="nodeType", nodeId="nodeId",k1="V1" , ..., Kn="Vn"} value '),_("br"),e._v(' name_seconds{cluster="clusterName", nodeType="nodeType", nodeId="nodeId",k1="V1" , ..., Kn="Vn", quantile="0.0"} value '),_("br"),e._v(' name_seconds{cluster="clusterName", nodeType="nodeType", nodeId="nodeId",k1="V1" , ..., Kn="Vn", quantile="0.5"} value '),_("br"),e._v(' name_seconds{cluster="clusterName", nodeType="nodeType", nodeId="nodeId",k1="V1" , ..., Kn="Vn", quantile="0.75"} value '),_("br"),e._v(' name_seconds{cluster="clusterName", nodeType="nodeType", nodeId="nodeId",k1="V1" , ..., Kn="Vn", quantile="0.99"} value '),_("br"),e._v(' name_seconds{cluster="clusterName", nodeType="nodeType", nodeId="nodeId",k1="V1" , ..., Kn="Vn", quantile="0.999"} value')])])])]),e._v(" "),_("h4",{attrs:{id:"_5-2-2-修改配置文件"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-2-修改配置文件"}},[e._v("#")]),e._v(" 5.2.2. 修改配置文件")]),e._v(" "),_("ol",[_("li",[e._v("以 DataNode 为例，修改 iotdb-datanode.properties 配置文件如下：")])]),e._v(" "),_("div",{staticClass:"language-properties line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-properties"}},[_("code",[_("span",{pre:!0,attrs:{class:"token key attr-name"}},[e._v("dn_metric_reporter_list")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),_("span",{pre:!0,attrs:{class:"token value attr-value"}},[e._v("PROMETHEUS")]),e._v("\n"),_("span",{pre:!0,attrs:{class:"token key attr-name"}},[e._v("dn_metric_level")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),_("span",{pre:!0,attrs:{class:"token value attr-value"}},[e._v("CORE")]),e._v("\n"),_("span",{pre:!0,attrs:{class:"token key attr-name"}},[e._v("dn_metric_prometheus_reporter_port")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),_("span",{pre:!0,attrs:{class:"token value attr-value"}},[e._v("9091")]),e._v("\n")])]),e._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[e._v("1")]),_("br"),_("span",{staticClass:"line-number"},[e._v("2")]),_("br"),_("span",{staticClass:"line-number"},[e._v("3")]),_("br")])]),_("ol",{attrs:{start:"2"}},[_("li",[_("p",[e._v("启动 IoTDB DataNode")])]),e._v(" "),_("li",[_("p",[e._v("打开浏览器或者用"),_("code",[e._v("curl")]),e._v(" 访问 "),_("code",[e._v("http://servier_ip:9091/metrics")]),e._v(", 就能得到如下 metric 数据：")])])]),e._v(" "),_("div",{staticClass:"language- line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[e._v('...\n# HELP file_count\n# TYPE file_count gauge\nfile_count{name="wal",} 0.0\nfile_count{name="unseq",} 0.0\nfile_count{name="seq",} 2.0\n...\n')])]),e._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[e._v("1")]),_("br"),_("span",{staticClass:"line-number"},[e._v("2")]),_("br"),_("span",{staticClass:"line-number"},[e._v("3")]),_("br"),_("span",{staticClass:"line-number"},[e._v("4")]),_("br"),_("span",{staticClass:"line-number"},[e._v("5")]),_("br"),_("span",{staticClass:"line-number"},[e._v("6")]),_("br"),_("span",{staticClass:"line-number"},[e._v("7")]),_("br")])]),_("h4",{attrs:{id:"_5-2-3-prometheus-grafana"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-3-prometheus-grafana"}},[e._v("#")]),e._v(" 5.2.3. Prometheus + Grafana")]),e._v(" "),_("p",[e._v("如上所示，IoTDB 对外暴露出标准的 Prometheus 格式的监控指标数据，可以使用 Prometheus 采集并存储监控指标，使用 Grafana\n可视化监控指标。")]),e._v(" "),_("p",[e._v("IoTDB、Prometheus、Grafana三者的关系如下图所示:")]),e._v(" "),_("p",[_("img",{attrs:{src:"https://raw.githubusercontent.com/apache/iotdb-bin-resources/main/docs/UserGuide/System%20Tools/Metrics/iotdb_prometheus_grafana.png",alt:"iotdb_prometheus_grafana"}})]),e._v(" "),_("ol",[_("li",[e._v("IoTDB在运行过程中持续收集监控指标数据。")]),e._v(" "),_("li",[e._v("Prometheus以固定的间隔（可配置）从IoTDB的HTTP接口拉取监控指标数据。")]),e._v(" "),_("li",[e._v("Prometheus将拉取到的监控指标数据存储到自己的TSDB中。")]),e._v(" "),_("li",[e._v("Grafana以固定的间隔（可配置）从Prometheus查询监控指标数据并绘图展示。")])]),e._v(" "),_("p",[e._v("从交互流程可以看出，我们需要做一些额外的工作来部署和配置Prometheus和Grafana。")]),e._v(" "),_("p",[e._v("比如，你可以对Prometheus进行如下的配置（部分参数可以自行调整）来从IoTDB获取监控数据")]),e._v(" "),_("div",{staticClass:"language-yaml line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-yaml"}},[_("code",[_("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("job_name")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" pull"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("metrics\n"),_("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("honor_labels")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),_("span",{pre:!0,attrs:{class:"token boolean important"}},[e._v("true")]),e._v("\n"),_("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("honor_timestamps")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),_("span",{pre:!0,attrs:{class:"token boolean important"}},[e._v("true")]),e._v("\n"),_("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("scrape_interval")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" 15s\n"),_("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("scrape_timeout")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" 10s\n"),_("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("metrics_path")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" /metrics\n"),_("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("scheme")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" http\n"),_("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("follow_redirects")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),_("span",{pre:!0,attrs:{class:"token boolean important"}},[e._v("true")]),e._v("\n"),_("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("static_configs")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n  "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" "),_("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("targets")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n      "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" localhost"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),_("span",{pre:!0,attrs:{class:"token number"}},[e._v("9091")]),e._v("\n")])]),e._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[e._v("1")]),_("br"),_("span",{staticClass:"line-number"},[e._v("2")]),_("br"),_("span",{staticClass:"line-number"},[e._v("3")]),_("br"),_("span",{staticClass:"line-number"},[e._v("4")]),_("br"),_("span",{staticClass:"line-number"},[e._v("5")]),_("br"),_("span",{staticClass:"line-number"},[e._v("6")]),_("br"),_("span",{staticClass:"line-number"},[e._v("7")]),_("br"),_("span",{staticClass:"line-number"},[e._v("8")]),_("br"),_("span",{staticClass:"line-number"},[e._v("9")]),_("br"),_("span",{staticClass:"line-number"},[e._v("10")]),_("br"),_("span",{staticClass:"line-number"},[e._v("11")]),_("br")])]),_("p",[e._v("更多细节可以参考下面的文档：")]),e._v(" "),_("p",[_("a",{attrs:{href:"https://prometheus.io/docs/prometheus/latest/getting_started/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Prometheus安装使用文档"),_("OutboundLink")],1)]),e._v(" "),_("p",[_("a",{attrs:{href:"https://prometheus.io/docs/prometheus/latest/configuration/configuration/#scrape_config",target:"_blank",rel:"noopener noreferrer"}},[e._v("Prometheus从HTTP接口拉取metrics数据的配置说明"),_("OutboundLink")],1)]),e._v(" "),_("p",[_("a",{attrs:{href:"https://grafana.com/docs/grafana/latest/getting-started/getting-started/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Grafana安装使用文档"),_("OutboundLink")],1)]),e._v(" "),_("p",[_("a",{attrs:{href:"https://prometheus.io/docs/visualization/grafana/#grafana-support-for-prometheus",target:"_blank",rel:"noopener noreferrer"}},[e._v("Grafana从Prometheus查询数据并绘图的文档"),_("OutboundLink")],1)]),e._v(" "),_("h4",{attrs:{id:"_5-2-4-apache-iotdb-dashboard"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-4-apache-iotdb-dashboard"}},[e._v("#")]),e._v(" 5.2.4. Apache IoTDB Dashboard")]),e._v(" "),_("p",[e._v("我们提供了Apache IoTDB Dashboard，在Grafana中显示的效果图如下所示：")]),e._v(" "),_("p",[_("img",{attrs:{src:"https://gitbox.apache.org/repos/asf?p=iotdb-bin-resources.git;a=blob_plain;f=docs/UserGuide/System%20Tools/Metrics/dashboard.png",alt:"Apache IoTDB Dashboard"}})]),e._v(" "),_("h5",{attrs:{id:"_5-2-4-1-如何获取-apache-iotdb-dashboard"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-4-1-如何获取-apache-iotdb-dashboard"}},[e._v("#")]),e._v(" 5.2.4.1. 如何获取 Apache IoTDB Dashboard？")]),e._v(" "),_("ol",[_("li",[e._v("您可以在 GitHub 上获取到Dashboard的json文件。\n"),_("ol",[_("li",[_("a",{attrs:{href:"https://github.com/apache/iotdb/tree/master/docs/UserGuide/Monitor-Alert/Apache-IoTDB-ConfigNode-Dashboard.json"}},[e._v("\nApache IoTDB ConfigNode Dashboard")])]),e._v(" "),_("li",[_("a",{attrs:{href:"https://github.com/apache/iotdb/tree/master/docs/UserGuide/Monitor-Alert/Apache-IoTDB-DataNode-Dashboard.json"}},[e._v("\nApache IoTDB DataNode Dashboard")])]),e._v(" "),_("li",[_("a",{attrs:{href:"https://github.com/apache/iotdb/tree/master/docs/UserGuide/Monitor-Alert/Apache-IoTDB-Performance-Overview-Dashboard.json"}},[e._v("Apache IoTDB Performance Overview Dashboard")])])])]),e._v(" "),_("li",[e._v("您可以访问"),_("a",{attrs:{href:"https://grafana.com/grafana/dashboards/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Grafana Dashboard官网"),_("OutboundLink")],1),e._v("搜索"),_("code",[e._v("Apache IoTDB Dashboard")]),e._v("并使用")])]),e._v(" "),_("p",[e._v("在创建Grafana时，您可以选择Import刚刚下载的json文件，并为Apache IoTDB Dashboard选择对应目标数据源。")]),e._v(" "),_("h5",{attrs:{id:"_5-2-4-2-apache-iotdb-confignode-dashboard-说明"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-4-2-apache-iotdb-confignode-dashboard-说明"}},[e._v("#")]),e._v(" 5.2.4.2. Apache IoTDB ConfigNode Dashboard 说明")]),e._v(" "),_("blockquote",[_("p",[e._v("除特殊说明的监控项以外，以下监控项均保证在Important级别的监控框架中可用")])]),e._v(" "),_("ul",[_("li",[_("code",[e._v("Overview")]),e._v("：系统概述\n"),_("ul",[_("li",[_("code",[e._v("Registered Node")]),e._v("：注册的ConfigNode/DataNode个数")]),e._v(" "),_("li",[_("code",[e._v("DataNode")]),e._v("(仅在 ConfigNode Leader 侧可见)：集群DataNode的存活状态，包括Online和Unknown两种。")]),e._v(" "),_("li",[_("code",[e._v("ConfigNode")]),e._v("(仅在 ConfigNode Leader 侧可见)：集群ConfigNode的存活状态，包括Online和Unknown两种。")]),e._v(" "),_("li",[_("code",[e._v("The Status Of Node")]),e._v("：集群具体节点运行状态，包括Online和Unkown两种。")])])]),e._v(" "),_("li",[_("code",[e._v("Region")]),e._v("：Region概述\n"),_("ul",[_("li",[_("code",[e._v("Region Number")]),e._v("：Region个数，包括总个数，DataRegion 个数和 SchemaRegion 个数。")]),e._v(" "),_("li",[_("code",[e._v("Leadership distribution")]),e._v("：集群 Leader 分布情况，指每个节点上对应 Region 的 Leader 的个数。")]),e._v(" "),_("li",[_("code",[e._v("Total Region in Node")]),e._v("：不同 Node 的 Region 总数量。")]),e._v(" "),_("li",[_("code",[e._v("Region in Node")]),e._v("：不同 Node 的 SchemaRegion/DataRegion 数量。")]),e._v(" "),_("li",[_("code",[e._v("Region in Database")]),e._v("（Normal级别）：不同 Database 的 Region 数量，包括 SchemaRegion、DataRegion。")]),e._v(" "),_("li",[_("code",[e._v("Slot in Database")]),e._v("(Normal级别)：不同 Database 的Slot数量，包括 DataSlot 数量和 SchemaSlot 数量。")])])]),e._v(" "),_("li",[_("code",[e._v("System")]),e._v("：系统\n"),_("ul",[_("li",[_("code",[e._v("CPU Core")]),e._v("：系统 CPU 核数情况。")]),e._v(" "),_("li",[_("code",[e._v("CPU Load")]),e._v("：系统 CPU 负载情况、进度 CPU 负载情况。")]),e._v(" "),_("li",[_("code",[e._v("CPU Time Per Minute")]),e._v("：进程平均每分钟占用系统 CPU 时间，注意：多核会导致该值超过1分钟。")]),e._v(" "),_("li",[_("code",[e._v("System Memory")]),e._v("：系统物理内存大小、系统使用物理内存大小、虚拟机提交的内存大小。")]),e._v(" "),_("li",[_("code",[e._v("System Swap Size")]),e._v("：系统交换区总大小、系统交换区使用大小。")]),e._v(" "),_("li",[_("code",[e._v("Process Memory")]),e._v("：IoTDB 进程最大内存总大小、IoTDB 进程总内存大小、IoTDB 进程使用内存大小。")]),e._v(" "),_("li",[_("code",[e._v("The Number of GC Per Minute")]),e._v("：平均每分钟 GC 次数。")]),e._v(" "),_("li",[_("code",[e._v("The Time Consumed Of GC Per Minute")]),e._v("：平均每分钟 GC 耗时。")]),e._v(" "),_("li",[_("code",[e._v("The Number Of Java Thread")]),e._v("：IoTDB 进程的不同状态的线程数。")]),e._v(" "),_("li",[_("code",[e._v("Heap Memory")]),e._v("：IoTDB 进程的堆内存")]),e._v(" "),_("li",[_("code",[e._v("Off Heap Memory")]),e._v("：IoTDB 进程的堆外内存")]),e._v(" "),_("li",[_("code",[e._v("Log Number Per Minute")]),e._v("：IoTDB 进程平均每分钟日志数")]),e._v(" "),_("li",[_("code",[e._v("The Time Consumed of Compliation Per Minute")]),e._v("：平均每分钟编译耗时")]),e._v(" "),_("li",[_("code",[e._v("The Number Of Class")]),e._v("：JVM 加载和卸载的类数量")])])])]),e._v(" "),_("h5",{attrs:{id:"_5-2-4-3-apache-iotdb-datanode-dashboard-说明"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-4-3-apache-iotdb-datanode-dashboard-说明"}},[e._v("#")]),e._v(" 5.2.4.3. Apache IoTDB DataNode Dashboard 说明")]),e._v(" "),_("blockquote",[_("p",[e._v("除特殊说明的监控项以外，以下监控项均保证在Important级别的监控框架中可用。")])]),e._v(" "),_("ul",[_("li",[_("code",[e._v("Overview")]),e._v("：系统概述\n"),_("ul",[_("li",[_("code",[e._v("The Number Of Entity")]),e._v("：实体数量，包含时间序列等")]),e._v(" "),_("li",[_("code",[e._v("Write Point Per Minute")]),e._v("：每分钟系统平均写入点数")]),e._v(" "),_("li",[_("code",[e._v("Database Used Memory")]),e._v("：每个 Database 使用的内存大小")])])]),e._v(" "),_("li",[_("code",[e._v("Interface")]),e._v("：接口\n"),_("ul",[_("li",[_("code",[e._v("The Time Consumed Of Operation(50%)")]),e._v("：不同客户端操作耗时的中位数")]),e._v(" "),_("li",[_("code",[e._v("The Time Consumed Of Operation(99%)")]),e._v("：不同客户端操作耗时的P99")]),e._v(" "),_("li",[_("code",[e._v("The Time Consumed Of Operation(99.9%)")]),e._v("：不同客户端操作耗时的P999")]),e._v(" "),_("li",[_("code",[e._v("The OPS of Interface")]),e._v("：系统接口每秒钟访问次数")]),e._v(" "),_("li",[_("code",[e._v("The Time Consumed Of Interface")]),e._v("：系统接口的平均耗时")]),e._v(" "),_("li",[_("code",[e._v("Cache Hit Rate")]),e._v("：缓存命中率")]),e._v(" "),_("li",[_("code",[e._v("Thrift Connection")]),e._v("：建立的 Thrift 连接个数")]),e._v(" "),_("li",[_("code",[e._v("Thrift Active Thread")]),e._v("：建立的活跃的 Thrift 连接的个数")])])]),e._v(" "),_("li",[_("code",[e._v("Engine")]),e._v("：引擎\n"),_("ul",[_("li",[_("code",[e._v("Task Number")]),e._v("：系统中不同状态的任务个数")]),e._v(" "),_("li",[_("code",[e._v("The Time Consumed Of Tasking")]),e._v("：系统中不同状态的任务的耗时")]),e._v(" "),_("li",[_("code",[e._v("Compaction Read And Write Per Minute")]),e._v("：平均每分钟合并读取和写入数据量")]),e._v(" "),_("li",[_("code",[e._v("Compaction R/W Ratio Per Minute")]),e._v("：平均每分钟合并读取和写入数据比")]),e._v(" "),_("li",[_("code",[e._v("Compaction Number Per Minute")]),e._v("：平均每分钟不同类型的合并任务数量")])])]),e._v(" "),_("li",[_("code",[e._v("Query Engine")]),e._v("：查询引擎\n"),_("ul",[_("li",[_("code",[e._v("The time consumed of query plan stages(avg\\50%\\99%\\99.9%)")]),e._v("：查询规划各阶段耗时的平均值\\中位数\\P99\\P999")]),e._v(" "),_("li",[_("code",[e._v("The time consumed of plan dispatch stages(avg\\50%\\99%\\99.9%)")]),e._v("：查询计划分发耗时的平均值\\中位数\\P99\\P999")]),e._v(" "),_("li",[_("code",[e._v("The time consumed of query execution stages(avg\\50%\\99%\\99.9%)")]),e._v("：查询执行各阶段耗时的平均值\\中位数\\P99\\P999")]),e._v(" "),_("li",[_("code",[e._v("The time consumed of operator execution stages(avg\\50%\\99%\\99.9%)")]),e._v("：查询算子耗时的平均值\\中位数\\P99\\P999")]),e._v(" "),_("li",[_("code",[e._v("The time consumed of query aggregation(avg\\50%\\99%\\99.9%)")]),e._v("：查询聚合计算耗时的平均值\\中位数\\P99\\P999")]),e._v(" "),_("li",[_("code",[e._v("The time consumed of query scan(avg\\50%\\99%\\99.9%)")]),e._v("：查询文件/内存耗时的平均值\\中位数\\P99\\P999")]),e._v(" "),_("li",[_("code",[e._v("The usage of query resource(avg\\50%\\99%\\99.9%)")]),e._v("：查询不同资源访问数量的平均值\\中位数\\P99\\P999")]),e._v(" "),_("li",[_("code",[e._v("The time consumed of query data exchange(avg\\50%\\99%\\99.9%)")]),e._v("：查询数据传输耗时的平均值\\中位数\\P99\\P999")]),e._v(" "),_("li",[_("code",[e._v("The count of data exchange(avg)")]),e._v("：查询数据传输平均次数")]),e._v(" "),_("li",[_("code",[e._v("The count of data exchange")]),e._v("：查询数据传输次数的分布情况（最小值、下四分位数、中位数、上四分位数、最大值）")]),e._v(" "),_("li",[_("code",[e._v("The number of query queue")]),e._v("：查询不同队列的大小")]),e._v(" "),_("li",[_("code",[e._v("The time consumed of query schedule time(avg\\50%\\99%\\99.9%)")]),e._v("：查询任务调度耗时的平均值\\中位数\\P99\\P999")])])]),e._v(" "),_("li",[_("code",[e._v("Query Interface")]),e._v("：查询文件/耗时的具体耗时情况\n"),_("ul",[_("li",[_("code",[e._v("The time consumed of load timesereis metadata(avg\\50%\\99%\\99.9%)")]),e._v("：查询从不同来源加载时间序列元数据耗时的平均值\\中位数\\P99\\P999")]),e._v(" "),_("li",[_("code",[e._v("The time consumed of read timeseries metadata(avg\\50%\\99%\\99.9%)")]),e._v("：查询从不同来源读取时间序列元数据耗时的平均值\\中位数\\P99\\P999")]),e._v(" "),_("li",[_("code",[e._v("The time consumed of timeseries metadata modiftication(avg\\50%\\99%\\99.9%)")]),e._v("：查询修改不同类型时间序列元数据耗时的平均值\\中位数\\P99\\P999")]),e._v(" "),_("li",[_("code",[e._v("The time consumed of load chunk metadata list(avg\\50%\\99%\\99.9%)")]),e._v("：查询加载不同类型Chunk元数据耗时的平均值\\中位数\\P99\\P999")]),e._v(" "),_("li",[_("code",[e._v("The time consumed of chunk metadata modification(avg\\50%\\99%\\99.9%)")]),e._v("：查询修改不同类型Chunk元数据耗时的平均值\\中位数\\P99\\P999")]),e._v(" "),_("li",[_("code",[e._v("The time consumed of chunk metadata filter(avg\\50%\\99%\\99.9%)")]),e._v("：查询过滤不同类型Chunk元数据耗时的平均值\\中位数\\P99\\P999")]),e._v(" "),_("li",[_("code",[e._v("The time consumed of construct chunk reader(avg\\50%\\99%\\99.9%)")]),e._v("：查询构造不同类型Chunk读取器耗时的平均值\\中位数\\P99\\P999")]),e._v(" "),_("li",[_("code",[e._v("The time consumed of read chunk(avg\\50%\\99%\\99.9%)")]),e._v("：查询读取不同类型Chunk耗时的平均值\\中位数\\P99\\P999")]),e._v(" "),_("li",[_("code",[e._v("The time consumed of init chunk reader(avg\\50%\\99%\\99.9%)")]),e._v("：查询初始化不同类型Chunk读取器耗时的平均值\\中位数\\P99\\P999")]),e._v(" "),_("li",[_("code",[e._v("The time consumed of build tsblock from page reader(avg\\50%\\99%\\99.9%)")]),e._v("：查询从PageReader构造TsBlock耗时的平均值\\中位数\\P99\\P999")]),e._v(" "),_("li",[_("code",[e._v("The time consumed of build tsblock from merge reader(avg\\50%\\99%\\99.9%)")]),e._v("：查询从MergeReader构造TsBlock耗时的平均值\\中位数\\P99\\P999")])])]),e._v(" "),_("li",[_("code",[e._v("Query Data Exchange")]),e._v("：查询数据传输的具体耗时情况\n"),_("ul",[_("li",[_("code",[e._v("The time consumed of source handle get tsblock(avg\\50%\\99%\\99.9%)")]),e._v("：查询从不同来源获取TsBlock的耗时的平均值\\中位数\\P99\\P999")]),e._v(" "),_("li",[_("code",[e._v("The time consumed of source handle deserialize tsblock(avg\\50%\\99%\\99.9%)")]),e._v("：查询从不同来源反序列化TsBlock的耗时的平均值\\中位数\\P99\\P999")]),e._v(" "),_("li",[_("code",[e._v("The time consumed of sink handle send tsblock(avg\\50%\\99%\\99.9%)")]),e._v("：查询向不同地方发送TsBlock的耗时的平均值\\中位数\\P99\\P999")]),e._v(" "),_("li",[_("code",[e._v("The time consumed of on acknowledge data block event task(avg\\50%\\99%\\99.9%)")]),e._v("：查询从不同地方确认Block耗时的平均值\\中位数\\P99\\P999")]),e._v(" "),_("li",[_("code",[e._v("The time consumed of get data block event task(avg\\50%\\99%\\99.9%)")]),e._v("：查询从不同地方获取Block耗时的平均值\\中位数\\P99\\P999")])])]),e._v(" "),_("li",[_("code",[e._v("IoTConsensus")]),e._v("：IoT共识协议\n"),_("ul",[_("li",[_("code",[e._v("IoTConsensus Used Memory")]),e._v("：IoT共识层使用的内存大小")]),e._v(" "),_("li",[_("code",[e._v("IoTConsensus Sync Index")]),e._v("：不同的Region的写入Index和同步Index")]),e._v(" "),_("li",[_("code",[e._v("IoTConsensus Overview")]),e._v("：不同节点的同步总差距、总缓存的请求个数")]),e._v(" "),_("li",[_("code",[e._v("The time consumed of different stages(50%)")]),e._v("：不同阶段耗时的中位数")]),e._v(" "),_("li",[_("code",[e._v("The time consumed of different stages(99%)")]),e._v("：不同阶段耗时的P99")]),e._v(" "),_("li",[_("code",[e._v("The time consumed of different stages(99.9%)")]),e._v("：不同阶段耗时的P999")]),e._v(" "),_("li",[_("code",[e._v("IoTConsensus Search Index Rate")]),e._v("：不同region的写入Index的增长速度")]),e._v(" "),_("li",[_("code",[e._v("IoTConsensus Safe Index Rate")]),e._v("：不同region的同步Index的增长速度")]),e._v(" "),_("li",[_("code",[e._v("IoTConsensus LogDispatcher Request Size")]),e._v("：不同的LogDispatcherThread缓存的请求个数")]),e._v(" "),_("li",[_("code",[e._v("Sync Lag")]),e._v("：每个region的同步index差距")]),e._v(" "),_("li",[_("code",[e._v("Min Peer Sync Lag")]),e._v("：每个region的写入index和同步最快的LogDispatcherThread的同步index之间的差距")]),e._v(" "),_("li",[_("code",[e._v("Sync speed diff of Peers")]),e._v("：每个region中同步最快的LogDispatcherThread与同步最慢的LogDispatcherThread之间的同步index差距")])])]),e._v(" "),_("li",[_("code",[e._v("System")]),e._v("：系统\n"),_("ul",[_("li",[_("code",[e._v("CPU Core")]),e._v("：系统 CPU 核数情况。")]),e._v(" "),_("li",[_("code",[e._v("CPU Load")]),e._v("：系统 CPU 负载情况、进度 CPU 负载情况。")]),e._v(" "),_("li",[_("code",[e._v("CPU Time Per Minute")]),e._v("：进程平均每分钟占用系统 CPU 时间，注意：多核会导致该值超过1分钟。")]),e._v(" "),_("li",[_("code",[e._v("System Memory")]),e._v("：系统物理内存大小、系统使用物理内存大小、虚拟机提交的内存大小。")]),e._v(" "),_("li",[_("code",[e._v("System Swap Size")]),e._v("：系统交换区总大小、系统交换区使用大小。")]),e._v(" "),_("li",[_("code",[e._v("Process Memory")]),e._v("：IoTDB 进程最大内存总大小、IoTDB 进程总内存大小、IoTDB 进程使用内存大小。")]),e._v(" "),_("li",[_("code",[e._v("The Size Of File")]),e._v("：IoTDB系统相关的文件大小，包括wal下的文件总大小、seq下的tsfile文件总大小、unseq下的tsfile文件总大小")]),e._v(" "),_("li",[_("code",[e._v("The Number Of File")]),e._v("：IoTDB系统相关的文件个数，包括wal下的文件个数、seq下的tsfile文件个数、unseq下的tsfile文件个数")]),e._v(" "),_("li",[_("code",[e._v("The Space Of Disk")]),e._v("：当前data目录所挂载的磁盘总大小和剩余大小")]),e._v(" "),_("li",[_("code",[e._v("The Number of GC Per Minute")]),e._v("：平均每分钟 GC 次数。")]),e._v(" "),_("li",[_("code",[e._v("The Time Consumed Of GC Per Minute")]),e._v("：平均每分钟 GC 耗时。")]),e._v(" "),_("li",[_("code",[e._v("The Number Of Java Thread")]),e._v("：IoTDB 进程的不同状态的线程数。")]),e._v(" "),_("li",[_("code",[e._v("Heap Memory")]),e._v("：IoTDB 进程的堆内存")]),e._v(" "),_("li",[_("code",[e._v("Off Heap Memory")]),e._v("：IoTDB 进程的堆外内存")]),e._v(" "),_("li",[_("code",[e._v("Log Number Per Minute")]),e._v("：IoTDB 进程平均每分钟日志数")]),e._v(" "),_("li",[_("code",[e._v("The Time Consumed of Compliation Per Minute")]),e._v("：平均每分钟编译耗时")]),e._v(" "),_("li",[_("code",[e._v("The Number Of Class")]),e._v("：JVM 加载和卸载的类数量")])])])]),e._v(" "),_("h5",{attrs:{id:"_5-2-4-4-apache-iotdb-performance-overview-dashboard-说明"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-4-4-apache-iotdb-performance-overview-dashboard-说明"}},[e._v("#")]),e._v(" 5.2.4.4. Apache IoTDB Performance Overview Dashboard 说明")]),e._v(" "),_("blockquote",[_("p",[e._v("除特殊说明的监控项以外，以下监控项均保证在Core级别的监控框架中可用。")])]),e._v(" "),_("ul",[_("li",[_("code",[e._v("Overview")]),e._v("：系统概述\n"),_("ul",[_("li",[_("code",[e._v("CPU Core")]),e._v("：系统 CPU 核数情况。")]),e._v(" "),_("li",[_("code",[e._v("Total Disk Space")]),e._v("：系统 data 目录挂载的磁盘总大小")]),e._v(" "),_("li",[_("code",[e._v("System Memory")]),e._v("：系统内存总大小")]),e._v(" "),_("li",[_("code",[e._v("Swap Memory")]),e._v("：系统交换区内存大小")]),e._v(" "),_("li",[_("code",[e._v("Total Timeseries")]),e._v("：系统当前时间序列总数量")]),e._v(" "),_("li",[_("code",[e._v("Total File Number")]),e._v("：系统文件总数量")]),e._v(" "),_("li",[_("code",[e._v("CPU Load")]),e._v("：系统 CPU 负载率，单位为%")]),e._v(" "),_("li",[_("code",[e._v("Disk")]),e._v("：系统 Disk 占比率，单位为%")]),e._v(" "),_("li",[_("code",[e._v("Process Memory")]),e._v("：进程内存使用率，单位为%")]),e._v(" "),_("li",[_("code",[e._v("System Memory")]),e._v("： 系统内存使用率，单位为%")]),e._v(" "),_("li",[_("code",[e._v("Write Point Per Second")]),e._v("：系统每秒中写入点数")])])]),e._v(" "),_("li",[_("code",[e._v("Performance")]),e._v("：系统性能\n"),_("ul",[_("li",[_("code",[e._v("OPS")]),e._v("：系统接口和RPC每秒钟访问次数")]),e._v(" "),_("li",[_("code",[e._v("OPS Of Stage")]),e._v("：Stage 各部分的每秒钟执行次数")]),e._v(" "),_("li",[_("code",[e._v("OPS Of Schedule")]),e._v("：Schedule 各部分的每秒钟执行次数")]),e._v(" "),_("li",[_("code",[e._v("Time Consumed Of Operation")]),e._v("：不同操作的耗时情况")]),e._v(" "),_("li",[_("code",[e._v("P99 Time Consumed of Interface")]),e._v("：不同接口的 P99 耗时情况")]),e._v(" "),_("li",[_("code",[e._v("Average Time Consumed of Interface")]),e._v("：不同接口的平均耗时情况")]),e._v(" "),_("li",[_("code",[e._v("P99 Time Consumed of Stage")]),e._v("：不同阶段的 P99 耗时情况")]),e._v(" "),_("li",[_("code",[e._v("Average Time Consumed of Stage")]),e._v("：不同阶段的平均耗时情况")]),e._v(" "),_("li",[_("code",[e._v("P99 Time Consumed of Schedule Stage")]),e._v("：不同 Schedule 阶段的 P99 耗时情况")]),e._v(" "),_("li",[_("code",[e._v("Average Time Consumed of Schedule Stage")]),e._v("：不同 Schedule 阶段的平均耗时情况")]),e._v(" "),_("li",[_("code",[e._v("Task Number")]),e._v("：任务个数")]),e._v(" "),_("li",[_("code",[e._v("P99 Time Consumed of Task")]),e._v("：任务的 P99 耗时情况")]),e._v(" "),_("li",[_("code",[e._v("Average Time Consumed of Task")]),e._v("：任务的平均耗时情况")])])]),e._v(" "),_("li",[_("code",[e._v("System")]),e._v("：系统\n"),_("ul",[_("li",[_("code",[e._v("CPU Load")]),e._v("：CPU 负载变化情况")]),e._v(" "),_("li",[_("code",[e._v("CPU Time Per Minute")]),e._v("：CPU 平均每分钟的耗时")]),e._v(" "),_("li",[_("code",[e._v("GC Time Per Minute")]),e._v("：GC 平均每分钟的耗时")]),e._v(" "),_("li",[_("code",[e._v("Heap Memory")]),e._v("：IoTDB 进程的堆内存")]),e._v(" "),_("li",[_("code",[e._v("Off Heap Memory")]),e._v("：IoTDB 进程的堆外内存")]),e._v(" "),_("li",[_("code",[e._v("The Number Of Java Thread")]),e._v("：IoTDB 进程的不同状态的线程数。")]),e._v(" "),_("li",[_("code",[e._v("File Count")]),e._v("：文件数量变化情况")]),e._v(" "),_("li",[_("code",[e._v("File Size")]),e._v("：文件大小变化情况")]),e._v(" "),_("li",[_("code",[e._v("Log Number Per Minute")]),e._v("：日志每分钟变化情况")])])])]),e._v(" "),_("h3",{attrs:{id:"_5-3-使用-iotdb-方式"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-使用-iotdb-方式"}},[e._v("#")]),e._v(" 5.3. 使用 IoTDB 方式")]),e._v(" "),_("h4",{attrs:{id:"_5-3-1-监控指标的-iotdb-映射关系"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-1-监控指标的-iotdb-映射关系"}},[e._v("#")]),e._v(" 5.3.1. 监控指标的 IoTDB 映射关系")]),e._v(" "),_("blockquote",[_("p",[e._v("对于 Metric Name 为 name, Tags 为 K1=V1, ..., Kn=Vn 的监控指标有如下映射，以默认写到 root.__system.metric."),_("code",[e._v("clusterName")]),e._v("."),_("code",[e._v("nodeType")]),e._v("."),_("code",[e._v("nodeId")]),e._v(" 为例")])]),e._v(" "),_("table",[_("thead",[_("tr",[_("th",[e._v("监控指标类型")]),e._v(" "),_("th",[e._v("映射关系")])])]),e._v(" "),_("tbody",[_("tr",[_("td",[e._v("Counter")]),e._v(" "),_("td",[e._v("root.__system.metric."),_("code",[e._v("clusterName")]),e._v("."),_("code",[e._v("nodeType")]),e._v("."),_("code",[e._v("nodeId")]),e._v(".name."),_("code",[e._v("K1=V1")]),e._v("..."),_("code",[e._v("Kn=Vn")]),e._v(".value")])]),e._v(" "),_("tr",[_("td",[e._v("AutoGauge、Gauge")]),e._v(" "),_("td",[e._v("root.__system.metric."),_("code",[e._v("clusterName")]),e._v("."),_("code",[e._v("nodeType")]),e._v("."),_("code",[e._v("nodeId")]),e._v(".name."),_("code",[e._v("K1=V1")]),e._v("..."),_("code",[e._v("Kn=Vn")]),e._v(".value")])]),e._v(" "),_("tr",[_("td",[e._v("Histogram")]),e._v(" "),_("td",[e._v("root.__system.metric."),_("code",[e._v("clusterName")]),e._v("."),_("code",[e._v("nodeType")]),e._v("."),_("code",[e._v("nodeId")]),e._v(".name."),_("code",[e._v("K1=V1")]),e._v("..."),_("code",[e._v("Kn=Vn")]),e._v(".count "),_("br"),e._v(" root.__system.metric."),_("code",[e._v("clusterName")]),e._v("."),_("code",[e._v("nodeType")]),e._v("."),_("code",[e._v("nodeId")]),e._v(".name."),_("code",[e._v("K1=V1")]),e._v("..."),_("code",[e._v("Kn=Vn")]),e._v(".max "),_("br"),e._v(" root.__system.metric."),_("code",[e._v("clusterName")]),e._v("."),_("code",[e._v("nodeType")]),e._v("."),_("code",[e._v("nodeId")]),e._v(".name."),_("code",[e._v("K1=V1")]),e._v("..."),_("code",[e._v("Kn=Vn")]),e._v(".sum "),_("br"),e._v(" root.__system.metric."),_("code",[e._v("clusterName")]),e._v("."),_("code",[e._v("nodeType")]),e._v("."),_("code",[e._v("nodeId")]),e._v(".name."),_("code",[e._v("K1=V1")]),e._v("..."),_("code",[e._v("Kn=Vn")]),e._v(".p0 "),_("br"),e._v(" root.__system.metric."),_("code",[e._v("clusterName")]),e._v("."),_("code",[e._v("nodeType")]),e._v("."),_("code",[e._v("nodeId")]),e._v(".name."),_("code",[e._v("K1=V1")]),e._v("..."),_("code",[e._v("Kn=Vn")]),e._v(".p50 "),_("br"),e._v(" root.__system.metric."),_("code",[e._v("clusterName")]),e._v("."),_("code",[e._v("nodeType")]),e._v("."),_("code",[e._v("nodeId")]),e._v(".name."),_("code",[e._v("K1=V1")]),e._v("..."),_("code",[e._v("Kn=Vn")]),e._v(".p75 "),_("br"),e._v(" root.__system.metric."),_("code",[e._v("clusterName")]),e._v("."),_("code",[e._v("nodeType")]),e._v("."),_("code",[e._v("nodeId")]),e._v(".name."),_("code",[e._v("K1=V1")]),e._v("..."),_("code",[e._v("Kn=Vn")]),e._v(".p99 "),_("br"),e._v(" root.__system.metric."),_("code",[e._v("clusterName")]),e._v("."),_("code",[e._v("nodeType")]),e._v("."),_("code",[e._v("nodeId")]),e._v(".name."),_("code",[e._v("K1=V1")]),e._v("..."),_("code",[e._v("Kn=Vn")]),e._v(".p999")])]),e._v(" "),_("tr",[_("td",[e._v("Rate")]),e._v(" "),_("td",[e._v("root.__system.metric."),_("code",[e._v("clusterName")]),e._v("."),_("code",[e._v("nodeType")]),e._v("."),_("code",[e._v("nodeId")]),e._v(".name."),_("code",[e._v("K1=V1")]),e._v("..."),_("code",[e._v("Kn=Vn")]),e._v(".count "),_("br"),e._v(" root.__system.metric."),_("code",[e._v("clusterName")]),e._v("."),_("code",[e._v("nodeType")]),e._v("."),_("code",[e._v("nodeId")]),e._v(".name."),_("code",[e._v("K1=V1")]),e._v("..."),_("code",[e._v("Kn=Vn")]),e._v(".mean "),_("br"),e._v(" root.__system.metric."),_("code",[e._v("clusterName")]),e._v("."),_("code",[e._v("nodeType")]),e._v("."),_("code",[e._v("nodeId")]),e._v(".name."),_("code",[e._v("K1=V1")]),e._v("..."),_("code",[e._v("Kn=Vn")]),e._v(".m1 "),_("br"),e._v(" root.__system.metric."),_("code",[e._v("clusterName")]),e._v("."),_("code",[e._v("nodeType")]),e._v("."),_("code",[e._v("nodeId")]),e._v(".name."),_("code",[e._v("K1=V1")]),e._v("..."),_("code",[e._v("Kn=Vn")]),e._v(".m5 "),_("br"),e._v(" root.__system.metric."),_("code",[e._v("clusterName")]),e._v("."),_("code",[e._v("nodeType")]),e._v("."),_("code",[e._v("nodeId")]),e._v(".name."),_("code",[e._v("K1=V1")]),e._v("..."),_("code",[e._v("Kn=Vn")]),e._v(".m15")])]),e._v(" "),_("tr",[_("td",[e._v("Timer")]),e._v(" "),_("td",[e._v("root.__system.metric."),_("code",[e._v("clusterName")]),e._v("."),_("code",[e._v("nodeType")]),e._v("."),_("code",[e._v("nodeId")]),e._v(".name."),_("code",[e._v("K1=V1")]),e._v("..."),_("code",[e._v("Kn=Vn")]),e._v(".count "),_("br"),e._v(" root.__system.metric."),_("code",[e._v("clusterName")]),e._v("."),_("code",[e._v("nodeType")]),e._v("."),_("code",[e._v("nodeId")]),e._v(".name."),_("code",[e._v("K1=V1")]),e._v("..."),_("code",[e._v("Kn=Vn")]),e._v(".max "),_("br"),e._v(" root.__system.metric."),_("code",[e._v("clusterName")]),e._v("."),_("code",[e._v("nodeType")]),e._v("."),_("code",[e._v("nodeId")]),e._v(".name."),_("code",[e._v("K1=V1")]),e._v("..."),_("code",[e._v("Kn=Vn")]),e._v(".mean "),_("br"),e._v(" root.__system.metric."),_("code",[e._v("clusterName")]),e._v("."),_("code",[e._v("nodeType")]),e._v("."),_("code",[e._v("nodeId")]),e._v(".name."),_("code",[e._v("K1=V1")]),e._v("..."),_("code",[e._v("Kn=Vn")]),e._v(".sum "),_("br"),e._v(" root.__system.metric."),_("code",[e._v("clusterName")]),e._v("."),_("code",[e._v("nodeType")]),e._v("."),_("code",[e._v("nodeId")]),e._v(".name."),_("code",[e._v("K1=V1")]),e._v("..."),_("code",[e._v("Kn=Vn")]),e._v(".p0 "),_("br"),e._v(" root.__system.metric."),_("code",[e._v("clusterName")]),e._v("."),_("code",[e._v("nodeType")]),e._v("."),_("code",[e._v("nodeId")]),e._v(".name."),_("code",[e._v("K1=V1")]),e._v("..."),_("code",[e._v("Kn=Vn")]),e._v(".p50 "),_("br"),e._v(" root.__system.metric."),_("code",[e._v("clusterName")]),e._v("."),_("code",[e._v("nodeType")]),e._v("."),_("code",[e._v("nodeId")]),e._v(".name."),_("code",[e._v("K1=V1")]),e._v("..."),_("code",[e._v("Kn=Vn")]),e._v(".p75 "),_("br"),e._v(" root.__system.metric."),_("code",[e._v("clusterName")]),e._v("."),_("code",[e._v("nodeType")]),e._v("."),_("code",[e._v("nodeId")]),e._v(".name."),_("code",[e._v("K1=V1")]),e._v("..."),_("code",[e._v("Kn=Vn")]),e._v(".p99 "),_("br"),e._v(" root.__system.metric."),_("code",[e._v("clusterName")]),e._v("."),_("code",[e._v("nodeType")]),e._v("."),_("code",[e._v("nodeId")]),e._v(".name."),_("code",[e._v("K1=V1")]),e._v("..."),_("code",[e._v("Kn=Vn")]),e._v(".p999   "),_("br"),e._v(" root.__system.metric."),_("code",[e._v("clusterName")]),e._v("."),_("code",[e._v("nodeType")]),e._v("."),_("code",[e._v("nodeId")]),e._v(".name."),_("code",[e._v("K1=V1")]),e._v("..."),_("code",[e._v("Kn=Vn")]),e._v(".m1 "),_("br"),e._v(" root.__system.metric."),_("code",[e._v("clusterName")]),e._v("."),_("code",[e._v("nodeType")]),e._v("."),_("code",[e._v("nodeId")]),e._v(".name."),_("code",[e._v("K1=V1")]),e._v("..."),_("code",[e._v("Kn=Vn")]),e._v(".m5 "),_("br"),e._v(" root.__system.metric."),_("code",[e._v("clusterName")]),e._v("."),_("code",[e._v("nodeType")]),e._v("."),_("code",[e._v("nodeId")]),e._v(".name."),_("code",[e._v("K1=V1")]),e._v("..."),_("code",[e._v("Kn=Vn")]),e._v(".m15")])])])]),e._v(" "),_("h4",{attrs:{id:"_5-3-2-获取监控指标"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-2-获取监控指标"}},[e._v("#")]),e._v(" 5.3.2. 获取监控指标")]),e._v(" "),_("p",[e._v("根据如上的映射关系，可以构成相关的 IoTDB 查询语句获取监控指标")])])}),[],!1,null,null,null);_.default=a.exports}}]);