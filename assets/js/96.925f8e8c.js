(window.webpackJsonp=window.webpackJsonp||[]).push([[96],{501:function(t,s,a){"use strict";a.r(s);var e=a(19),n=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"aggregate-functions"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#aggregate-functions"}},[t._v("#")]),t._v(" Aggregate Functions")]),t._v(" "),s("p",[t._v("Aggregate functions are many-to-one functions. They perform aggregate calculations on a set of values, resulting in a single aggregated result.")]),t._v(" "),s("p",[t._v("All aggregate functions except "),s("code",[t._v("COUNT()")]),t._v(", "),s("code",[t._v("COUNT_IF()")]),t._v(" ignore null values and return null when there are no input rows or all values are null. For example, "),s("code",[t._v("SUM()")]),t._v(" returns null instead of zero, and "),s("code",[t._v("AVG()")]),t._v(" does not include null values in the count.")]),t._v(" "),s("p",[t._v("The aggregate functions supported by IoTDB are as follows:")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Function Name")]),t._v(" "),s("th",[t._v("Function Description")]),t._v(" "),s("th",[t._v("Allowed Input Data Types")]),t._v(" "),s("th",[t._v("Output Data Types")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("SUM")]),t._v(" "),s("td",[t._v("Summation.")]),t._v(" "),s("td",[t._v("INT32 INT64 FLOAT DOUBLE")]),t._v(" "),s("td",[t._v("DOUBLE")])]),t._v(" "),s("tr",[s("td",[t._v("COUNT")]),t._v(" "),s("td",[t._v("Counts the number of data points.")]),t._v(" "),s("td",[t._v("All types")]),t._v(" "),s("td",[t._v("INT")])]),t._v(" "),s("tr",[s("td",[t._v("AVG")]),t._v(" "),s("td",[t._v("Average.")]),t._v(" "),s("td",[t._v("INT32 INT64 FLOAT DOUBLE")]),t._v(" "),s("td",[t._v("DOUBLE")])]),t._v(" "),s("tr",[s("td",[t._v("EXTREME")]),t._v(" "),s("td",[t._v("Finds the value with the largest absolute value. Returns a positive value if the maximum absolute value of positive and negative values is equal.")]),t._v(" "),s("td",[t._v("INT32 INT64 FLOAT DOUBLE")]),t._v(" "),s("td",[t._v("Consistent with the input data type")])]),t._v(" "),s("tr",[s("td",[t._v("MAX_VALUE")]),t._v(" "),s("td",[t._v("Find the maximum value.")]),t._v(" "),s("td",[t._v("INT32 INT64 FLOAT DOUBLE")]),t._v(" "),s("td",[t._v("Consistent with the input data type")])]),t._v(" "),s("tr",[s("td",[t._v("MIN_VALUE")]),t._v(" "),s("td",[t._v("Find the minimum value.")]),t._v(" "),s("td",[t._v("INT32 INT64 FLOAT DOUBLE")]),t._v(" "),s("td",[t._v("Consistent with the input data type")])]),t._v(" "),s("tr",[s("td",[t._v("FIRST_VALUE")]),t._v(" "),s("td",[t._v("Find the value with the smallest timestamp.")]),t._v(" "),s("td",[t._v("All data types")]),t._v(" "),s("td",[t._v("Consistent with input data type")])]),t._v(" "),s("tr",[s("td",[t._v("LAST_VALUE")]),t._v(" "),s("td",[t._v("Find the value with the largest timestamp.")]),t._v(" "),s("td",[t._v("All data types")]),t._v(" "),s("td",[t._v("Consistent with input data type")])]),t._v(" "),s("tr",[s("td",[t._v("MAX_TIME")]),t._v(" "),s("td",[t._v("Find the maximum timestamp.")]),t._v(" "),s("td",[t._v("All data Types")]),t._v(" "),s("td",[t._v("Timestamp")])]),t._v(" "),s("tr",[s("td",[t._v("MIN_TIME")]),t._v(" "),s("td",[t._v("Find the minimum timestamp.")]),t._v(" "),s("td",[t._v("All data Types")]),t._v(" "),s("td",[t._v("Timestamp")])]),t._v(" "),s("tr",[s("td",[t._v("COUNT_IF")]),t._v(" "),s("td",[t._v("Find the number of data points that continuously meet a given condition and the number of data points that meet the condition (represented by keep) meet the specified threshold.")]),t._v(" "),s("td",[t._v("BOOLEAN")]),t._v(" "),s("td",[s("code",[t._v("[keep >=/>/=/!=/</<=]threshold")]),t._v("：The specified threshold or threshold condition, it is equivalent to "),s("code",[t._v("keep >= threshold")]),t._v(" if "),s("code",[t._v("threshold")]),t._v(" is used alone, type of "),s("code",[t._v("threshold")]),t._v(" is "),s("code",[t._v("INT64")]),s("br"),t._v(" "),s("code",[t._v("ignoreNull")]),t._v("：Optional, default value is "),s("code",[t._v("true")]),t._v("；If the value is "),s("code",[t._v("true")]),t._v(", null values are ignored, it means that if there is a null value in the middle, the value is ignored without interrupting the continuity. If the value is "),s("code",[t._v("true")]),t._v(", null values are not ignored, it means that if there are null values in the middle, continuity will be broken")])])])]),t._v(" "),s("h2",{attrs:{id:"count"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#count"}},[t._v("#")]),t._v(" COUNT")]),t._v(" "),s("h3",{attrs:{id:"example"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#example"}},[t._v("#")]),t._v(" example")]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("count")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("status")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" root"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ln"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("wf01"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("wt01"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("Result:")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("+-------------------------------+\n|count(root.ln.wf01.wt01.status)|\n+-------------------------------+\n|                          10080|\n+-------------------------------+\nTotal line number = 1\nIt costs 0.016s\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("h2",{attrs:{id:"count-if"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#count-if"}},[t._v("#")]),t._v(" COUNT_IF")]),t._v(" "),s("h3",{attrs:{id:"grammar"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#grammar"}},[t._v("#")]),t._v(" Grammar")]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[t._v("count_if"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("predicate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("keep "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("threshold"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ignoreNull'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'true/false'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("predicate: legal expression with "),s("code",[t._v("BOOLEAN")]),t._v(" return type")]),t._v(" "),s("p",[t._v("use of threshold and ignoreNull can see above table")]),t._v(" "),s("blockquote",[s("p",[t._v("Note: count_if is not supported to use with SlidingWindow in group by time now")])]),t._v(" "),s("h3",{attrs:{id:"example-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#example-2"}},[t._v("#")]),t._v(" example")]),t._v(" "),s("h4",{attrs:{id:"raw-data"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#raw-data"}},[t._v("#")]),t._v(" raw data")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("+-----------------------------+-------------+-------------+\n|                         Time|root.db.d1.s1|root.db.d1.s2|\n+-----------------------------+-------------+-------------+\n|1970-01-01T08:00:00.001+08:00|            0|            0|\n|1970-01-01T08:00:00.002+08:00|         null|            0|\n|1970-01-01T08:00:00.003+08:00|            0|            0|\n|1970-01-01T08:00:00.004+08:00|            0|            0|\n|1970-01-01T08:00:00.005+08:00|            1|            0|\n|1970-01-01T08:00:00.006+08:00|            1|            0|\n|1970-01-01T08:00:00.007+08:00|            1|            0|\n|1970-01-01T08:00:00.008+08:00|            0|            0|\n|1970-01-01T08:00:00.009+08:00|            0|            0|\n|1970-01-01T08:00:00.010+08:00|            0|            0|\n+-----------------------------+-------------+-------------+\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br")])]),s("h4",{attrs:{id:"not-use-ignorenull-attribute-ignore-null"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#not-use-ignorenull-attribute-ignore-null"}},[t._v("#")]),t._v(" Not use "),s("code",[t._v("ignoreNull")]),t._v(" attribute (Ignore Null)")]),t._v(" "),s("p",[t._v("SQL:")]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" count_if"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("s1"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" s2"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" count_if"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("s1"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" s2"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" root"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("db"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("d1\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("Result:")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("+--------------------------------------------------+--------------------------------------------------+\n|count_if(root.db.d1.s1 = 0 & root.db.d1.s2 = 0, 3)|count_if(root.db.d1.s1 = 1 & root.db.d1.s2 = 0, 3)|\n+--------------------------------------------------+--------------------------------------------------+\n|                                                 2|                                                 1|\n+--------------------------------------------------+--------------------------------------------------\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("h4",{attrs:{id:"use-ignorenull-attribute"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#use-ignorenull-attribute"}},[t._v("#")]),t._v(" Use "),s("code",[t._v("ignoreNull")]),t._v(" attribute")]),t._v(" "),s("p",[t._v("SQL:")]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" count_if"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("s1"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" s2"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ignoreNull'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'false'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" count_if"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("s1"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v(" s2"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ignoreNull'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'false'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" root"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("db"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("d1\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("Result:")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('+------------------------------------------------------------------------+------------------------------------------------------------------------+\n|count_if(root.db.d1.s1 = 0 & root.db.d1.s2 = 0, 3, "ignoreNull"="false")|count_if(root.db.d1.s1 = 1 & root.db.d1.s2 = 0, 3, "ignoreNull"="false")|\n+------------------------------------------------------------------------+------------------------------------------------------------------------+\n|                                                                       1|                                                                       1|\n+------------------------------------------------------------------------+------------------------------------------------------------------------+\n')])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])])])}),[],!1,null,null,null);s.default=n.exports}}]);