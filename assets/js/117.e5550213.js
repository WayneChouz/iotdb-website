(window.webpackJsonp=window.webpackJsonp||[]).push([[117],{726:function(e,t,r){"use strict";r.r(t);var o=r(82),n=Object(o.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"metric-tools"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#metric-tools"}},[e._v("#")]),e._v(" Metric Tools")]),e._v(" "),r("p",[e._v("IoTDB Server provides a monitoring module, which can introduce variable monitoring where needed. Currently, it provides two monitoring methods, Jmx and Prometheus, and can introduce 5 indicators such as counter. For more instructions on the interface, please refer to "),r("a",{attrs:{href:"https://github.com/apache/iotdb/tree/master/metrics"}},[e._v("the metric part of the description document")])]),e._v(" "),r("h2",{attrs:{id:"use"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#use"}},[e._v("#")]),e._v(" use")]),e._v(" "),r("p",[e._v("Step 1: Obtain IoTDB-server.")]),e._v(" "),r("p",[e._v("Step 2: Edit the configuration file "),r("code",[e._v("iotdb-metric.yml")])]),e._v(" "),r("ul",[r("li",[e._v("You can choose to use the method of obtaining metrics and modify the "),r("code",[e._v("metricReporterList")]),e._v(": optional parameters "),r("code",[e._v("jmx")]),e._v(", "),r("code",[e._v("prometheus")])]),e._v(" "),r("li",[e._v("You can select the type of monitoring framework and modify the "),r("code",[e._v("monitortype")]),e._v(": optional parameters "),r("code",[e._v("dropwizard")]),e._v(", "),r("code",[e._v("micrometer")]),e._v(", and at the same time introduce the dependency of the corresponding monitoring framework in the IoTDB Server configuration file.")])]),e._v(" "),r("p",[e._v("The third step: bury the points in the corresponding position in the IoTDB Server.")]),e._v(" "),r("ul",[r("li",[e._v("First obtain the corresponding monitoring manager through "),r("code",[e._v("MetricsService.getInstance().getMetricManager()")]),e._v(", and then call the corresponding method to obtain the corresponding indicator.")]),e._v(" "),r("li",[e._v("Afterwards, you can operate on the obtained indicators, and the monitoring framework will automatically publish the indicators through the selected method.")]),e._v(" "),r("li",[e._v("It should be noted that all tags provided by the getOrCreate method should be even numbers to form the corresponding key-value.")])]),e._v(" "),r("p",[e._v("Step 3: Start IoTDB-server.")]),e._v(" "),r("p",[e._v("Step 4: View the specific indicator parameters, and you can view them separately according to the selected method of obtaining the indicators, that is, "),r("code",[e._v("jmx")]),e._v(" or "),r("code",[e._v("prometheus")])]),e._v(" "),r("ul",[r("li",[e._v("For jmx, please check "),r("code",[e._v("org.apache.iotdb.metrics")]),e._v(" after connecting")]),e._v(" "),r("li",[e._v("Perform the following configuration for prometheus (some parameters can be adjusted by yourself to obtain monitoring data), It should be noted that if you use docker to run iotdb-server, you need to use the "),r("code",[e._v("-p 9091:9091")]),e._v(" parameter to expose the corresponding port when using "),r("code",[e._v("docker run")]),e._v(".")])]),e._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("job_name: push-metrics\nhonor_labels: true\nhonor_timestamps: true\nscrape_interval: 15s\nscrape_timeout: 10s\nmetrics_path: /metrics\nscheme: http\nfollow_redirects: true\nstatic_configs:\n-targets:\n  -localhost:9091\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br"),r("span",{staticClass:"line-number"},[e._v("2")]),r("br"),r("span",{staticClass:"line-number"},[e._v("3")]),r("br"),r("span",{staticClass:"line-number"},[e._v("4")]),r("br"),r("span",{staticClass:"line-number"},[e._v("5")]),r("br"),r("span",{staticClass:"line-number"},[e._v("6")]),r("br"),r("span",{staticClass:"line-number"},[e._v("7")]),r("br"),r("span",{staticClass:"line-number"},[e._v("8")]),r("br"),r("span",{staticClass:"line-number"},[e._v("9")]),r("br"),r("span",{staticClass:"line-number"},[e._v("10")]),r("br"),r("span",{staticClass:"line-number"},[e._v("11")]),r("br")])])])}),[],!1,null,null,null);t.default=n.exports}}]);