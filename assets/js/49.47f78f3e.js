(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{675:function(a,e,t){"use strict";t.r(e);var s=t(83),r=Object(s.a)({},(function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h2",{attrs:{id:"grafana-plugin"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#grafana-plugin"}},[a._v("#")]),a._v(" Grafana-Plugin")]),a._v(" "),t("p",[a._v("Grafana is an open source volume metrics monitoring and visualization tool, which can be used to present time series data and analyze application runtime status.")]),a._v(" "),t("p",[a._v("We developed the Grafana-Plugin for IoTDB, using the IoTDB REST service to present time series data and providing many visualization methods for time series data.\nCompared with previous IoTDB-Grafana-Connector, current Grafana-Plugin performs more efficiently and supports more query types. So, "),t("strong",[a._v("we recommend using Grafana-Plugin instead of IoTDB-Grafana-Connector")]),a._v(".")]),a._v(" "),t("h3",{attrs:{id:"installation-and-deployment"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#installation-and-deployment"}},[a._v("#")]),a._v(" Installation and deployment")]),a._v(" "),t("h4",{attrs:{id:"install-grafana"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#install-grafana"}},[a._v("#")]),a._v(" Install Grafana")]),a._v(" "),t("ul",[t("li",[a._v("Download url: https://grafana.com/grafana/download")]),a._v(" "),t("li",[a._v("Version >= 7.0.0")])]),a._v(" "),t("h4",{attrs:{id:"install-grafana-plugin"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#install-grafana-plugin"}},[a._v("#")]),a._v(" Install Grafana-Plugin")]),a._v(" "),t("ul",[t("li",[a._v("Plugin name: grafana-plugin")]),a._v(" "),t("li",[a._v("Download url: https://github.com/apache/iotdb.git")])]),a._v(" "),t("p",[a._v("Execute the following command:")]),a._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" clone https://github.com/apache/iotdb.git\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("h4",{attrs:{id:"compile-grafana-plugin"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#compile-grafana-plugin"}},[a._v("#")]),a._v(" Compile Grafana-Plugin")]),a._v(" "),t("h5",{attrs:{id:"compile-method-1"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#compile-method-1"}},[a._v("#")]),a._v(" Compile Method 1")]),a._v(" "),t("p",[a._v("We need to compile the front-end project in the IoTDB "),t("code",[a._v("grafana-plugin")]),a._v(" directory and then generate the "),t("code",[a._v("dist")]),a._v(" directory. The specific execution process is as follows.")]),a._v(" "),t("ul",[t("li",[a._v("Option 1 (compile with maven): execute following command in the "),t("code",[a._v("grafana-plugin")]),a._v(" directory:")])]),a._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("mvn "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" package -P compile-grafana-plugin\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("ul",[t("li",[a._v("Option 2 (compile with yarn): execute following command in the "),t("code",[a._v("grafana-plugin")]),a._v(" directory:")])]),a._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" build\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("p",[a._v("If compiling successful, you can see the "),t("code",[a._v("dist")]),a._v(" directory , which contains the compiled Grafana-Plugin:")]),a._v(" "),t("img",{staticStyle:{width:"100%","max-width":"333px","max-height":"545px","margin-left":"auto","margin-right":"auto",display:"block"},attrs:{src:"https://github.com/apache/iotdb-bin-resources/blob/main/docs/UserGuide/Ecosystem%20Integration/Grafana-plugin/grafana-plugin-build.png?raw=true"}}),a._v(" "),t("h5",{attrs:{id:"compile-method-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#compile-method-2"}},[a._v("#")]),a._v(" Compile Method 2")]),a._v(" "),t("p",[a._v("We can also obtain the front-end project of "),t("code",[a._v("grafana-plugin")]),a._v(" and other IoTDB executable files by executing the "),t("strong",[a._v("package instruction")]),a._v(" of the IoTDB project.")]),a._v(" "),t("p",[a._v("Execute following command in the IoTDB root directory:")]),a._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v(" mvn clean package -pl distribution -am -DskipTests -P compile-grafana-plugin\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("If compiling successful, you can see that the "),t("code",[a._v("distribution/target")]),a._v(" directory contains the compiled Grafana-Plugin:")]),a._v(" "),t("img",{staticStyle:{width:"100%","max-width":"333px","max-height":"545px","margin-left":"auto","margin-right":"auto",display:"block"},attrs:{src:"https://github.com/apache/iotdb-bin-resources/blob/main/docs/UserGuide/Ecosystem%20Integration/Grafana-plugin/distribution.png?raw=true"}}),a._v(" "),t("h4",{attrs:{id:"install-grafana-plugin-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#install-grafana-plugin-2"}},[a._v("#")]),a._v(" Install Grafana-Plugin")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("Copy the front-end project target folder generated above to Grafana's plugin directory "),t("code",[a._v("${Grafana directory}\\data\\plugins\\")])]),a._v(" "),t("ul",[t("li",[a._v("Windows: the "),t("code",[a._v("data\\plugins")]),a._v(" directory is automatically created")]),a._v(" "),t("li",[a._v("Linux: artificially create "),t("code",[a._v("/var/lib/grafana/plugins")]),a._v(" directory")]),a._v(" "),t("li",[a._v("MacOS: the plugin directory is "),t("code",[a._v("/usr/local/var/lib/grafana/plugins")]),a._v(" (see more details after installing Grafana using "),t("code",[a._v("brew install")]),a._v(")")])])]),a._v(" "),t("li",[t("p",[a._v("Modify Grafana configuration file: the file is in（"),t("code",[a._v("${Grafana directory}\\conf\\defaults.ini")]),a._v("）, and do the following modifications:")]),a._v(" "),t("div",{staticClass:"language-ini line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ini"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("allow_loading_unsigned_plugins")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("iotdb")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])])]),a._v(" "),t("li",[t("p",[a._v("Start Grafana (restart if the Grafana service is already started)")])])]),a._v(" "),t("h4",{attrs:{id:"start-grafana"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#start-grafana"}},[a._v("#")]),a._v(" Start Grafana")]),a._v(" "),t("p",[a._v("Start Grafana with the following command in the Grafana directory:")]),a._v(" "),t("ul",[t("li",[a._v("Windows:")])]),a._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("grafana-server.exe\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("ul",[t("li",[a._v("Linux:")])]),a._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("service")]),a._v(" grafana-server start\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("ul",[t("li",[a._v("MacOS:")])]),a._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("brew services start grafana\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("For more details，please click "),t("a",{attrs:{href:"https://grafana.com/docs/grafana/latest/installation/",target:"_blank",rel:"noopener noreferrer"}},[a._v("here"),t("OutboundLink")],1)]),a._v(" "),t("h4",{attrs:{id:"configure-iotdb-rest-service"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#configure-iotdb-rest-service"}},[a._v("#")]),a._v(" Configure IoTDB REST Service")]),a._v(" "),t("ul",[t("li",[a._v("Modify "),t("code",[a._v("{iotdb directory}/conf/iotdb-rest.properties")]),a._v(" as following:")])]),a._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Is the REST service enabled")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("enable_rest_service")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("true")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# the binding port of the REST service")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("rest_service_port")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("18080")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br")])]),t("p",[a._v("Start IoTDB (restart if the IoTDB service is already started)")]),a._v(" "),t("h3",{attrs:{id:"how-to-use-grafana-plugin"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#how-to-use-grafana-plugin"}},[a._v("#")]),a._v(" How to use Grafana-Plugin")]),a._v(" "),t("h4",{attrs:{id:"access-grafana-dashboard"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#access-grafana-dashboard"}},[a._v("#")]),a._v(" Access Grafana dashboard")]),a._v(" "),t("p",[a._v("Grafana displays data in a web page dashboard. Please open your browser and visit "),t("code",[a._v("http://<ip>:<port>")]),a._v(" when using it.")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("IP is the IP of the server where your Grafana is located, and Port is the running port of Grafana (default 3000).")])]),a._v(" "),t("li",[t("p",[a._v("The default login username and password are both "),t("code",[a._v("admin")]),a._v(".")])])]),a._v(" "),t("h4",{attrs:{id:"add-iotdb-as-data-source"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#add-iotdb-as-data-source"}},[a._v("#")]),a._v(" Add IoTDB as Data Source")]),a._v(" "),t("p",[a._v("Click the "),t("code",[a._v("Settings")]),a._v(" icon on the left, select the "),t("code",[a._v("Data Source")]),a._v(" option, and then click "),t("code",[a._v("Add data source")]),a._v(".")]),a._v(" "),t("img",{staticStyle:{width:"100%","max-width":"800px","max-height":"600px","margin-left":"auto","margin-right":"auto",display:"block"},attrs:{src:"https://github.com/apache/iotdb-bin-resources/blob/main/docs/UserGuide/Ecosystem%20Integration/Grafana-plugin/datasource_1.png?raw=true"}}),a._v(" "),t("img",{staticStyle:{width:"100%","max-width":"800px","max-height":"600px","margin-left":"auto","margin-right":"auto",display:"block"},attrs:{src:"https://github.com/apache/iotdb-bin-resources/blob/main/docs/UserGuide/Ecosystem%20Integration/Grafana-plugin/datasource_2.png?raw=true"}}),a._v(" "),t("p",[a._v("Select the "),t("code",[a._v("Apache IoTDB")]),a._v(" data source.")]),a._v(" "),t("ul",[t("li",[a._v("Fill in "),t("code",[a._v("http://<ip>:<port>")]),a._v(" in the "),t("code",[a._v("URL")]),a._v(" field\n"),t("ul",[t("li",[a._v("ip is the host ip where your IoTDB server is located")]),a._v(" "),t("li",[a._v("port is the running port of the REST service (default 18080).")])])]),a._v(" "),t("li",[a._v("Enter the username and password of the IoTDB server")])]),a._v(" "),t("p",[a._v("Click "),t("code",[a._v("Save & Test")]),a._v(", and "),t("code",[a._v("Success")]),a._v(" will appear.")]),a._v(" "),t("img",{staticStyle:{width:"100%","max-width":"800px","max-height":"600px","margin-left":"auto","margin-right":"auto",display:"block"},attrs:{src:"https://github.com/apache/iotdb-bin-resources/blob/main/docs/UserGuide/Ecosystem%20Integration/Grafana-plugin/datasource_3.png?raw=true"}}),a._v(" "),t("h4",{attrs:{id:"create-a-new-panel"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#create-a-new-panel"}},[a._v("#")]),a._v(" Create a new Panel")]),a._v(" "),t("p",[a._v("Click the "),t("code",[a._v("Dashboards")]),a._v(" icon on the left, and select "),t("code",[a._v("Manage")]),a._v(" option.")]),a._v(" "),t("img",{staticStyle:{width:"100%","max-width":"800px","max-height":"600px","margin-left":"auto","margin-right":"auto",display:"block"},attrs:{src:"https://github.com/apache/iotdb-bin-resources/blob/main/docs/UserGuide/Ecosystem%20Integration/Grafana-plugin/manage.png?raw=true"}}),a._v(" "),t("p",[a._v("Click the "),t("code",[a._v("New Dashboard")]),a._v(" icon on the top right, and select "),t("code",[a._v("Add an empty panel")]),a._v(" option.")]),a._v(" "),t("img",{staticStyle:{width:"100%","max-width":"800px","max-height":"600px","margin-left":"auto","margin-right":"auto",display:"block"},attrs:{src:"https://github.com/apache/iotdb-bin-resources/blob/main/docs/UserGuide/Ecosystem%20Integration/Grafana-plugin/add%20empty%20panel.png?raw=true"}}),a._v(" "),t("p",[a._v("Enter content in the SELECT, FROM , WHERE and CONTROL input box, where the WHERE and CONTROL input boxes are optional.")]),a._v(" "),t("p",[a._v("If a query involves multiple expressions, we can click "),t("code",[a._v("+")]),a._v(" on the right side of the SELECT input box to add expressions in the SELECT clause, or click "),t("code",[a._v("+")]),a._v(" on the right side of the FROM input box to add a path prefix:")]),a._v(" "),t("img",{staticStyle:{width:"100%","max-width":"800px","max-height":"600px","margin-left":"auto","margin-right":"auto",display:"block"},attrs:{src:"https://github.com/apache/iotdb-bin-resources/blob/main/docs/UserGuide/Ecosystem%20Integration/Grafana-plugin/grafana_input.png?raw=true"}}),a._v(" "),t("p",[a._v("SELECT input box: contents can be the time series suffix, function, udf, arithmetic expression, or nested expressions. You can also use the as clause to rename the result.")]),a._v(" "),t("p",[a._v("Here are some examples of valid SELECT content:")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("s1")])]),a._v(" "),t("li",[t("code",[a._v("top_k(s1, 'k'='1') as top")])]),a._v(" "),t("li",[t("code",[a._v("sin(s1) + cos(s1 + s2)")])]),a._v(" "),t("li",[t("code",[a._v('udf(s1) as "alias"')])])]),a._v(" "),t("p",[a._v("FROM input box: contents must be the prefix path of the time series, such as "),t("code",[a._v("root.sg.d")]),a._v(".")]),a._v(" "),t("p",[a._v("WHERE input box: contents should be the filter condition of the query, such as "),t("code",[a._v("time > 0")]),a._v(" or "),t("code",[a._v("s1 < 1024 and s2 > 1024")]),a._v(".")]),a._v(" "),t("p",[a._v("CONTROL input box: contents should be a special clause that controls the query type and output format.")]),a._v(" "),t("p",[a._v("Here are some examples of valid CONTROL content:")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("group by ([2017-11-01T00:00:00, 2017-11-07T23:00:00), 1d)")])]),a._v(" "),t("li",[t("code",[a._v("group by ([2017-11-01 00:00:00, 2017-11-07 23:00:00), 3h, 1d)")])]),a._v(" "),t("li",[t("code",[a._v("GROUP BY([2017-11-07T23:50:00, 2017-11-07T23:59:00), 1m) FILL (PREVIOUSUNTILLAST)")])]),a._v(" "),t("li",[t("code",[a._v("GROUP BY([2017-11-07T23:50:00, 2017-11-07T23:59:00), 1m) FILL (PREVIOUS, 1m)")])]),a._v(" "),t("li",[t("code",[a._v("GROUP BY([2017-11-07T23:50:00, 2017-11-07T23:59:00), 1m) FILL (LINEAR, 5m, 5m)")])]),a._v(" "),t("li",[t("code",[a._v("group by ((2017-11-01T00:00:00, 2017-11-07T23:00:00], 1d), level=1")])]),a._v(" "),t("li",[t("code",[a._v("group by ([0, 20), 2ms, 3ms), level=1")])])]),a._v(" "),t("p",[a._v("Tip: Statements like "),t("code",[a._v("select * from root.xx.**")]),a._v(" are not recommended because those statements may cause OOM.")]),a._v(" "),t("h4",{attrs:{id:"support-for-variables-and-template-functions"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#support-for-variables-and-template-functions"}},[a._v("#")]),a._v(" Support for variables and template functions")]),a._v(" "),t("p",[a._v("This plugin supports Grafana's variables and templates (https://grafana.com/docs/grafana/v7.0/variables/) feature.")]),a._v(" "),t("p",[a._v("After creating a new Panel, click the Settings button in the upper right corner:")]),a._v(" "),t("img",{staticStyle:{width:"100%","max-width":"800px","max-height":"600px","margin-left":"auto","margin-right":"auto",display:"block"},attrs:{src:"https://github.com/apache/iotdb-bin-resources/blob/main/docs/UserGuide/Ecosystem%20Integration/Grafana-plugin/setconf.png?raw=true"}}),a._v(" "),t("p",[a._v("Select "),t("code",[a._v("Variables")]),a._v(", click "),t("code",[a._v("Add variable")]),a._v(":")]),a._v(" "),t("img",{staticStyle:{width:"100%","max-width":"800px","max-height":"600px","margin-left":"auto","margin-right":"auto",display:"block"},attrs:{src:"https://github.com/apache/iotdb-bin-resources/blob/main/docs/UserGuide/Ecosystem%20Integration/Grafana-plugin/addvaribles.png?raw=true"}}),a._v(" "),t("p",[a._v("Enter "),t("code",[a._v("Name")]),a._v(", "),t("code",[a._v("Label")]),a._v(", and "),t("code",[a._v("Query")]),a._v(", and then click the "),t("code",[a._v("Update")]),a._v(" button:")]),a._v(" "),t("img",{staticStyle:{width:"100%","max-width":"800px","max-height":"600px","margin-left":"auto","margin-right":"auto",display:"block"},attrs:{src:"https://github.com/apache/iotdb-bin-resources/blob/main/docs/UserGuide/Ecosystem%20Integration/Grafana-plugin/variblesinput.png?raw=true"}}),a._v(" "),t("p",[a._v("Apply Variables, enter the variable in the "),t("code",[a._v("grafana panel")]),a._v(" and click the "),t("code",[a._v("save")]),a._v(" button:")]),a._v(" "),t("img",{staticStyle:{width:"100%","max-width":"800px","max-height":"600px","margin-left":"auto","margin-right":"auto",display:"block"},attrs:{src:"https://github.com/apache/iotdb-bin-resources/blob/main/docs/UserGuide/Ecosystem%20Integration/Grafana-plugin/applyvariables.png?raw=true"}}),a._v(" "),t("h3",{attrs:{id:"more-details-about-grafana"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#more-details-about-grafana"}},[a._v("#")]),a._v(" More Details about Grafana")]),a._v(" "),t("p",[a._v("For more details about Grafana operation, please refer to the official Grafana documentation: http://docs.grafana.org/guides/getting_started/.")])])}),[],!1,null,null,null);e.default=r.exports}}]);