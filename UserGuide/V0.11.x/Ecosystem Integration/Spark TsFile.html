<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title> </title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content=" ">
    <meta name="Description" content="Apache IoTDB: Time Series Database for IoT">
    <meta name="Keywords" content="TSDB, time series, time series database, IoTDB, IoT database, IoT data management,时序数据库, 时间序列管理, IoTDB, 物联网数据库, 实时数据库, 物联网数据管理, 物联网数据">
    <meta name="baidu-site-verification" content="wfKETzB3OT">
    <meta name="google-site-verification" content="mZWAoRY0yj_HAr-s47zHCGHzx5Ju-RVm5wDbPnwQYFo">
    
    <link rel="preload" href="/assets/css/0.styles.53b4846f.css" as="style"><link rel="preload" href="/assets/js/app.cdf3999a.js" as="script"><link rel="preload" href="/assets/js/3.588efd8d.js" as="script"><link rel="preload" href="/assets/js/121.6439566f.js" as="script"><link rel="prefetch" href="/assets/js/10.a9e4399a.js"><link rel="prefetch" href="/assets/js/100.8bd957cc.js"><link rel="prefetch" href="/assets/js/101.c1fa8a84.js"><link rel="prefetch" href="/assets/js/102.579834e7.js"><link rel="prefetch" href="/assets/js/103.c7478bad.js"><link rel="prefetch" href="/assets/js/104.f5e7dd53.js"><link rel="prefetch" href="/assets/js/105.1877fc35.js"><link rel="prefetch" href="/assets/js/106.13a83952.js"><link rel="prefetch" href="/assets/js/107.ca50b2df.js"><link rel="prefetch" href="/assets/js/108.14b83f4d.js"><link rel="prefetch" href="/assets/js/109.9e57d132.js"><link rel="prefetch" href="/assets/js/11.43ba1aca.js"><link rel="prefetch" href="/assets/js/110.f75eefba.js"><link rel="prefetch" href="/assets/js/111.24633fba.js"><link rel="prefetch" href="/assets/js/112.fa3f6980.js"><link rel="prefetch" href="/assets/js/113.754e0344.js"><link rel="prefetch" href="/assets/js/114.0a6fa7d5.js"><link rel="prefetch" href="/assets/js/115.81bb384f.js"><link rel="prefetch" href="/assets/js/116.d459a789.js"><link rel="prefetch" href="/assets/js/117.18139bb0.js"><link rel="prefetch" href="/assets/js/118.f9ecd9db.js"><link rel="prefetch" href="/assets/js/119.ec69a9ab.js"><link rel="prefetch" href="/assets/js/12.af3ddb51.js"><link rel="prefetch" href="/assets/js/120.09c2a3de.js"><link rel="prefetch" href="/assets/js/122.ecb201e7.js"><link rel="prefetch" href="/assets/js/123.aa0b00b8.js"><link rel="prefetch" href="/assets/js/124.29c58d16.js"><link rel="prefetch" href="/assets/js/125.c686b04b.js"><link rel="prefetch" href="/assets/js/126.b205474c.js"><link rel="prefetch" href="/assets/js/127.3e2adff6.js"><link rel="prefetch" href="/assets/js/128.2fc3855d.js"><link rel="prefetch" href="/assets/js/129.f12cc937.js"><link rel="prefetch" href="/assets/js/13.821d2576.js"><link rel="prefetch" href="/assets/js/130.1a9d305e.js"><link rel="prefetch" href="/assets/js/131.6b5d0875.js"><link rel="prefetch" href="/assets/js/132.a08e11b1.js"><link rel="prefetch" href="/assets/js/133.38d2e78d.js"><link rel="prefetch" href="/assets/js/134.36883f0a.js"><link rel="prefetch" href="/assets/js/135.28172fcf.js"><link rel="prefetch" href="/assets/js/136.b3cd2325.js"><link rel="prefetch" href="/assets/js/137.1974b706.js"><link rel="prefetch" href="/assets/js/138.e357d9db.js"><link rel="prefetch" href="/assets/js/139.898f0574.js"><link rel="prefetch" href="/assets/js/14.b377a5b4.js"><link rel="prefetch" href="/assets/js/140.da9d0dca.js"><link rel="prefetch" href="/assets/js/141.aa574ada.js"><link rel="prefetch" href="/assets/js/142.109bd571.js"><link rel="prefetch" href="/assets/js/143.a61a84bf.js"><link rel="prefetch" href="/assets/js/144.39e2eb98.js"><link rel="prefetch" href="/assets/js/145.b1c8b517.js"><link rel="prefetch" href="/assets/js/146.1611878d.js"><link rel="prefetch" href="/assets/js/147.2a4483ce.js"><link rel="prefetch" href="/assets/js/148.8c02866a.js"><link rel="prefetch" href="/assets/js/149.85fa92a9.js"><link rel="prefetch" href="/assets/js/15.5279267e.js"><link rel="prefetch" href="/assets/js/150.49b689dc.js"><link rel="prefetch" href="/assets/js/151.3981b21b.js"><link rel="prefetch" href="/assets/js/152.65ce68b7.js"><link rel="prefetch" href="/assets/js/153.a094fee0.js"><link rel="prefetch" href="/assets/js/154.99528d5f.js"><link rel="prefetch" href="/assets/js/155.e889bcac.js"><link rel="prefetch" href="/assets/js/156.8908dffd.js"><link rel="prefetch" href="/assets/js/157.c41f515f.js"><link rel="prefetch" href="/assets/js/158.30b40121.js"><link rel="prefetch" href="/assets/js/159.4c5e89b3.js"><link rel="prefetch" href="/assets/js/16.9d83cb2c.js"><link rel="prefetch" href="/assets/js/160.13f4648d.js"><link rel="prefetch" href="/assets/js/161.e96ce21f.js"><link rel="prefetch" href="/assets/js/162.eafe4b38.js"><link rel="prefetch" href="/assets/js/163.baf65169.js"><link rel="prefetch" href="/assets/js/164.efc7e734.js"><link rel="prefetch" href="/assets/js/165.531e3a21.js"><link rel="prefetch" href="/assets/js/166.83045dff.js"><link rel="prefetch" href="/assets/js/167.221e33e6.js"><link rel="prefetch" href="/assets/js/168.f2779c9c.js"><link rel="prefetch" href="/assets/js/169.8e53ddae.js"><link rel="prefetch" href="/assets/js/17.9ba04d92.js"><link rel="prefetch" href="/assets/js/170.016bb5ee.js"><link rel="prefetch" href="/assets/js/171.eb7d4d69.js"><link rel="prefetch" href="/assets/js/172.c70c741f.js"><link rel="prefetch" href="/assets/js/173.280205cf.js"><link rel="prefetch" href="/assets/js/174.ecb1b06f.js"><link rel="prefetch" href="/assets/js/175.683490a7.js"><link rel="prefetch" href="/assets/js/176.fa841509.js"><link rel="prefetch" href="/assets/js/177.2db91cf7.js"><link rel="prefetch" href="/assets/js/178.ab792d1f.js"><link rel="prefetch" href="/assets/js/179.fbae1afb.js"><link rel="prefetch" href="/assets/js/18.f477ec91.js"><link rel="prefetch" href="/assets/js/180.ffa09c9f.js"><link rel="prefetch" href="/assets/js/181.f2cbed8b.js"><link rel="prefetch" href="/assets/js/182.9595b60d.js"><link rel="prefetch" href="/assets/js/183.7432af40.js"><link rel="prefetch" href="/assets/js/184.dc494197.js"><link rel="prefetch" href="/assets/js/185.ab7a60e4.js"><link rel="prefetch" href="/assets/js/186.0d662568.js"><link rel="prefetch" href="/assets/js/187.8384d86a.js"><link rel="prefetch" href="/assets/js/188.63ddc7bd.js"><link rel="prefetch" href="/assets/js/189.e420e54d.js"><link rel="prefetch" href="/assets/js/19.72d80820.js"><link rel="prefetch" href="/assets/js/190.a8334c8b.js"><link rel="prefetch" href="/assets/js/191.0de48ee4.js"><link rel="prefetch" href="/assets/js/192.ce27c615.js"><link rel="prefetch" href="/assets/js/193.219511cd.js"><link rel="prefetch" href="/assets/js/194.226f7a2a.js"><link rel="prefetch" href="/assets/js/195.e0943064.js"><link rel="prefetch" href="/assets/js/196.fbfe37d8.js"><link rel="prefetch" href="/assets/js/197.7149bb98.js"><link rel="prefetch" href="/assets/js/198.0e7a7650.js"><link rel="prefetch" href="/assets/js/199.1be76b5e.js"><link rel="prefetch" href="/assets/js/20.4bdfbbe8.js"><link rel="prefetch" href="/assets/js/200.f2b2a4b9.js"><link rel="prefetch" href="/assets/js/201.09c58668.js"><link rel="prefetch" href="/assets/js/202.c472c624.js"><link rel="prefetch" href="/assets/js/203.e33d45f2.js"><link rel="prefetch" href="/assets/js/204.76b69f5a.js"><link rel="prefetch" href="/assets/js/205.e108e62c.js"><link rel="prefetch" href="/assets/js/206.68c5cb16.js"><link rel="prefetch" href="/assets/js/207.282be351.js"><link rel="prefetch" href="/assets/js/208.75bb643e.js"><link rel="prefetch" href="/assets/js/209.52929254.js"><link rel="prefetch" href="/assets/js/21.f8b3c5f4.js"><link rel="prefetch" href="/assets/js/210.834316e8.js"><link rel="prefetch" href="/assets/js/211.812f06f3.js"><link rel="prefetch" href="/assets/js/212.31580ccf.js"><link rel="prefetch" href="/assets/js/213.13dbb0f7.js"><link rel="prefetch" href="/assets/js/214.b43ab808.js"><link rel="prefetch" href="/assets/js/215.fe7cb020.js"><link rel="prefetch" href="/assets/js/216.0607ca27.js"><link rel="prefetch" href="/assets/js/217.36694c50.js"><link rel="prefetch" href="/assets/js/218.f1defb63.js"><link rel="prefetch" href="/assets/js/219.a082793e.js"><link rel="prefetch" href="/assets/js/22.ab7a2af8.js"><link rel="prefetch" href="/assets/js/220.088cfac6.js"><link rel="prefetch" href="/assets/js/221.88d6da3a.js"><link rel="prefetch" href="/assets/js/222.45d66b4f.js"><link rel="prefetch" href="/assets/js/223.4509ca59.js"><link rel="prefetch" href="/assets/js/224.f84461b0.js"><link rel="prefetch" href="/assets/js/225.60af6296.js"><link rel="prefetch" href="/assets/js/226.3e1599a2.js"><link rel="prefetch" href="/assets/js/227.776ecb1e.js"><link rel="prefetch" href="/assets/js/228.69465426.js"><link rel="prefetch" href="/assets/js/229.42c575fc.js"><link rel="prefetch" href="/assets/js/23.98a4658a.js"><link rel="prefetch" href="/assets/js/230.a80290a7.js"><link rel="prefetch" href="/assets/js/231.04046432.js"><link rel="prefetch" href="/assets/js/232.d491c773.js"><link rel="prefetch" href="/assets/js/233.298cb6f1.js"><link rel="prefetch" href="/assets/js/234.364a0899.js"><link rel="prefetch" href="/assets/js/235.a142dac9.js"><link rel="prefetch" href="/assets/js/236.fef9edf6.js"><link rel="prefetch" href="/assets/js/237.c00b4e2f.js"><link rel="prefetch" href="/assets/js/238.5a0659b0.js"><link rel="prefetch" href="/assets/js/239.7adcb578.js"><link rel="prefetch" href="/assets/js/24.d23292bc.js"><link rel="prefetch" href="/assets/js/240.d158ca74.js"><link rel="prefetch" href="/assets/js/241.636b16cf.js"><link rel="prefetch" href="/assets/js/242.33a3956b.js"><link rel="prefetch" href="/assets/js/243.4358cb6f.js"><link rel="prefetch" href="/assets/js/244.7a46bd7e.js"><link rel="prefetch" href="/assets/js/245.9de35f82.js"><link rel="prefetch" href="/assets/js/246.0a2cc3cc.js"><link rel="prefetch" href="/assets/js/247.b341a380.js"><link rel="prefetch" href="/assets/js/248.416506e2.js"><link rel="prefetch" href="/assets/js/249.4a9cb0eb.js"><link rel="prefetch" href="/assets/js/25.bc6a97e8.js"><link rel="prefetch" href="/assets/js/250.594e9249.js"><link rel="prefetch" href="/assets/js/251.b0d3f2d1.js"><link rel="prefetch" href="/assets/js/252.230db83f.js"><link rel="prefetch" href="/assets/js/253.5a0fbaf8.js"><link rel="prefetch" href="/assets/js/254.7350340d.js"><link rel="prefetch" href="/assets/js/255.20115004.js"><link rel="prefetch" href="/assets/js/256.6b30fe37.js"><link rel="prefetch" href="/assets/js/257.3b07691d.js"><link rel="prefetch" href="/assets/js/258.31070ecb.js"><link rel="prefetch" href="/assets/js/259.0acb0d1e.js"><link rel="prefetch" href="/assets/js/26.2792deb2.js"><link rel="prefetch" href="/assets/js/260.9aa2b5a1.js"><link rel="prefetch" href="/assets/js/261.fb1beee9.js"><link rel="prefetch" href="/assets/js/262.0c3e97f4.js"><link rel="prefetch" href="/assets/js/263.0bbcc3f2.js"><link rel="prefetch" href="/assets/js/264.e287597f.js"><link rel="prefetch" href="/assets/js/265.4d46e056.js"><link rel="prefetch" href="/assets/js/266.13b19fd3.js"><link rel="prefetch" href="/assets/js/267.83fffa1f.js"><link rel="prefetch" href="/assets/js/268.4b22e6e7.js"><link rel="prefetch" href="/assets/js/269.bfe21579.js"><link rel="prefetch" href="/assets/js/27.0b57c820.js"><link rel="prefetch" href="/assets/js/270.4bdfcc8f.js"><link rel="prefetch" href="/assets/js/271.39822626.js"><link rel="prefetch" href="/assets/js/272.004526d7.js"><link rel="prefetch" href="/assets/js/273.8a77bfd1.js"><link rel="prefetch" href="/assets/js/274.939f1509.js"><link rel="prefetch" href="/assets/js/275.4e2034c9.js"><link rel="prefetch" href="/assets/js/276.6be1a56d.js"><link rel="prefetch" href="/assets/js/277.3bc5131a.js"><link rel="prefetch" href="/assets/js/278.2b3913ec.js"><link rel="prefetch" href="/assets/js/279.3912433a.js"><link rel="prefetch" href="/assets/js/28.902cf242.js"><link rel="prefetch" href="/assets/js/280.00c9e48f.js"><link rel="prefetch" href="/assets/js/281.a9d68720.js"><link rel="prefetch" href="/assets/js/282.7ebec984.js"><link rel="prefetch" href="/assets/js/283.19c9d5ea.js"><link rel="prefetch" href="/assets/js/29.8878a84b.js"><link rel="prefetch" href="/assets/js/30.ee5523ce.js"><link rel="prefetch" href="/assets/js/31.726da8fb.js"><link rel="prefetch" href="/assets/js/32.bad93e79.js"><link rel="prefetch" href="/assets/js/33.f3563689.js"><link rel="prefetch" href="/assets/js/34.6b0c9f89.js"><link rel="prefetch" href="/assets/js/35.99f1de20.js"><link rel="prefetch" href="/assets/js/36.3fb8974c.js"><link rel="prefetch" href="/assets/js/37.c72b6907.js"><link rel="prefetch" href="/assets/js/38.eadbf912.js"><link rel="prefetch" href="/assets/js/39.683bc07a.js"><link rel="prefetch" href="/assets/js/4.eafdd42f.js"><link rel="prefetch" href="/assets/js/40.f2d861cf.js"><link rel="prefetch" href="/assets/js/41.65f78a2f.js"><link rel="prefetch" href="/assets/js/42.101ecd13.js"><link rel="prefetch" href="/assets/js/43.b1e97d4d.js"><link rel="prefetch" href="/assets/js/44.abd97f1d.js"><link rel="prefetch" href="/assets/js/45.b93457e4.js"><link rel="prefetch" href="/assets/js/46.21a75107.js"><link rel="prefetch" href="/assets/js/47.2d120101.js"><link rel="prefetch" href="/assets/js/48.d24599f6.js"><link rel="prefetch" href="/assets/js/49.3de3d3a7.js"><link rel="prefetch" href="/assets/js/5.bd72943e.js"><link rel="prefetch" href="/assets/js/50.ef3f7155.js"><link rel="prefetch" href="/assets/js/51.08fc9992.js"><link rel="prefetch" href="/assets/js/52.0598dc9f.js"><link rel="prefetch" href="/assets/js/53.6a71a631.js"><link rel="prefetch" href="/assets/js/54.de56a393.js"><link rel="prefetch" href="/assets/js/55.98bddbab.js"><link rel="prefetch" href="/assets/js/56.d7353ef9.js"><link rel="prefetch" href="/assets/js/57.11f4ec1f.js"><link rel="prefetch" href="/assets/js/58.e357e1b7.js"><link rel="prefetch" href="/assets/js/59.c5f3f24b.js"><link rel="prefetch" href="/assets/js/6.d37d398a.js"><link rel="prefetch" href="/assets/js/60.2d67bc6c.js"><link rel="prefetch" href="/assets/js/61.c44ac685.js"><link rel="prefetch" href="/assets/js/62.12596064.js"><link rel="prefetch" href="/assets/js/63.910cc28d.js"><link rel="prefetch" href="/assets/js/64.3a046b10.js"><link rel="prefetch" href="/assets/js/65.6bc58366.js"><link rel="prefetch" href="/assets/js/66.705c68a4.js"><link rel="prefetch" href="/assets/js/67.f4476669.js"><link rel="prefetch" href="/assets/js/68.1113d56a.js"><link rel="prefetch" href="/assets/js/69.7d61bd69.js"><link rel="prefetch" href="/assets/js/7.8c733af6.js"><link rel="prefetch" href="/assets/js/70.9336ea50.js"><link rel="prefetch" href="/assets/js/71.5e420e3b.js"><link rel="prefetch" href="/assets/js/72.543a898c.js"><link rel="prefetch" href="/assets/js/73.6d1f66ee.js"><link rel="prefetch" href="/assets/js/74.5d0da28f.js"><link rel="prefetch" href="/assets/js/75.86e5e3c8.js"><link rel="prefetch" href="/assets/js/76.b7cb95ff.js"><link rel="prefetch" href="/assets/js/77.8bed890e.js"><link rel="prefetch" href="/assets/js/78.16f18101.js"><link rel="prefetch" href="/assets/js/79.dc208b0a.js"><link rel="prefetch" href="/assets/js/8.c39ee0f7.js"><link rel="prefetch" href="/assets/js/80.716d3f1a.js"><link rel="prefetch" href="/assets/js/81.0d61bd13.js"><link rel="prefetch" href="/assets/js/82.63b774fe.js"><link rel="prefetch" href="/assets/js/83.eb71b7f0.js"><link rel="prefetch" href="/assets/js/84.f8a4906d.js"><link rel="prefetch" href="/assets/js/85.863ab5c0.js"><link rel="prefetch" href="/assets/js/86.a209b575.js"><link rel="prefetch" href="/assets/js/87.64453893.js"><link rel="prefetch" href="/assets/js/88.ee59fcdf.js"><link rel="prefetch" href="/assets/js/89.3d75e5a1.js"><link rel="prefetch" href="/assets/js/9.3e1c4f62.js"><link rel="prefetch" href="/assets/js/90.299d80e8.js"><link rel="prefetch" href="/assets/js/91.ea29b799.js"><link rel="prefetch" href="/assets/js/92.01e0d5a2.js"><link rel="prefetch" href="/assets/js/93.45c069b8.js"><link rel="prefetch" href="/assets/js/94.aa7642bf.js"><link rel="prefetch" href="/assets/js/95.d08edcb5.js"><link rel="prefetch" href="/assets/js/96.eca6c1db.js"><link rel="prefetch" href="/assets/js/97.e062ad6a.js"><link rel="prefetch" href="/assets/js/98.9478a6e3.js"><link rel="prefetch" href="/assets/js/99.5ba76d9a.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.262891fb.js">
    <link rel="stylesheet" href="/assets/css/0.styles.53b4846f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt=" " class="logo"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Document</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/UserGuide/Master/Get Started/QuickStart.html" class="nav-link">In progress</a></li><li class="dropdown-item"><!----> <a href="/UserGuide/V0.11.x/Get Started/QuickStart.html" class="nav-link">V0.11.x</a></li><li class="dropdown-item"><!----> <a href="/UserGuide/V0.10.x/Get Started/QuickStart.html" class="nav-link">V0.10.x</a></li><li class="dropdown-item"><!----> <a href="/UserGuide/V0.9.x/0-Get Started/1-QuickStart.html" class="nav-link">V0.9.x</a></li><li class="dropdown-item"><!----> <a href="/UserGuide/V0.8.x/0-Get Started/1-QuickStart.html" class="nav-link">V0.8.x</a></li></ul></div></div><div class="nav-item"><a href="/SystemDesign/Architecture/Architecture.html" class="nav-link">System design</a></div><div class="nav-item"><a href="/Download/" class="nav-link">Download</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Community</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://cwiki.apache.org/confluence/display/iotdb" class="nav-link external">
  Wiki
  <!----></a></li><li class="dropdown-item"><!----> <a href="/Community/Community-Project Committers.html" class="nav-link">People</a></li><li class="dropdown-item"><!----> <a href="/Community/Community-Powered By.html" class="nav-link">Powered By</a></li><li class="dropdown-item"><!----> <a href="/Community/Materials.html" class="nav-link">Resources</a></li><li class="dropdown-item"><!----> <a href="/Community/Feedback.html" class="nav-link">Feedback</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Development</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Development/VoteRelease.html" class="nav-link">How to vote</a></li><li class="dropdown-item"><!----> <a href="/Development/HowToCommit.html" class="nav-link">How to Commit</a></li><li class="dropdown-item"><!----> <a href="/Development/Committer.html" class="nav-link">Become a Committer</a></li><li class="dropdown-item"><!----> <a href="/Development/ContributeGuide.html" class="nav-link">ContributeGuide</a></li><li class="dropdown-item"><!----> <a href="/Development/format-changelist.html" class="nav-link">Changelist of TsFile</a></li><li class="dropdown-item"><!----> <a href="/Development/rpc-changelist.html" class="nav-link">Changelist of RPC</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Blog</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Blog/Index.html" class="nav-link">Overview</a></li><li class="dropdown-item"><!----> <a href="/Blog/Release0_93.html" class="nav-link">Some Notes on Release 0.9.3 and upcoming 0.10.0</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">ASF</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://www.apache.org/" class="nav-link external">
  Foundation
  <!----></a></li><li class="dropdown-item"><!----> <a href="http://www.apache.org/licenses/" class="nav-link external">
  License
  <!----></a></li><li class="dropdown-item"><!----> <a href="http://www.apache.org/security/" class="nav-link external">
  Security
  <!----></a></li><li class="dropdown-item"><!----> <a href="http://www.apache.org/foundation/sponsorship.html" class="nav-link external">
  Sponsorship
  <!----></a></li><li class="dropdown-item"><!----> <a href="http://www.apache.org/foundation/thanks.html" class="nav-link external">
  Thanks
  <!----></a></li><li class="dropdown-item"><!----> <a href="http://www.apache.org/events/current-event" class="nav-link external">
  Current Events
  <!----></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/UserGuide/V0.11.x/Ecosystem Integration/Spark TsFile.html" class="nav-link">English</a></li><li class="dropdown-item"><!----> <a href="/zh/UserGuide/V0.11.x/Ecosystem Integration/Spark TsFile.html" class="nav-link">简体中文</a></li></ul></div></div> <a href="https://github.com/apache/iotdb.git" target="_blank" rel="noopener noreferrer" class="repo-link">
    gitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Document</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/UserGuide/Master/Get Started/QuickStart.html" class="nav-link">In progress</a></li><li class="dropdown-item"><!----> <a href="/UserGuide/V0.11.x/Get Started/QuickStart.html" class="nav-link">V0.11.x</a></li><li class="dropdown-item"><!----> <a href="/UserGuide/V0.10.x/Get Started/QuickStart.html" class="nav-link">V0.10.x</a></li><li class="dropdown-item"><!----> <a href="/UserGuide/V0.9.x/0-Get Started/1-QuickStart.html" class="nav-link">V0.9.x</a></li><li class="dropdown-item"><!----> <a href="/UserGuide/V0.8.x/0-Get Started/1-QuickStart.html" class="nav-link">V0.8.x</a></li></ul></div></div><div class="nav-item"><a href="/SystemDesign/Architecture/Architecture.html" class="nav-link">System design</a></div><div class="nav-item"><a href="/Download/" class="nav-link">Download</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Community</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://cwiki.apache.org/confluence/display/iotdb" class="nav-link external">
  Wiki
  <!----></a></li><li class="dropdown-item"><!----> <a href="/Community/Community-Project Committers.html" class="nav-link">People</a></li><li class="dropdown-item"><!----> <a href="/Community/Community-Powered By.html" class="nav-link">Powered By</a></li><li class="dropdown-item"><!----> <a href="/Community/Materials.html" class="nav-link">Resources</a></li><li class="dropdown-item"><!----> <a href="/Community/Feedback.html" class="nav-link">Feedback</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Development</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Development/VoteRelease.html" class="nav-link">How to vote</a></li><li class="dropdown-item"><!----> <a href="/Development/HowToCommit.html" class="nav-link">How to Commit</a></li><li class="dropdown-item"><!----> <a href="/Development/Committer.html" class="nav-link">Become a Committer</a></li><li class="dropdown-item"><!----> <a href="/Development/ContributeGuide.html" class="nav-link">ContributeGuide</a></li><li class="dropdown-item"><!----> <a href="/Development/format-changelist.html" class="nav-link">Changelist of TsFile</a></li><li class="dropdown-item"><!----> <a href="/Development/rpc-changelist.html" class="nav-link">Changelist of RPC</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Blog</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Blog/Index.html" class="nav-link">Overview</a></li><li class="dropdown-item"><!----> <a href="/Blog/Release0_93.html" class="nav-link">Some Notes on Release 0.9.3 and upcoming 0.10.0</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">ASF</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://www.apache.org/" class="nav-link external">
  Foundation
  <!----></a></li><li class="dropdown-item"><!----> <a href="http://www.apache.org/licenses/" class="nav-link external">
  License
  <!----></a></li><li class="dropdown-item"><!----> <a href="http://www.apache.org/security/" class="nav-link external">
  Security
  <!----></a></li><li class="dropdown-item"><!----> <a href="http://www.apache.org/foundation/sponsorship.html" class="nav-link external">
  Sponsorship
  <!----></a></li><li class="dropdown-item"><!----> <a href="http://www.apache.org/foundation/thanks.html" class="nav-link external">
  Thanks
  <!----></a></li><li class="dropdown-item"><!----> <a href="http://www.apache.org/events/current-event" class="nav-link external">
  Current Events
  <!----></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/UserGuide/V0.11.x/Ecosystem Integration/Spark TsFile.html" class="nav-link">English</a></li><li class="dropdown-item"><!----> <a href="/zh/UserGuide/V0.11.x/Ecosystem Integration/Spark TsFile.html" class="nav-link">简体中文</a></li></ul></div></div> <a href="https://github.com/apache/iotdb.git" target="_blank" rel="noopener noreferrer" class="repo-link">
    gitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>IoTDB User Guide (V0.10.x)</span> <!----></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Get Started</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Overview</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Concept</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Server</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Client</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Operation Manual</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>System Tools</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Ecosystem Integration</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/UserGuide/V0.11.x/Ecosystem Integration/Grafana.html" class="sidebar-link">Grafana</a></li><li><a href="/UserGuide/V0.11.x/Ecosystem Integration/MapReduce TsFile.html" class="sidebar-link">MapReduce TsFile</a></li><li><a href="/UserGuide/V0.11.x/Ecosystem Integration/Spark TsFile.html" class="active sidebar-link">Spark TsFile</a></li><li><a href="/UserGuide/V0.11.x/Ecosystem Integration/Spark IoTDB.html" class="sidebar-link">Spark IoTDB</a></li><li><a href="/UserGuide/V0.11.x/Ecosystem Integration/Hive TsFile.html" class="sidebar-link">Hive TsFile</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Architecture</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Comparison with TSDBs</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="content content__default"><h1 id="tsfile-spark-connector-user-guide"><a href="#tsfile-spark-connector-user-guide" class="header-anchor">#</a> TsFile-Spark-Connector User Guide</h1> <h2 id="_1-about-tsfile-spark-connector"><a href="#_1-about-tsfile-spark-connector" class="header-anchor">#</a> 1. About TsFile-Spark-Connector</h2> <p>TsFile-Spark-Connector implements the support of Spark for external data sources of Tsfile type. This enables users to read, write and query Tsfile by Spark.</p> <p>With this connector, you can</p> <ul><li>load a single TsFile, from either the local file system or hdfs, into Spark</li> <li>load all files in a specific directory, from either the local file system or hdfs, into Spark</li> <li>write data from Spark into TsFile</li></ul> <h2 id="_2-system-requirements"><a href="#_2-system-requirements" class="header-anchor">#</a> 2. System Requirements</h2> <table><thead><tr><th>Spark Version</th> <th>Scala Version</th> <th>Java Version</th> <th>TsFile</th></tr></thead> <tbody><tr><td><code>2.4.3</code></td> <td><code>2.11.8</code></td> <td><code>1.8</code></td> <td><code>0.10.0</code></td></tr></tbody></table> <blockquote><p>Note: For more information about how to download and use TsFile, please see the following link: https://github.com/apache/iotdb/tree/master/tsfile.</p></blockquote> <h2 id="_3-quick-start"><a href="#_3-quick-start" class="header-anchor">#</a> 3. Quick Start</h2> <h3 id="local-mode"><a href="#local-mode" class="header-anchor">#</a> Local Mode</h3> <p>Start Spark with TsFile-Spark-Connector in local mode:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>./&lt;spark-shell-path&gt;  --jars  tsfile-spark-connector.jar,tsfile-0.10.0-jar-with-dependencies.jar
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Note:</p> <ul><li>&lt;spark-shell-path&gt; is the real path of your spark-shell.</li> <li>Multiple jar packages are separated by commas without any spaces.</li> <li>See https://github.com/apache/iotdb/tree/master/tsfile for how to get TsFile.</li></ul> <h3 id="distributed-mode"><a href="#distributed-mode" class="header-anchor">#</a> Distributed Mode</h3> <p>Start Spark with TsFile-Spark-Connector in distributed mode (That is, the spark cluster is connected by spark-shell):</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>. /&lt;spark-shell-path&gt;   --jars  tsfile-spark-connector.jar,tsfile-{version}-jar-with-dependencies.jar  --master spark://ip:7077
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Note:</p> <ul><li>&lt;spark-shell-path&gt; is the real path of your spark-shell.</li> <li>Multiple jar packages are separated by commas without any spaces.</li> <li>See https://github.com/apache/iotdb/tree/master/tsfile for how to get TsFile.</li></ul> <h2 id="_4-data-type-correspondence"><a href="#_4-data-type-correspondence" class="header-anchor">#</a> 4. Data Type Correspondence</h2> <table><thead><tr><th>TsFile data type</th> <th>SparkSQL data type</th></tr></thead> <tbody><tr><td>BOOLEAN</td> <td>BooleanType</td></tr> <tr><td>INT32</td> <td>IntegerType</td></tr> <tr><td>INT64</td> <td>LongType</td></tr> <tr><td>FLOAT</td> <td>FloatType</td></tr> <tr><td>DOUBLE</td> <td>DoubleType</td></tr> <tr><td>TEXT</td> <td>StringType</td></tr></tbody></table> <h2 id="_5-schema-inference"><a href="#_5-schema-inference" class="header-anchor">#</a> 5. Schema Inference</h2> <p>The way to display TsFile is dependent on the schema. Take the following TsFile structure as an example: There are three measurements in the TsFile schema: status, temperature, and hardware. The basic information of these three measurements is listed:</p> <center><table style="text-align:center;"><tr><th colspan="2">Name</th><th colspan="2">Type</th><th colspan="2">Encode</th></tr> <tr><td colspan="2">status</td><td colspan="2">Boolean</td><td colspan="2">PLAIN</td></tr> <tr><td colspan="2">temperature</td><td colspan="2">Float</td><td colspan="2">RLE</td></tr> <tr><td colspan="2">hardware</td><td colspan="2">Text</td><td colspan="2">PLAIN</td></tr></table></center> <p>The existing data in the TsFile are:</p> <center><table style="text-align:center;"><tr><th colspan="4">device:root.ln.wf01.wt01</th><th colspan="4">device:root.ln.wf02.wt02</th></tr> <tr><th colspan="2">status</th><th colspan="2">temperature</th><th colspan="2">hardware</th><th colspan="2">status</th></tr> <tr><th>time</th><th>value</th><th>time</th><th>value</th><th>time</th><th>value</th><th>time</th><th>value</th></tr> <tr><td>1</td><td>True</td><td>1</td><td>2.2</td><td>2</td><td>&quot;aaa&quot;</td><td>1</td><td>True</td></tr> <tr><td>3</td><td>True</td><td>2</td><td>2.2</td><td>4</td><td>&quot;bbb&quot;</td><td>2</td><td>False</td></tr> <tr><td>5</td><td> False </td><td>3</td><td>2.1</td><td>6</td><td>&quot;ccc&quot;</td><td>4</td><td>True</td></tr></table></center> <p>The corresponding SparkSQL table is:</p> <table><thead><tr><th>time</th> <th>root.ln.wf02.wt02.temperature</th> <th>root.ln.wf02.wt02.status</th> <th>root.ln.wf02.wt02.hardware</th> <th>root.ln.wf01.wt01.temperature</th> <th>root.ln.wf01.wt01.status</th> <th>root.ln.wf01.wt01.hardware</th></tr></thead> <tbody><tr><td>1</td> <td>null</td> <td>true</td> <td>null</td> <td>2.2</td> <td>true</td> <td>null</td></tr> <tr><td>2</td> <td>null</td> <td>false</td> <td>aaa</td> <td>2.2</td> <td>null</td> <td>null</td></tr> <tr><td>3</td> <td>null</td> <td>null</td> <td>null</td> <td>2.1</td> <td>true</td> <td>null</td></tr> <tr><td>4</td> <td>null</td> <td>true</td> <td>bbb</td> <td>null</td> <td>null</td> <td>null</td></tr> <tr><td>5</td> <td>null</td> <td>null</td> <td>null</td> <td>null</td> <td>false</td> <td>null</td></tr> <tr><td>6</td> <td>null</td> <td>null</td> <td>ccc</td> <td>null</td> <td>null</td> <td>null</td></tr></tbody></table> <p>You can also use narrow table form which as follows: (You can see part 6 about how to use narrow form)</p> <table><thead><tr><th>time</th> <th>device_name</th> <th>status</th> <th>hardware</th> <th>temperature</th></tr></thead> <tbody><tr><td>1</td> <td>root.ln.wf02.wt01</td> <td>true</td> <td>null</td> <td>2.2</td></tr> <tr><td>1</td> <td>root.ln.wf02.wt02</td> <td>true</td> <td>null</td> <td>null</td></tr> <tr><td>2</td> <td>root.ln.wf02.wt01</td> <td>null</td> <td>null</td> <td>2.2</td></tr> <tr><td>2</td> <td>root.ln.wf02.wt02</td> <td>false</td> <td>aaa</td> <td>null</td></tr> <tr><td>3</td> <td>root.ln.wf02.wt01</td> <td>true</td> <td>null</td> <td>2.1</td></tr> <tr><td>4</td> <td>root.ln.wf02.wt02</td> <td>true</td> <td>bbb</td> <td>null</td></tr> <tr><td>5</td> <td>root.ln.wf02.wt01</td> <td>false</td> <td>null</td> <td>null</td></tr> <tr><td>6</td> <td>root.ln.wf02.wt02</td> <td>null</td> <td>ccc</td> <td>null</td></tr></tbody></table> <h2 id="_6-scala-api"><a href="#_6-scala-api" class="header-anchor">#</a> 6. Scala API</h2> <p>NOTE: Remember to assign necessary read and write permissions in advance.</p> <h3 id="example-1-read-from-the-local-file-system"><a href="#example-1-read-from-the-local-file-system" class="header-anchor">#</a> Example 1: read from the local file system</h3> <div class="language-scala line-numbers-mode"><pre class="language-scala"><code><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>iotdb<span class="token punctuation">.</span>spark<span class="token punctuation">.</span>tsfile<span class="token punctuation">.</span></span>_
<span class="token keyword">val</span> wide_df <span class="token operator">=</span> spark<span class="token punctuation">.</span>read<span class="token punctuation">.</span>tsfile<span class="token punctuation">(</span><span class="token string">&quot;test.tsfile&quot;</span><span class="token punctuation">)</span>  
wide_df<span class="token punctuation">.</span>show

<span class="token keyword">val</span> narrow_df <span class="token operator">=</span> spark<span class="token punctuation">.</span>read<span class="token punctuation">.</span>tsfile<span class="token punctuation">(</span><span class="token string">&quot;test.tsfile&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>  
narrow_df<span class="token punctuation">.</span>show
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="example-2-read-from-the-hadoop-file-system"><a href="#example-2-read-from-the-hadoop-file-system" class="header-anchor">#</a> Example 2: read from the hadoop file system</h3> <div class="language-scala line-numbers-mode"><pre class="language-scala"><code><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>iotdb<span class="token punctuation">.</span>spark<span class="token punctuation">.</span>tsfile<span class="token punctuation">.</span></span>_
<span class="token keyword">val</span> wide_df <span class="token operator">=</span> spark<span class="token punctuation">.</span>read<span class="token punctuation">.</span>tsfile<span class="token punctuation">(</span><span class="token string">&quot;hdfs://localhost:9000/test.tsfile&quot;</span><span class="token punctuation">)</span> 
wide_df<span class="token punctuation">.</span>show

<span class="token keyword">val</span> narrow_df <span class="token operator">=</span> spark<span class="token punctuation">.</span>read<span class="token punctuation">.</span>tsfile<span class="token punctuation">(</span><span class="token string">&quot;hdfs://localhost:9000/test.tsfile&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>  
narrow_df<span class="token punctuation">.</span>show
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="example-3-read-from-a-specific-directory"><a href="#example-3-read-from-a-specific-directory" class="header-anchor">#</a> Example 3: read from a specific directory</h3> <div class="language-scala line-numbers-mode"><pre class="language-scala"><code><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>iotdb<span class="token punctuation">.</span>spark<span class="token punctuation">.</span>tsfile<span class="token punctuation">.</span></span>_
<span class="token keyword">val</span> df <span class="token operator">=</span> spark<span class="token punctuation">.</span>read<span class="token punctuation">.</span>tsfile<span class="token punctuation">(</span><span class="token string">&quot;hdfs://localhost:9000/usr/hadoop&quot;</span><span class="token punctuation">)</span> 
df<span class="token punctuation">.</span>show
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Note 1: Global time ordering of all TsFiles in a directory is not supported now.</p> <p>Note 2: Measurements of the same name should have the same schema.</p> <h3 id="example-4-query-in-wide-form"><a href="#example-4-query-in-wide-form" class="header-anchor">#</a> Example 4: query in wide form</h3> <div class="language-scala line-numbers-mode"><pre class="language-scala"><code><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>iotdb<span class="token punctuation">.</span>spark<span class="token punctuation">.</span>tsfile<span class="token punctuation">.</span></span>_
<span class="token keyword">val</span> df <span class="token operator">=</span> spark<span class="token punctuation">.</span>read<span class="token punctuation">.</span>tsfile<span class="token punctuation">(</span><span class="token string">&quot;hdfs://localhost:9000/test.tsfile&quot;</span><span class="token punctuation">)</span> 
df<span class="token punctuation">.</span>createOrReplaceTempView<span class="token punctuation">(</span><span class="token string">&quot;tsfile_table&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">val</span> newDf <span class="token operator">=</span> spark<span class="token punctuation">.</span>sql<span class="token punctuation">(</span><span class="token string">&quot;select * from tsfile_table where `device_1.sensor_1`&gt;0 and `device_1.sensor_2` &lt; 22&quot;</span><span class="token punctuation">)</span>
newDf<span class="token punctuation">.</span>show
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-scala line-numbers-mode"><pre class="language-scala"><code><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>iotdb<span class="token punctuation">.</span>spark<span class="token punctuation">.</span>tsfile<span class="token punctuation">.</span></span>_
<span class="token keyword">val</span> df <span class="token operator">=</span> spark<span class="token punctuation">.</span>read<span class="token punctuation">.</span>tsfile<span class="token punctuation">(</span><span class="token string">&quot;hdfs://localhost:9000/test.tsfile&quot;</span><span class="token punctuation">)</span> 
df<span class="token punctuation">.</span>createOrReplaceTempView<span class="token punctuation">(</span><span class="token string">&quot;tsfile_table&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">val</span> newDf <span class="token operator">=</span> spark<span class="token punctuation">.</span>sql<span class="token punctuation">(</span><span class="token string">&quot;select count(*) from tsfile_table&quot;</span><span class="token punctuation">)</span>
newDf<span class="token punctuation">.</span>show
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="example-5-query-in-narrow-form"><a href="#example-5-query-in-narrow-form" class="header-anchor">#</a> Example 5: query in narrow form</h3> <div class="language-scala line-numbers-mode"><pre class="language-scala"><code><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>iotdb<span class="token punctuation">.</span>spark<span class="token punctuation">.</span>tsfile<span class="token punctuation">.</span></span>_
<span class="token keyword">val</span> df <span class="token operator">=</span> spark<span class="token punctuation">.</span>read<span class="token punctuation">.</span>tsfile<span class="token punctuation">(</span><span class="token string">&quot;hdfs://localhost:9000/test.tsfile&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> 
df<span class="token punctuation">.</span>createOrReplaceTempView<span class="token punctuation">(</span><span class="token string">&quot;tsfile_table&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">val</span> newDf <span class="token operator">=</span> spark<span class="token punctuation">.</span>sql<span class="token punctuation">(</span><span class="token string">&quot;select * from tsfile_table where device_name = 'root.ln.wf02.wt02' and temperature &gt; 5&quot;</span><span class="token punctuation">)</span>
newDf<span class="token punctuation">.</span>show
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-scala line-numbers-mode"><pre class="language-scala"><code><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>iotdb<span class="token punctuation">.</span>spark<span class="token punctuation">.</span>tsfile<span class="token punctuation">.</span></span>_
<span class="token keyword">val</span> df <span class="token operator">=</span> spark<span class="token punctuation">.</span>read<span class="token punctuation">.</span>tsfile<span class="token punctuation">(</span><span class="token string">&quot;hdfs://localhost:9000/test.tsfile&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> 
df<span class="token punctuation">.</span>createOrReplaceTempView<span class="token punctuation">(</span><span class="token string">&quot;tsfile_table&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">val</span> newDf <span class="token operator">=</span> spark<span class="token punctuation">.</span>sql<span class="token punctuation">(</span><span class="token string">&quot;select count(*) from tsfile_table&quot;</span><span class="token punctuation">)</span>
newDf<span class="token punctuation">.</span>show
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="example-6-write-in-wide-form"><a href="#example-6-write-in-wide-form" class="header-anchor">#</a> Example 6: write in wide form</h3> <div class="language-scala line-numbers-mode"><pre class="language-scala"><code><span class="token comment">// we only support wide_form table to write</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>iotdb<span class="token punctuation">.</span>spark<span class="token punctuation">.</span>tsfile<span class="token punctuation">.</span></span>_

<span class="token keyword">val</span> df <span class="token operator">=</span> spark<span class="token punctuation">.</span>read<span class="token punctuation">.</span>tsfile<span class="token punctuation">(</span><span class="token string">&quot;hdfs://localhost:9000/test.tsfile&quot;</span><span class="token punctuation">)</span> 
df<span class="token punctuation">.</span>show
df<span class="token punctuation">.</span>write<span class="token punctuation">.</span>tsfile<span class="token punctuation">(</span><span class="token string">&quot;hdfs://localhost:9000/output&quot;</span><span class="token punctuation">)</span>

<span class="token keyword">val</span> newDf <span class="token operator">=</span> spark<span class="token punctuation">.</span>read<span class="token punctuation">.</span>tsfile<span class="token punctuation">(</span><span class="token string">&quot;hdfs://localhost:9000/output&quot;</span><span class="token punctuation">)</span>
newDf<span class="token punctuation">.</span>show
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="example-6-write-in-narrow-form"><a href="#example-6-write-in-narrow-form" class="header-anchor">#</a> Example 6: write in narrow form</h2> <div class="language-scala line-numbers-mode"><pre class="language-scala"><code><span class="token comment">// we only support wide_form table to write</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>iotdb<span class="token punctuation">.</span>spark<span class="token punctuation">.</span>tsfile<span class="token punctuation">.</span></span>_

<span class="token keyword">val</span> df <span class="token operator">=</span> spark<span class="token punctuation">.</span>read<span class="token punctuation">.</span>tsfile<span class="token punctuation">(</span><span class="token string">&quot;hdfs://localhost:9000/test.tsfile&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> 
df<span class="token punctuation">.</span>show
df<span class="token punctuation">.</span>write<span class="token punctuation">.</span>tsfile<span class="token punctuation">(</span><span class="token string">&quot;hdfs://localhost:9000/output&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>

<span class="token keyword">val</span> newDf <span class="token operator">=</span> spark<span class="token punctuation">.</span>read<span class="token punctuation">.</span>tsfile<span class="token punctuation">(</span><span class="token string">&quot;hdfs://localhost:9000/output&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
newDf<span class="token punctuation">.</span>show
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="appendix-a-old-design-of-schema-inference"><a href="#appendix-a-old-design-of-schema-inference" class="header-anchor">#</a> Appendix A: Old Design of Schema Inference</h2> <p>The way to display TsFile is related to TsFile Schema. Take the following TsFile structure as an example: There are three measurements in the Schema of TsFile: status, temperature, and hardware. The basic info of these three Measurements is:</p> <center><table style="text-align:center;"><tr><th colspan="2">Name</th><th colspan="2">Type</th><th colspan="2">Encode</th></tr> <tr><td colspan="2">status</td><td colspan="2">Boolean</td><td colspan="2">PLAIN</td></tr> <tr><td colspan="2">temperature</td><td colspan="2">Float</td><td colspan="2">RLE</td></tr> <tr><td colspan="2">hardware</td><td colspan="2">Text</td><td colspan="2">PLAIN</td></tr></table> <span>Basic info of Measurements</span></center> <p>The existing data in the file are:</p> <center><table style="text-align:center;"><tr><th colspan="4">delta\_object:root.ln.wf01.wt01</th><th colspan="4">delta\_object:root.ln.wf02.wt02</th><th colspan="4">delta\_object:root.sgcc.wf03.wt01</th></tr> <tr><th colspan="2">status</th><th colspan="2">temperature</th><th colspan="2">hardware</th><th colspan="2">status</th><th colspan="2">status</th><th colspan="2">temperature</th></tr> <tr><th>time</th><th>value</th><th>time</th><th>value</th><th>time</th><th>value</th><th>time</th><th>value</th><th>time</th><th>value</th><th>time</th><th>value</th></tr> <tr><td>1</td><td>True</td><td>1</td><td>2.2</td><td>2</td><td>&quot;aaa&quot;</td><td>1</td><td>True</td><td>2</td><td>True</td><td>3</td><td>3.3</td></tr> <tr><td>3</td><td>True</td><td>2</td><td>2.2</td><td>4</td><td>&quot;bbb&quot;</td><td>2</td><td>False</td><td>3</td><td>True</td><td>6</td><td>6.6</td></tr> <tr><td>5</td><td> False </td><td>3</td><td>2.1</td><td>6</td><td>&quot;ccc&quot;</td><td>4</td><td>True</td><td>4</td><td>True</td><td>8</td><td>8.8</td></tr> <tr><td>7</td><td> True </td><td>4</td><td>2.0</td><td>8</td><td>&quot;ddd&quot;</td><td>5</td><td>False</td><td>6</td><td>True</td><td>9</td><td>9.9</td></tr></table> <span>A set of time-series data</span></center>
There are two ways to show a set of time-series data:
<h4 id="the-default-way"><a href="#the-default-way" class="header-anchor">#</a> the default way</h4> <p>Two columns are created to store the full path of the device: time(LongType) and delta_object(StringType).</p> <ul><li><code>time</code> : Timestamp, LongType</li> <li><code>delta_object</code> : Delta_object ID, StringType</li></ul> <p>Next, a column is created for each Measurement to store the specific data. The SparkSQL table structure is:</p> <center><table style="text-align:center;"><tr><th>time(LongType)</th><th> delta\_object(StringType)</th><th>status(BooleanType)</th><th>temperature(FloatType)</th><th>hardware(StringType)</th></tr> <tr><td>1</td><td> root.ln.wf01.wt01 </td><td>True</td><td>2.2</td><td>null</td></tr> <tr><td>1</td><td> root.ln.wf02.wt02 </td><td>True</td><td>null</td><td>null</td></tr> <tr><td>2</td><td> root.ln.wf01.wt01 </td><td>null</td><td>2.2</td><td>null</td></tr> <tr><td>2</td><td> root.ln.wf02.wt02 </td><td>False</td><td>null</td><td>&quot;aaa&quot;</td></tr> <tr><td>2</td><td> root.sgcc.wf03.wt01 </td><td>True</td><td>null</td><td>null</td></tr> <tr><td>3</td><td> root.ln.wf01.wt01 </td><td>True</td><td>2.1</td><td>null</td></tr> <tr><td>3</td><td> root.sgcc.wf03.wt01 </td><td>True</td><td>3.3</td><td>null</td></tr> <tr><td>4</td><td> root.ln.wf01.wt01 </td><td>null</td><td>2.0</td><td>null</td></tr> <tr><td>4</td><td> root.ln.wf02.wt02 </td><td>True</td><td>null</td><td>&quot;bbb&quot;</td></tr> <tr><td>4</td><td> root.sgcc.wf03.wt01 </td><td>True</td><td>null</td><td>null</td></tr> <tr><td>5</td><td> root.ln.wf01.wt01 </td><td>False</td><td>null</td><td>null</td></tr> <tr><td>5</td><td> root.ln.wf02.wt02 </td><td>False</td><td>null</td><td>null</td></tr> <tr><td>5</td><td> root.sgcc.wf03.wt01 </td><td>True</td><td>null</td><td>null</td></tr> <tr><td>6</td><td> root.ln.wf02.wt02 </td><td>null</td><td>null</td><td>&quot;ccc&quot;</td></tr> <tr><td>6</td><td> root.sgcc.wf03.wt01 </td><td>null</td><td>6.6</td><td>null</td></tr> <tr><td>7</td><td> root.ln.wf01.wt01 </td><td>True</td><td>null</td><td>null</td></tr> <tr><td>8</td><td> root.ln.wf02.wt02 </td><td>null</td><td>null</td><td>&quot;ddd&quot;</td></tr> <tr><td>8</td><td> root.sgcc.wf03.wt01 </td><td>null</td><td>8.8</td><td>null</td></tr> <tr><td>9</td><td> root.sgcc.wf03.wt01 </td><td>null</td><td>9.9</td><td>null</td></tr></table></center> <h4 id="unfold-delta-object-column"><a href="#unfold-delta-object-column" class="header-anchor">#</a> unfold delta_object column</h4> <p>Expand the device column by &quot;.&quot; into multiple columns, ignoring the root directory &quot;root&quot;. Convenient for richer aggregation operations. To use this display way, the parameter &quot;delta_object_name&quot; is set in the table creation statement (refer to Example 5 in Section 5.1 of this manual), as in this example, parameter &quot;delta_object_name&quot; is set to &quot;root.device.turbine&quot;. The number of path layers needs to be one-to-one. At this point, one column is created for each layer of the device path except the &quot;root&quot; layer. The column name is the name in the parameter and the value is the name of the corresponding layer of the device. Next, one column is created for each Measurement to store the specific data.</p> <p>Then SparkSQL Table Structure is as follows:</p> <center><table style="text-align:center;"><tr><th>time(LongType)</th><th> group(StringType)</th><th> field(StringType)</th><th> device(StringType)</th><th>status(BooleanType)</th><th>temperature(FloatType)</th><th>hardware(StringType)</th></tr> <tr><td>1</td><td> ln </td><td> wf01 </td><td> wt01 </td><td>True</td><td>2.2</td><td>null</td></tr> <tr><td>1</td><td> ln </td><td> wf02 </td><td> wt02 </td><td>True</td><td>null</td><td>null</td></tr> <tr><td>2</td><td> ln </td><td> wf01 </td><td> wt01 </td><td>null</td><td>2.2</td><td>null</td></tr> <tr><td>2</td><td> ln </td><td> wf02 </td><td> wt02 </td><td>False</td><td>null</td><td>&quot;aaa&quot;</td></tr> <tr><td>2</td><td> sgcc </td><td> wf03 </td><td> wt01 </td><td>True</td><td>null</td><td>null</td></tr> <tr><td>3</td><td> ln </td><td> wf01 </td><td> wt01 </td><td>True</td><td>2.1</td><td>null</td></tr> <tr><td>3</td><td> sgcc </td><td> wf03 </td><td> wt01 </td><td>True</td><td>3.3</td><td>null</td></tr> <tr><td>4</td><td> ln </td><td> wf01 </td><td> wt01 </td><td>null</td><td>2.0</td><td>null</td></tr> <tr><td>4</td><td> ln </td><td> wf02 </td><td> wt02 </td><td>True</td><td>null</td><td>&quot;bbb&quot;</td></tr> <tr><td>4</td><td> sgcc </td><td> wf03 </td><td> wt01 </td><td>True</td><td>null</td><td>null</td></tr> <tr><td>5</td><td> ln </td><td> wf01 </td><td> wt01 </td><td>False</td><td>null</td><td>null</td></tr> <tr><td>5</td><td> ln </td><td> wf02 </td><td> wt02 </td><td>False</td><td>null</td><td>null</td></tr> <tr><td>5</td><td> sgcc </td><td> wf03 </td><td> wt01 </td><td>True</td><td>null</td><td>null</td></tr> <tr><td>6</td><td> ln </td><td> wf02 </td><td> wt02 </td><td>null</td><td>null</td><td>&quot;ccc&quot;</td></tr> <tr><td>6</td><td> sgcc </td><td> wf03 </td><td> wt01 </td><td>null</td><td>6.6</td><td>null</td></tr> <tr><td>7</td><td> ln </td><td> wf01 </td><td> wt01 </td><td>True</td><td>null</td><td>null</td></tr> <tr><td>8</td><td> ln </td><td> wf02 </td><td> wt02 </td><td>null</td><td>null</td><td>&quot;ddd&quot;</td></tr> <tr><td>8</td><td> sgcc </td><td> wf03 </td><td> wt01 </td><td>null</td><td>8.8</td><td>null</td></tr> <tr><td>9</td><td> sgcc </td><td> wf03 </td><td> wt01 </td><td>null</td><td>9.9</td><td>null</td></tr></table></center> <p>TsFile-Spark-Connector displays one or more TsFiles as a table in SparkSQL By SparkSQL. It also allows users to specify a single directory or use wildcards to match multiple directories. If there are multiple TsFiles, the union of the measurements in all TsFiles will be retained in the table, and the measurement with the same name have the same data type by default. Note that if a situation with the same name but different data types exists, TsFile-Spark-Connector does not guarantee the correctness of the results.</p> <p>The writing process is to write a DataFrame as one or more TsFiles. By default, two columns need to be included: time and delta_object. The rest of the columns are used as Measurement. If user wants to write the second table structure back to TsFile, user can set the &quot;delta_object_name&quot; parameter(refer to Section 5.1 of Section 5.1 of this manual).</p> <h2 id="appendix-b-old-note"><a href="#appendix-b-old-note" class="header-anchor">#</a> Appendix B: Old Note</h2> <p>NOTE: Check the jar packages in the root directory  of your Spark and replace libthrift-0.9.2.jar and libfb303-0.9.2.jar with libthrift-0.9.1.jar and libfb303-0.9.1.jar respectively.</p></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/UserGuide/V0.11.x/Ecosystem Integration/MapReduce TsFile.html" class="prev">
          MapReduce TsFile
        </a></span> <span class="next"><a href="/UserGuide/V0.11.x/Ecosystem Integration/Spark IoTDB.html">
          Spark IoTDB
        </a>
        →
      </span></p></div> <p style="text-align: center;">Copyright © 2020 The Apache Software Foundation.<br>
     Apache and the Apache feather logo are trademarks of The Apache Software Foundation</p> <p style="text-align: center; margin-top: 10px; color: #444">
    Contact us: Join QQ Group 659990460 | Add friend <i>tietouqiao</i> and be invited to Wechat Group<br>
    see <a href="https://github.com/apache/iotdb/issues/1995">Join the community</a> for more</p></main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.cdf3999a.js" defer></script><script src="/assets/js/3.588efd8d.js" defer></script><script src="/assets/js/121.6439566f.js" defer></script>
  </body>
</html>