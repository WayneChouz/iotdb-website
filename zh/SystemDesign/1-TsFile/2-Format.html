<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title> </title>
    <meta name="description" content=" ">
    <meta name="generator" content="VuePress 1.4.0">
    <link rel="icon" href="/favicon.ico">
  <meta name="Description" content="Apache IoTDB: Time Series Database for IoT">
  <meta name="Keywords" content="TSDB, time series, time series database, IoTDB, IoT database, IoT data management,时序数据库, 时间序列管理, IoTDB, 物联网数据库, 实时数据库, 物联网数据管理, 物联网数据">
  <meta name="baidu-site-verification" content="wfKETzB3OT">
  <meta name="google-site-verification" content="mZWAoRY0yj_HAr-s47zHCGHzx5Ju-RVm5wDbPnwQYFo">
    
    <link rel="preload" href="/assets/css/0.styles.41e93042.css" as="style"><link rel="preload" href="/assets/js/app.a929ea2a.js" as="script"><link rel="preload" href="/assets/js/4.318808d1.js" as="script"><link rel="preload" href="/assets/js/3.961db017.js" as="script"><link rel="preload" href="/assets/js/176.5305befe.js" as="script"><link rel="prefetch" href="/assets/js/10.994a05c2.js"><link rel="prefetch" href="/assets/js/100.3bd0494b.js"><link rel="prefetch" href="/assets/js/101.983fde1d.js"><link rel="prefetch" href="/assets/js/102.55de3b75.js"><link rel="prefetch" href="/assets/js/103.526fbb70.js"><link rel="prefetch" href="/assets/js/104.d14d9697.js"><link rel="prefetch" href="/assets/js/105.8668be29.js"><link rel="prefetch" href="/assets/js/106.bb5b8dce.js"><link rel="prefetch" href="/assets/js/107.8389eb3b.js"><link rel="prefetch" href="/assets/js/108.1b44a394.js"><link rel="prefetch" href="/assets/js/109.89f7c0ad.js"><link rel="prefetch" href="/assets/js/11.acd123b3.js"><link rel="prefetch" href="/assets/js/110.1ccd9e79.js"><link rel="prefetch" href="/assets/js/111.de99a8e3.js"><link rel="prefetch" href="/assets/js/112.ec606ae8.js"><link rel="prefetch" href="/assets/js/113.d99e69be.js"><link rel="prefetch" href="/assets/js/114.a535b853.js"><link rel="prefetch" href="/assets/js/115.9916b3dd.js"><link rel="prefetch" href="/assets/js/116.102b7fff.js"><link rel="prefetch" href="/assets/js/117.c8568066.js"><link rel="prefetch" href="/assets/js/118.970da558.js"><link rel="prefetch" href="/assets/js/119.5cbe8292.js"><link rel="prefetch" href="/assets/js/12.3e951e54.js"><link rel="prefetch" href="/assets/js/120.a5a6fa18.js"><link rel="prefetch" href="/assets/js/121.b4812803.js"><link rel="prefetch" href="/assets/js/122.6f0170c9.js"><link rel="prefetch" href="/assets/js/123.e111df2b.js"><link rel="prefetch" href="/assets/js/124.d9d93f40.js"><link rel="prefetch" href="/assets/js/125.9181f55b.js"><link rel="prefetch" href="/assets/js/126.582a56b6.js"><link rel="prefetch" href="/assets/js/127.21322d95.js"><link rel="prefetch" href="/assets/js/128.22dcd37d.js"><link rel="prefetch" href="/assets/js/129.70e16618.js"><link rel="prefetch" href="/assets/js/13.806bc0a0.js"><link rel="prefetch" href="/assets/js/130.bc5dc8a9.js"><link rel="prefetch" href="/assets/js/131.8d3fa782.js"><link rel="prefetch" href="/assets/js/132.7df232e6.js"><link rel="prefetch" href="/assets/js/133.e7530e95.js"><link rel="prefetch" href="/assets/js/134.05cc2be7.js"><link rel="prefetch" href="/assets/js/135.a94efa70.js"><link rel="prefetch" href="/assets/js/136.522268a9.js"><link rel="prefetch" href="/assets/js/137.7df0e4dd.js"><link rel="prefetch" href="/assets/js/138.91946efa.js"><link rel="prefetch" href="/assets/js/139.a6aa74d8.js"><link rel="prefetch" href="/assets/js/14.5c67dacd.js"><link rel="prefetch" href="/assets/js/140.e30ef46a.js"><link rel="prefetch" href="/assets/js/141.88aa9c20.js"><link rel="prefetch" href="/assets/js/142.5ab39702.js"><link rel="prefetch" href="/assets/js/143.287fe8e8.js"><link rel="prefetch" href="/assets/js/144.4777a7c6.js"><link rel="prefetch" href="/assets/js/145.b00898cc.js"><link rel="prefetch" href="/assets/js/146.dccefa60.js"><link rel="prefetch" href="/assets/js/147.b3142e10.js"><link rel="prefetch" href="/assets/js/148.235017b1.js"><link rel="prefetch" href="/assets/js/149.778b6ea1.js"><link rel="prefetch" href="/assets/js/15.631a18d8.js"><link rel="prefetch" href="/assets/js/150.4f876ec1.js"><link rel="prefetch" href="/assets/js/151.502b248a.js"><link rel="prefetch" href="/assets/js/152.051f3928.js"><link rel="prefetch" href="/assets/js/153.35533999.js"><link rel="prefetch" href="/assets/js/154.4f930d7b.js"><link rel="prefetch" href="/assets/js/155.fa2d5d73.js"><link rel="prefetch" href="/assets/js/156.f0aa9856.js"><link rel="prefetch" href="/assets/js/157.872fc7cc.js"><link rel="prefetch" href="/assets/js/158.99c3be14.js"><link rel="prefetch" href="/assets/js/159.d0f7c23b.js"><link rel="prefetch" href="/assets/js/16.97d23e0b.js"><link rel="prefetch" href="/assets/js/160.f31e1f39.js"><link rel="prefetch" href="/assets/js/161.55c6ed42.js"><link rel="prefetch" href="/assets/js/162.848a294c.js"><link rel="prefetch" href="/assets/js/163.de3c75cb.js"><link rel="prefetch" href="/assets/js/164.1143a2c2.js"><link rel="prefetch" href="/assets/js/165.52c8e199.js"><link rel="prefetch" href="/assets/js/166.55048af6.js"><link rel="prefetch" href="/assets/js/167.0dbbe67d.js"><link rel="prefetch" href="/assets/js/168.8a3d9553.js"><link rel="prefetch" href="/assets/js/169.2c20512d.js"><link rel="prefetch" href="/assets/js/17.0ca1d1cd.js"><link rel="prefetch" href="/assets/js/170.8e8790c3.js"><link rel="prefetch" href="/assets/js/171.111c9c76.js"><link rel="prefetch" href="/assets/js/172.d001d4bd.js"><link rel="prefetch" href="/assets/js/173.d91006eb.js"><link rel="prefetch" href="/assets/js/174.5a8b55ff.js"><link rel="prefetch" href="/assets/js/175.6e654284.js"><link rel="prefetch" href="/assets/js/177.3db3b453.js"><link rel="prefetch" href="/assets/js/178.ff488f23.js"><link rel="prefetch" href="/assets/js/179.8f97f67b.js"><link rel="prefetch" href="/assets/js/18.11066394.js"><link rel="prefetch" href="/assets/js/180.c63ebd37.js"><link rel="prefetch" href="/assets/js/181.a6f94472.js"><link rel="prefetch" href="/assets/js/182.97ce9c7f.js"><link rel="prefetch" href="/assets/js/183.985f2f0c.js"><link rel="prefetch" href="/assets/js/184.1ebe30f7.js"><link rel="prefetch" href="/assets/js/185.46533b8e.js"><link rel="prefetch" href="/assets/js/186.c6a7035c.js"><link rel="prefetch" href="/assets/js/187.6e7066de.js"><link rel="prefetch" href="/assets/js/188.f5ad52b1.js"><link rel="prefetch" href="/assets/js/189.c9abec15.js"><link rel="prefetch" href="/assets/js/19.489a956d.js"><link rel="prefetch" href="/assets/js/190.e92b0cc9.js"><link rel="prefetch" href="/assets/js/191.7a2d8214.js"><link rel="prefetch" href="/assets/js/192.8113e06a.js"><link rel="prefetch" href="/assets/js/193.0b87400a.js"><link rel="prefetch" href="/assets/js/194.2c24ebdf.js"><link rel="prefetch" href="/assets/js/195.d33f239d.js"><link rel="prefetch" href="/assets/js/196.7ed0599e.js"><link rel="prefetch" href="/assets/js/197.374c6328.js"><link rel="prefetch" href="/assets/js/198.a4febb02.js"><link rel="prefetch" href="/assets/js/199.d5783b98.js"><link rel="prefetch" href="/assets/js/20.04a7cebe.js"><link rel="prefetch" href="/assets/js/200.32e89666.js"><link rel="prefetch" href="/assets/js/201.b6ce6562.js"><link rel="prefetch" href="/assets/js/202.0059f8cd.js"><link rel="prefetch" href="/assets/js/203.378af244.js"><link rel="prefetch" href="/assets/js/204.4a16f71c.js"><link rel="prefetch" href="/assets/js/205.96055914.js"><link rel="prefetch" href="/assets/js/206.2b295abb.js"><link rel="prefetch" href="/assets/js/207.9c98ac01.js"><link rel="prefetch" href="/assets/js/208.8dec1b49.js"><link rel="prefetch" href="/assets/js/209.2ca7552c.js"><link rel="prefetch" href="/assets/js/21.b7cf9c17.js"><link rel="prefetch" href="/assets/js/210.652fb912.js"><link rel="prefetch" href="/assets/js/211.c479cd4f.js"><link rel="prefetch" href="/assets/js/212.5c6317ca.js"><link rel="prefetch" href="/assets/js/213.f04f7aac.js"><link rel="prefetch" href="/assets/js/214.92b799eb.js"><link rel="prefetch" href="/assets/js/215.d45d4ea6.js"><link rel="prefetch" href="/assets/js/216.ea92cf6b.js"><link rel="prefetch" href="/assets/js/217.9ad05e82.js"><link rel="prefetch" href="/assets/js/218.1eedb2bc.js"><link rel="prefetch" href="/assets/js/219.1e5484a1.js"><link rel="prefetch" href="/assets/js/22.5dedfbfb.js"><link rel="prefetch" href="/assets/js/220.f2c8226d.js"><link rel="prefetch" href="/assets/js/221.f49e7092.js"><link rel="prefetch" href="/assets/js/222.e0dde344.js"><link rel="prefetch" href="/assets/js/223.bc49f758.js"><link rel="prefetch" href="/assets/js/224.facb5c88.js"><link rel="prefetch" href="/assets/js/225.a4493886.js"><link rel="prefetch" href="/assets/js/226.0020d431.js"><link rel="prefetch" href="/assets/js/227.066093d7.js"><link rel="prefetch" href="/assets/js/228.d1f807e8.js"><link rel="prefetch" href="/assets/js/229.a88bfd76.js"><link rel="prefetch" href="/assets/js/23.a336f6ff.js"><link rel="prefetch" href="/assets/js/230.9a7d16bb.js"><link rel="prefetch" href="/assets/js/231.2712b03f.js"><link rel="prefetch" href="/assets/js/232.9fdff378.js"><link rel="prefetch" href="/assets/js/233.9032f3d3.js"><link rel="prefetch" href="/assets/js/234.b96921f9.js"><link rel="prefetch" href="/assets/js/235.213cba8f.js"><link rel="prefetch" href="/assets/js/236.03eb11af.js"><link rel="prefetch" href="/assets/js/237.f6372ad7.js"><link rel="prefetch" href="/assets/js/238.d231acb1.js"><link rel="prefetch" href="/assets/js/239.945cbd73.js"><link rel="prefetch" href="/assets/js/24.7f197a26.js"><link rel="prefetch" href="/assets/js/240.826fc193.js"><link rel="prefetch" href="/assets/js/241.174bf03d.js"><link rel="prefetch" href="/assets/js/242.a78c49e6.js"><link rel="prefetch" href="/assets/js/243.95c47f00.js"><link rel="prefetch" href="/assets/js/244.6d220485.js"><link rel="prefetch" href="/assets/js/245.10f078be.js"><link rel="prefetch" href="/assets/js/246.6e9f42de.js"><link rel="prefetch" href="/assets/js/247.94625d84.js"><link rel="prefetch" href="/assets/js/248.5013ee4c.js"><link rel="prefetch" href="/assets/js/249.c1753ee4.js"><link rel="prefetch" href="/assets/js/25.dfd12cbf.js"><link rel="prefetch" href="/assets/js/250.5d2792e3.js"><link rel="prefetch" href="/assets/js/251.206196b0.js"><link rel="prefetch" href="/assets/js/252.c1b6e87b.js"><link rel="prefetch" href="/assets/js/253.85be4468.js"><link rel="prefetch" href="/assets/js/254.19a9a8b0.js"><link rel="prefetch" href="/assets/js/255.0293ef70.js"><link rel="prefetch" href="/assets/js/256.b0e88dce.js"><link rel="prefetch" href="/assets/js/257.e9ad6342.js"><link rel="prefetch" href="/assets/js/258.a50f01c7.js"><link rel="prefetch" href="/assets/js/259.eb9d00eb.js"><link rel="prefetch" href="/assets/js/26.f535772b.js"><link rel="prefetch" href="/assets/js/260.a3a318be.js"><link rel="prefetch" href="/assets/js/261.40d98834.js"><link rel="prefetch" href="/assets/js/262.4d2dd957.js"><link rel="prefetch" href="/assets/js/263.ba20ac35.js"><link rel="prefetch" href="/assets/js/264.d2b2bb09.js"><link rel="prefetch" href="/assets/js/265.540e6c3d.js"><link rel="prefetch" href="/assets/js/266.490cb85d.js"><link rel="prefetch" href="/assets/js/267.c0f516f8.js"><link rel="prefetch" href="/assets/js/268.adef9ddd.js"><link rel="prefetch" href="/assets/js/269.121560c9.js"><link rel="prefetch" href="/assets/js/27.5ea3a133.js"><link rel="prefetch" href="/assets/js/270.70794132.js"><link rel="prefetch" href="/assets/js/271.11b5f875.js"><link rel="prefetch" href="/assets/js/272.f5c7299c.js"><link rel="prefetch" href="/assets/js/273.d4e81fed.js"><link rel="prefetch" href="/assets/js/274.30e20a11.js"><link rel="prefetch" href="/assets/js/275.62fde841.js"><link rel="prefetch" href="/assets/js/276.e36a2423.js"><link rel="prefetch" href="/assets/js/277.97ead1c9.js"><link rel="prefetch" href="/assets/js/278.137015a7.js"><link rel="prefetch" href="/assets/js/279.b3f54797.js"><link rel="prefetch" href="/assets/js/28.44684c3a.js"><link rel="prefetch" href="/assets/js/280.881c850e.js"><link rel="prefetch" href="/assets/js/281.8509f1a4.js"><link rel="prefetch" href="/assets/js/282.ce33fc3f.js"><link rel="prefetch" href="/assets/js/283.3706e8bf.js"><link rel="prefetch" href="/assets/js/284.313b6f09.js"><link rel="prefetch" href="/assets/js/285.25cc3242.js"><link rel="prefetch" href="/assets/js/286.a0f68f86.js"><link rel="prefetch" href="/assets/js/287.be24a703.js"><link rel="prefetch" href="/assets/js/288.4df057ac.js"><link rel="prefetch" href="/assets/js/289.edc7ce3c.js"><link rel="prefetch" href="/assets/js/29.0559e1e4.js"><link rel="prefetch" href="/assets/js/290.f6034ae0.js"><link rel="prefetch" href="/assets/js/291.db058a45.js"><link rel="prefetch" href="/assets/js/292.c13ab7b9.js"><link rel="prefetch" href="/assets/js/293.c0c1fe57.js"><link rel="prefetch" href="/assets/js/294.4f59faa2.js"><link rel="prefetch" href="/assets/js/295.557db476.js"><link rel="prefetch" href="/assets/js/296.7cd1efb0.js"><link rel="prefetch" href="/assets/js/297.1d9f5ac9.js"><link rel="prefetch" href="/assets/js/298.19767d4f.js"><link rel="prefetch" href="/assets/js/299.5d321b2d.js"><link rel="prefetch" href="/assets/js/30.06a43c8b.js"><link rel="prefetch" href="/assets/js/300.ba81a423.js"><link rel="prefetch" href="/assets/js/301.746a42b8.js"><link rel="prefetch" href="/assets/js/302.975cfd38.js"><link rel="prefetch" href="/assets/js/303.f2c3cbc8.js"><link rel="prefetch" href="/assets/js/304.da145888.js"><link rel="prefetch" href="/assets/js/305.0fa3509a.js"><link rel="prefetch" href="/assets/js/306.cdd7698c.js"><link rel="prefetch" href="/assets/js/307.b3167ec7.js"><link rel="prefetch" href="/assets/js/308.b16371f6.js"><link rel="prefetch" href="/assets/js/309.b25c4dd2.js"><link rel="prefetch" href="/assets/js/31.a8b8e352.js"><link rel="prefetch" href="/assets/js/310.9031f8ba.js"><link rel="prefetch" href="/assets/js/311.808e2e34.js"><link rel="prefetch" href="/assets/js/312.6feabcd8.js"><link rel="prefetch" href="/assets/js/313.f1d6fa64.js"><link rel="prefetch" href="/assets/js/314.a93ecb1a.js"><link rel="prefetch" href="/assets/js/315.14a258d9.js"><link rel="prefetch" href="/assets/js/316.f75165f6.js"><link rel="prefetch" href="/assets/js/317.0a4fa577.js"><link rel="prefetch" href="/assets/js/318.068152b7.js"><link rel="prefetch" href="/assets/js/319.077d844e.js"><link rel="prefetch" href="/assets/js/32.97a3a08f.js"><link rel="prefetch" href="/assets/js/320.b0bc674a.js"><link rel="prefetch" href="/assets/js/33.362d8220.js"><link rel="prefetch" href="/assets/js/34.03300f18.js"><link rel="prefetch" href="/assets/js/35.0914a7c9.js"><link rel="prefetch" href="/assets/js/36.fbd4d440.js"><link rel="prefetch" href="/assets/js/37.4f3897c8.js"><link rel="prefetch" href="/assets/js/38.a5ebe03a.js"><link rel="prefetch" href="/assets/js/39.3341e002.js"><link rel="prefetch" href="/assets/js/40.d5e6290d.js"><link rel="prefetch" href="/assets/js/41.a9da8d3a.js"><link rel="prefetch" href="/assets/js/42.f5472b67.js"><link rel="prefetch" href="/assets/js/43.ca8181f5.js"><link rel="prefetch" href="/assets/js/44.4ca70bd0.js"><link rel="prefetch" href="/assets/js/45.c3a0e626.js"><link rel="prefetch" href="/assets/js/46.42a3a8fd.js"><link rel="prefetch" href="/assets/js/47.285022a6.js"><link rel="prefetch" href="/assets/js/48.28445099.js"><link rel="prefetch" href="/assets/js/49.e6cebf8a.js"><link rel="prefetch" href="/assets/js/5.f194f6eb.js"><link rel="prefetch" href="/assets/js/50.451ea0d9.js"><link rel="prefetch" href="/assets/js/51.af6ed667.js"><link rel="prefetch" href="/assets/js/52.df717655.js"><link rel="prefetch" href="/assets/js/53.c4708c8e.js"><link rel="prefetch" href="/assets/js/54.9b2d74dc.js"><link rel="prefetch" href="/assets/js/55.dc2b8255.js"><link rel="prefetch" href="/assets/js/56.6aabac00.js"><link rel="prefetch" href="/assets/js/57.bd4d4856.js"><link rel="prefetch" href="/assets/js/58.a653e624.js"><link rel="prefetch" href="/assets/js/59.e216b510.js"><link rel="prefetch" href="/assets/js/6.e06da808.js"><link rel="prefetch" href="/assets/js/60.40e640ef.js"><link rel="prefetch" href="/assets/js/61.ff3beb9e.js"><link rel="prefetch" href="/assets/js/62.4b87c481.js"><link rel="prefetch" href="/assets/js/63.2190a74a.js"><link rel="prefetch" href="/assets/js/64.50a0a531.js"><link rel="prefetch" href="/assets/js/65.6d12012b.js"><link rel="prefetch" href="/assets/js/66.4d7da172.js"><link rel="prefetch" href="/assets/js/67.bf94b19d.js"><link rel="prefetch" href="/assets/js/68.796e94a7.js"><link rel="prefetch" href="/assets/js/69.23ec4d48.js"><link rel="prefetch" href="/assets/js/7.7e2cf059.js"><link rel="prefetch" href="/assets/js/70.326f82da.js"><link rel="prefetch" href="/assets/js/71.2736d9e8.js"><link rel="prefetch" href="/assets/js/72.36e5a760.js"><link rel="prefetch" href="/assets/js/73.3da2994c.js"><link rel="prefetch" href="/assets/js/74.f0fe19a6.js"><link rel="prefetch" href="/assets/js/75.b8ca6f13.js"><link rel="prefetch" href="/assets/js/76.fc34c790.js"><link rel="prefetch" href="/assets/js/77.a6c15ec0.js"><link rel="prefetch" href="/assets/js/78.aed2146b.js"><link rel="prefetch" href="/assets/js/79.a5c0de59.js"><link rel="prefetch" href="/assets/js/8.e160511d.js"><link rel="prefetch" href="/assets/js/80.981d7f5f.js"><link rel="prefetch" href="/assets/js/81.fefb83f4.js"><link rel="prefetch" href="/assets/js/82.8a1da73d.js"><link rel="prefetch" href="/assets/js/83.13219cd1.js"><link rel="prefetch" href="/assets/js/84.df5cdea9.js"><link rel="prefetch" href="/assets/js/85.56d6e9fc.js"><link rel="prefetch" href="/assets/js/86.bac95bcf.js"><link rel="prefetch" href="/assets/js/87.5a6e3037.js"><link rel="prefetch" href="/assets/js/88.4d0e1b1a.js"><link rel="prefetch" href="/assets/js/89.b6b785c4.js"><link rel="prefetch" href="/assets/js/9.7bb72d86.js"><link rel="prefetch" href="/assets/js/90.bdb668b0.js"><link rel="prefetch" href="/assets/js/91.558139fb.js"><link rel="prefetch" href="/assets/js/92.01385aeb.js"><link rel="prefetch" href="/assets/js/93.80ac7510.js"><link rel="prefetch" href="/assets/js/94.ef24a9a7.js"><link rel="prefetch" href="/assets/js/95.c6049771.js"><link rel="prefetch" href="/assets/js/96.beee0b97.js"><link rel="prefetch" href="/assets/js/97.1f028b4c.js"><link rel="prefetch" href="/assets/js/98.17bcb81d.js"><link rel="prefetch" href="/assets/js/99.4b95a7fd.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.e175f4a9.js">
    <link rel="stylesheet" href="/assets/css/0.styles.41e93042.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/zh/" class="home-link router-link-active"><img src="/img/logo.png" alt=" " class="logo"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">文档</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/UserGuide/Master/0-Get Started/1-QuickStart.html" class="nav-link">In progress</a></li><li class="dropdown-item"><!----> <a href="/zh/UserGuide/V0.9.x/0-Get Started/1-QuickStart.html" class="nav-link">V0.9.x</a></li><li class="dropdown-item"><!----> <a href="/zh/UserGuide/V0.8.x/0-Get Started/1-QuickStart.html" class="nav-link">V0.8.x</a></li></ul></div></div><div class="nav-item"><a href="/zh/SystemDesign/0-Architecture/1-Architecture.html" class="nav-link">系统设计</a></div><div class="nav-item"><a href="/zh/Download/" class="nav-link">下载</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">社区</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://cwiki.apache.org/confluence/display/iotdb" class="nav-link external">
  Wiki
  <!----></a></li><li class="dropdown-item"><!----> <a href="/zh/Community/Community-Project Committers.html" class="nav-link">开发人员</a></li><li class="dropdown-item"><!----> <a href="/zh/Community/Community-Powered By.html" class="nav-link">技术支持</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">开发</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/Development/VoteRelease.html" class="nav-link">如何投票</a></li><li class="dropdown-item"><!----> <a href="/zh/Development/ContributeGuide.html" class="nav-link">开发指南</a></li><li class="dropdown-item"><!----> <a href="/zh/Development/format-changelist.html" class="nav-link">TsFile的更改列表</a></li><li class="dropdown-item"><!----> <a href="/zh/Development/rpc-changelist.html" class="nav-link">RPC变更清单</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">ASF</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://www.apache.org/" class="nav-link external">
  基金会
  <!----></a></li><li class="dropdown-item"><!----> <a href="http://www.apache.org/licenses/" class="nav-link external">
  许可证
  <!----></a></li><li class="dropdown-item"><!----> <a href="http://www.apache.org/security/" class="nav-link external">
  安全
  <!----></a></li><li class="dropdown-item"><!----> <a href="http://www.apache.org/foundation/sponsorship.html" class="nav-link external">
  赞助
  <!----></a></li><li class="dropdown-item"><!----> <a href="http://www.apache.org/foundation/thanks.html" class="nav-link external">
  致谢
  <!----></a></li><li class="dropdown-item"><!----> <a href="http://www.apache.org/events/current-event" class="nav-link external">
  活动
  <!----></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">语言</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/SystemDesign/1-TsFile/2-Format.html" class="nav-link">English</a></li><li class="dropdown-item"><!----> <a href="/zh/SystemDesign/1-TsFile/2-Format.html" class="nav-link router-link-exact-active router-link-active">简体中文</a></li></ul></div></div> <a href="https://github.com/apache/incubator-iotdb.git" target="_blank" rel="noopener noreferrer" class="repo-link">
    gitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">文档</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/UserGuide/Master/0-Get Started/1-QuickStart.html" class="nav-link">In progress</a></li><li class="dropdown-item"><!----> <a href="/zh/UserGuide/V0.9.x/0-Get Started/1-QuickStart.html" class="nav-link">V0.9.x</a></li><li class="dropdown-item"><!----> <a href="/zh/UserGuide/V0.8.x/0-Get Started/1-QuickStart.html" class="nav-link">V0.8.x</a></li></ul></div></div><div class="nav-item"><a href="/zh/SystemDesign/0-Architecture/1-Architecture.html" class="nav-link">系统设计</a></div><div class="nav-item"><a href="/zh/Download/" class="nav-link">下载</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">社区</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://cwiki.apache.org/confluence/display/iotdb" class="nav-link external">
  Wiki
  <!----></a></li><li class="dropdown-item"><!----> <a href="/zh/Community/Community-Project Committers.html" class="nav-link">开发人员</a></li><li class="dropdown-item"><!----> <a href="/zh/Community/Community-Powered By.html" class="nav-link">技术支持</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">开发</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/Development/VoteRelease.html" class="nav-link">如何投票</a></li><li class="dropdown-item"><!----> <a href="/zh/Development/ContributeGuide.html" class="nav-link">开发指南</a></li><li class="dropdown-item"><!----> <a href="/zh/Development/format-changelist.html" class="nav-link">TsFile的更改列表</a></li><li class="dropdown-item"><!----> <a href="/zh/Development/rpc-changelist.html" class="nav-link">RPC变更清单</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">ASF</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://www.apache.org/" class="nav-link external">
  基金会
  <!----></a></li><li class="dropdown-item"><!----> <a href="http://www.apache.org/licenses/" class="nav-link external">
  许可证
  <!----></a></li><li class="dropdown-item"><!----> <a href="http://www.apache.org/security/" class="nav-link external">
  安全
  <!----></a></li><li class="dropdown-item"><!----> <a href="http://www.apache.org/foundation/sponsorship.html" class="nav-link external">
  赞助
  <!----></a></li><li class="dropdown-item"><!----> <a href="http://www.apache.org/foundation/thanks.html" class="nav-link external">
  致谢
  <!----></a></li><li class="dropdown-item"><!----> <a href="http://www.apache.org/events/current-event" class="nav-link external">
  活动
  <!----></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">语言</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/SystemDesign/1-TsFile/2-Format.html" class="nav-link">English</a></li><li class="dropdown-item"><!----> <a href="/zh/SystemDesign/1-TsFile/2-Format.html" class="nav-link router-link-exact-active router-link-active">简体中文</a></li></ul></div></div> <a href="https://github.com/apache/incubator-iotdb.git" target="_blank" rel="noopener noreferrer" class="repo-link">
    gitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>系统设计</span> <!----></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>0-应用概览</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>1-TsFile</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zh/SystemDesign/1-TsFile/1-TsFile.html" class="sidebar-link">TsFile</a></li><li><a href="/zh/SystemDesign/1-TsFile/2-Format.html" class="active sidebar-link">格式</a></li><li><a href="/zh/SystemDesign/1-TsFile/3-Write.html" class="sidebar-link">写流程</a></li><li><a href="/zh/SystemDesign/1-TsFile/4-Read.html" class="sidebar-link">读流程</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>2-查询引擎</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>3-元数据管理</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>4-存储引擎</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>5-数据查询</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>6-工具</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>7-连接器</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="content content__default"><h1 id="tsfile-文件格式"><a href="#tsfile-文件格式" class="header-anchor">#</a> TsFile 文件格式</h1> <h2 id="_1-tsfile-设计"><a href="#_1-tsfile-设计" class="header-anchor">#</a> 1. TsFile 设计</h2> <p>本章是关于 TsFile 的设计细节。</p> <h3 id="_1-1-变量的存储"><a href="#_1-1-变量的存储" class="header-anchor">#</a> 1.1 变量的存储</h3> <ul><li><strong>大端存储</strong> <ul><li>比如： <code>int</code> <code>0x8</code> 将会被存储为 <code>00 00 00 08</code>, 而不是 <code>08 00 00 00</code></li></ul></li> <li><strong>可变长的字符串类型</strong> <ul><li>存储的方式是以一个 <code>int</code> 类型的 <code>Size</code> + 字符串组成。<code>Size</code> 的值可以为 0。</li> <li><code>Size</code> 指的是字符串所占的字节数，它并不一定等于字符串的长度。</li> <li>举例来说，&quot;sensor_1&quot; 这个字符串将被存储为 <code>00 00 00 08</code> + &quot;sensor_1&quot; (ASCII编码)。</li> <li>另外需要注意的一点是文件签名 &quot;TsFile000001&quot; (<code>Magic String</code> + <code>Version</code>), 因为他的 <code>Size(12)</code> 和 ASCII 编码值是固定的，所以没有必要在这个字符串前的写入 <code>Size</code> 值。</li></ul></li> <li><strong>数据类型</strong> <ul><li>0: BOOLEAN</li> <li>1: INT32 (<code>int</code>)</li> <li>2: INT64 (<code>long</code>)</li> <li>3: FLOAT</li> <li>4: DOUBLE</li> <li>5: TEXT (<code>String</code>)</li></ul></li> <li><strong>编码类型</strong> <ul><li>0: PLAIN</li> <li>1: PLAIN_DICTIONARY</li> <li>2: RLE</li> <li>3: DIFF</li> <li>4: TS_2DIFF</li> <li>5: BITMAP</li> <li>6: GORILLA</li> <li>7: REGULAR</li></ul></li> <li><strong>压缩类型</strong> <ul><li>0: UNCOMPRESSED</li> <li>1: SNAPPY</li></ul></li> <li><strong>预聚合信息</strong> <ul><li>0: min_value</li> <li>1: max_value</li> <li>2: first_value</li> <li>3: last_value</li> <li>4: sum_value</li></ul></li></ul> <h3 id="_1-2-tsfile-概述"><a href="#_1-2-tsfile-概述" class="header-anchor">#</a> 1.2 TsFile 概述</h3> <p>下图是关于TsFile的结构图。</p> <p><img src="https://user-images.githubusercontent.com/7240743/78330206-05cc6380-75b6-11ea-96c7-06f6f7346f6a.png" alt="TsFile Breakdown"></p> <p>此文件包括两个设备 d1、d2，每个设备包含三个测点 s1、s2、s3，共 6 个时间序列，d1为蓝色，d2为紫色。每个时间序列包含两个 Chunk。</p> <p>元数据分为三部分</p> <ul><li>按时间序列组织的 ChunkMetadata 列表</li> <li>按时间序列组织的 TimeseriesMetadata</li> <li>TsFileMetadata</li></ul> <p>查询流程：以查 d1.s1 为例</p> <ul><li>反序列化 TsFileMetadata，得到 d1 的所有 TimeseriesMetadata 的位置</li> <li>反序列化 d1 的所有 TimeseriesMetadata，并得到 d1.s1 的 TimeseriesMetadata</li> <li>根据 d1.s1 的 TimeseriesMetadata，反序列化其所有 ChunkMetadata</li> <li>根据 d1.s1 的每一个 ChunkMetadata，读取其 Chunk 数据</li></ul> <h4 id="_1-2-1-文件签名和版本号"><a href="#_1-2-1-文件签名和版本号" class="header-anchor">#</a> 1.2.1 文件签名和版本号</h4> <p>TsFile文件头由 6 个字节的 &quot;Magic String&quot; (<code>TsFile</code>) 和 6 个字节的版本号 (<code>000002</code>)组成。</p> <h4 id="_1-2-2-数据文件"><a href="#_1-2-2-数据文件" class="header-anchor">#</a> 1.2.2 数据文件</h4> <p>TsFile文件的内容可以划分为两个部分: 数据（Chunk）和元数据（XXMetadata）。数据和元数据之间是由一个字节的 <code>0x02</code> 做为分隔符。</p> <p><code>ChunkGroup</code> 存储了一个 <em>设备(device)</em> 一段时间的数据。</p> <h5 id="chunkgroup"><a href="#chunkgroup" class="header-anchor">#</a> ChunkGroup</h5> <p><code>ChunkGroup</code> 由若干个 <code>Chunk</code>, 一个字节的分隔符 <code>0x00</code> 和 一个<code>ChunkFooter</code>组成。</p> <h5 id="chunk"><a href="#chunk" class="header-anchor">#</a> Chunk</h5> <p>一个 <code>Chunk</code> 存储了一个 <em>测点(measurement)</em> 一段时间的数据，Chunk 内数据是按时间递增序存储的。<code>Chunk</code> 是由一个字节的分隔符 <code>0x01</code>, 一个 <code>ChunkHeader</code> 和若干个 <code>Page</code> 构成。</p> <h5 id="chunkheader"><a href="#chunkheader" class="header-anchor">#</a> ChunkHeader</h5> <table><thead><tr><th style="text-align:center;">成员</th> <th style="text-align:center;">类型</th></tr></thead> <tbody><tr><td style="text-align:center;">传感器名称(measurementID)</td> <td style="text-align:center;">String</td></tr> <tr><td style="text-align:center;">chunk大小(dataSize)</td> <td style="text-align:center;">int</td></tr> <tr><td style="text-align:center;">chunk的数据类型(dataType)</td> <td style="text-align:center;">short</td></tr> <tr><td style="text-align:center;">包含的page数量(numOfPages)</td> <td style="text-align:center;">int</td></tr> <tr><td style="text-align:center;">压缩类型(compressionType)</td> <td style="text-align:center;">short</td></tr> <tr><td style="text-align:center;">编码类型(encodingType)</td> <td style="text-align:center;">short</td></tr> <tr><td style="text-align:center;">Max Tombstone Time(暂时没用)</td> <td style="text-align:center;">long</td></tr></tbody></table> <h5 id="page"><a href="#page" class="header-anchor">#</a> Page</h5> <p>一个 <code>Page</code> 页存储了 <code>Chunk</code> 的一些数据。 它包含一个 <code>PageHeader</code> 和实际的数据(time-value 编码的键值对)。</p> <p>PageHeader 结构</p> <table><thead><tr><th style="text-align:center;">成员</th> <th style="text-align:center;">类型</th></tr></thead> <tbody><tr><td style="text-align:center;">压缩前数据大小(uncompressedSize)</td> <td style="text-align:center;">int</td></tr> <tr><td style="text-align:center;">SNAPPY压缩后数据大小(compressedSize)</td> <td style="text-align:center;">int</td></tr> <tr><td style="text-align:center;">包含的values的数量(numOfValues)</td> <td style="text-align:center;">int</td></tr> <tr><td style="text-align:center;">最大时间戳(maxTimestamp)</td> <td style="text-align:center;">long</td></tr> <tr><td style="text-align:center;">最小时间戳(minTimestamp)</td> <td style="text-align:center;">long</td></tr> <tr><td style="text-align:center;">该页最大值(max)</td> <td style="text-align:center;">Type of the page</td></tr> <tr><td style="text-align:center;">该页最小值(min)</td> <td style="text-align:center;">Type of the page</td></tr> <tr><td style="text-align:center;">该页第一个值(first)</td> <td style="text-align:center;">Type of the page</td></tr> <tr><td style="text-align:center;">该页值的和(sum)</td> <td style="text-align:center;">double</td></tr> <tr><td style="text-align:center;">该页最后一个值(last)</td> <td style="text-align:center;">Type of the page</td></tr></tbody></table> <h5 id="chunkgroupfooter"><a href="#chunkgroupfooter" class="header-anchor">#</a> ChunkGroupFooter</h5> <table><thead><tr><th style="text-align:center;">成员</th> <th style="text-align:center;">类型</th></tr></thead> <tbody><tr><td style="text-align:center;">设备Id(deviceID)</td> <td style="text-align:center;">String</td></tr> <tr><td style="text-align:center;">ChunkGroup大小(dataSize)</td> <td style="text-align:center;">long</td></tr> <tr><td style="text-align:center;">包含的chunks的数量(numberOfChunks)</td> <td style="text-align:center;">int</td></tr></tbody></table> <h4 id="_1-2-3-元数据"><a href="#_1-2-3-元数据" class="header-anchor">#</a> 1.2.3  元数据</h4> <h5 id="_1-2-3-1-tsdevicemetadata"><a href="#_1-2-3-1-tsdevicemetadata" class="header-anchor">#</a> 1.2.3.1 TsDeviceMetaData</h5> <p>第一部分的元数据是 <code>TsDeviceMetaData</code></p> <table><thead><tr><th style="text-align:center;">成员</th> <th style="text-align:center;">类型</th></tr></thead> <tbody><tr><td style="text-align:center;">开始时间(startTime)</td> <td style="text-align:center;">long</td></tr> <tr><td style="text-align:center;">结束时间(endTime)</td> <td style="text-align:center;">long</td></tr> <tr><td style="text-align:center;">包含的ChunkGroup的数量</td> <td style="text-align:center;">int</td></tr> <tr><td style="text-align:center;">所有的ChunkGroupMetaData(chunkGroupMetadataList)</td> <td style="text-align:center;">list</td></tr></tbody></table> <h6 id="chunkgroupmetadata"><a href="#chunkgroupmetadata" class="header-anchor">#</a> ChunkGroupMetaData</h6> <table><thead><tr><th style="text-align:center;">成员</th> <th style="text-align:center;">类型</th></tr></thead> <tbody><tr><td style="text-align:center;">设备Id(deviceID)</td> <td style="text-align:center;">String</td></tr> <tr><td style="text-align:center;">在文件中ChunkGroup开始的偏移量(startOffsetOfChunkGroup)</td> <td style="text-align:center;">long</td></tr> <tr><td style="text-align:center;">在文件中ChunkGroup结束的偏移量(endOffsetOfChunkGroup)</td> <td style="text-align:center;">long</td></tr> <tr><td style="text-align:center;">版本(version)</td> <td style="text-align:center;">long</td></tr> <tr><td style="text-align:center;">包含的ChunkMetaData的数量</td> <td style="text-align:center;">int</td></tr> <tr><td style="text-align:center;">所有的ChunkMetaData(chunkMetaDataList)</td> <td style="text-align:center;">list</td></tr></tbody></table> <h6 id="chunkmetadata"><a href="#chunkmetadata" class="header-anchor">#</a> ChunkMetaData</h6> <table><thead><tr><th style="text-align:center;">成员</th> <th style="text-align:center;">类型</th></tr></thead> <tbody><tr><td style="text-align:center;">传感器名称(measurementUid)</td> <td style="text-align:center;">String</td></tr> <tr><td style="text-align:center;">文件中ChunkHeader开始的偏移量(offsetOfChunkHeader)</td> <td style="text-align:center;">long</td></tr> <tr><td style="text-align:center;">数据的总数(numOfPoints)</td> <td style="text-align:center;">long</td></tr> <tr><td style="text-align:center;">开始时间(startTime)</td> <td style="text-align:center;">long</td></tr> <tr><td style="text-align:center;">结束时间(endTime)</td> <td style="text-align:center;">long</td></tr> <tr><td style="text-align:center;">数据类型(tsDataType)</td> <td style="text-align:center;">short</td></tr> <tr><td style="text-align:center;">chunk的统计信息</td> <td style="text-align:center;">TsDigest</td></tr></tbody></table> <h6 id="tsdigest"><a href="#tsdigest" class="header-anchor">#</a> TsDigest</h6> <p>目前有五项统计数据: <code>min_value, max_value, first_value, last_value, sum_value</code>。</p> <p>在 v0.8.0 版本中, 统计数据使用 name-value 编码的键值对。 也就是 <code>Map&lt;String, ByteBuffer&gt; statistics</code>。 name使用的一个字符串类型(需要注意的是字符串前有个长度标识)。 对于值来讲，它有可能是很多种类型，所以需要用 integer 类型用来描述值的长度。 比如, 如果 <code>min_value</code> 是一个 integer 类型的 0, 那么在 TsFile 中将被存储为 [9 &quot;min_value&quot; 4 0]。</p> <p>下面是一个调用 <code>TsDigest.deserializeFrom(buffer)</code> 方法后的数据示例。在 v0.8.0 版本中, 我们会得到</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Map&lt;String, ByteBuffer&gt; statistics = {
    &quot;min_value&quot; -&gt; ByteBuffer of int value 0, 
    &quot;last&quot; -&gt; ByteBuffer of int value 19,
    &quot;sum&quot; -&gt; ByteBuffer of double value 1093347116,
    &quot;first&quot; -&gt; ByteBuffer of int value 0,
    &quot;max_value&quot; -&gt; ByteBuffer of int value 99
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><img src="https://user-images.githubusercontent.com/33376433/63765352-664a4280-c8fb-11e9-869e-859edf6d00bb.png" style="width:100%;max-width:800px;max-height:600px;margin-left:auto;margin-right:auto;display:block;"> <p>在 v0.9.0 版本中, 为了提高空间和时间的效率，存储的结构被修改为数组的形式。也就是 <code>ByteBuffer[] statistics</code>。用固定的位置代表某一个具体的统计信息, 在 StatisticType 中定义的顺序如下:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>enum StatisticType {
    min_value, max_value, first_value, last_value, sum_value
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>修改存储形式后,在上面的示例中,我们将得到</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>ByteBuffer[] statistics = [
    ByteBuffer of int value 0, // associated with &quot;min_value&quot;
    ByteBuffer of int value 99, // associated with &quot;max_value&quot;
    ByteBuffer of int value 0, // associated with &quot;first_value&quot;
    ByteBuffer of int value 19, // associated with &quot;last_value&quot;
    ByteBuffer of double value 1093347116 // associated with &quot;sum_value&quot;
]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>另一个关于 v0.9.0 的示例数据, 当我们从 buffer [3, 0,4,0, 1,4,99, 3,4,19] 反序列化为 TsDigest 结构时, 我们将得到</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>//这里可能会有些难理解，读取顺序为：1.读取一个int类型的数据总数(3) 2.读取short类型的位于数组中的位置(0) 3.读取int类型的数据长度(4) 4.根据第3步的长度读取数据(0)
//因为示例数据中，索引值只出现了(0,1,3),所以 first_value sum_value 的值为null

ByteBuffer[] statistics = [
    ByteBuffer of int value 0, // associated with &quot;min_value&quot;
    ByteBuffer of int value 99, // associated with &quot;max_value&quot;
    null, // associated with &quot;first_value&quot;
    ByteBuffer of int value 19, // associated with &quot;last_value&quot;
    null // associated with &quot;sum_value&quot;
]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h5 id="_1-2-3-2-tsfilemetadata"><a href="#_1-2-3-2-tsfilemetadata" class="header-anchor">#</a> 1.2.3.2 TsFileMetaData</h5> <p>上节讲到的是 <code>TsDeviceMetadatas</code> 紧跟其后的数据是 <code>TsFileMetaData</code>。</p> <table><thead><tr><th style="text-align:center;">成员</th> <th style="text-align:center;">类型</th></tr></thead> <tbody><tr><td style="text-align:center;">包含的设备个数</td> <td style="text-align:center;">int</td></tr> <tr><td style="text-align:center;">设备名称和设备元数据索引的键值对(deviceIndexMap)</td> <td style="text-align:center;">String, TsDeviceMetadataIndex pair</td></tr> <tr><td style="text-align:center;">包含的传感器个数</td> <td style="text-align:center;">int</td></tr> <tr><td style="text-align:center;">传感器名称和传感器元数据的键值对(measurementSchema)</td> <td style="text-align:center;">String, MeasurementSchema pair</td></tr> <tr><td style="text-align:center;">水印标识</td> <td style="text-align:center;">byte</td></tr> <tr><td style="text-align:center;">当标识为0x01时的水印信息(createdBy)</td> <td style="text-align:center;">String</td></tr> <tr><td style="text-align:center;">包含的Chunk总数(totalChunkNum)</td> <td style="text-align:center;">int</td></tr> <tr><td style="text-align:center;">失效的Chunk总数(invalidChunkNum)</td> <td style="text-align:center;">int</td></tr> <tr><td style="text-align:center;">布隆过滤器序列化大小</td> <td style="text-align:center;">int</td></tr> <tr><td style="text-align:center;">布隆过滤器所有数据</td> <td style="text-align:center;">byte[Bloom filter size]</td></tr> <tr><td style="text-align:center;">布隆过滤器容量</td> <td style="text-align:center;">int</td></tr> <tr><td style="text-align:center;">布隆过滤器容量包含的HashFunction数量</td> <td style="text-align:center;">int</td></tr></tbody></table> <h6 id="tsdevicemetadataindex"><a href="#tsdevicemetadataindex" class="header-anchor">#</a> TsDeviceMetadataIndex</h6> <table><thead><tr><th style="text-align:center;">成员</th> <th style="text-align:center;">类型</th></tr></thead> <tbody><tr><td style="text-align:center;">设备名</td> <td style="text-align:center;">String</td></tr> <tr><td style="text-align:center;">文件中TsDeviceMetaData的偏移量(offset)</td> <td style="text-align:center;">long</td></tr> <tr><td style="text-align:center;">序列化后数据大小(len)</td> <td style="text-align:center;">int</td></tr> <tr><td style="text-align:center;">存储的设备最小时间(startTime)</td> <td style="text-align:center;">long</td></tr> <tr><td style="text-align:center;">存储的设备最大时间(endTime)</td> <td style="text-align:center;">long</td></tr></tbody></table> <h6 id="measurementschema"><a href="#measurementschema" class="header-anchor">#</a> MeasurementSchema</h6> <table><thead><tr><th style="text-align:center;">成员</th> <th style="text-align:center;">类型</th></tr></thead> <tbody><tr><td style="text-align:center;">传感器名称(measurementId)</td> <td style="text-align:center;">String</td></tr> <tr><td style="text-align:center;">数据类型(type)</td> <td style="text-align:center;">short</td></tr> <tr><td style="text-align:center;">编码方式(encoding)</td> <td style="text-align:center;">short</td></tr> <tr><td style="text-align:center;">压缩方式(compressor)</td> <td style="text-align:center;">short</td></tr> <tr><td style="text-align:center;">附带参数的数量</td> <td style="text-align:center;">int</td></tr> <tr><td style="text-align:center;">所有附带的参数(props)</td> <td style="text-align:center;">String, String pair</td></tr></tbody></table> <p>如果附带的参数数量大于 0, 传感器的附带参数会以一个数组形式的 &lt;String, String&gt; 键值对存储。</p> <p>比如说: &quot;max_point_number&quot;&quot;2&quot;.</p> <h5 id="_1-2-3-3-tsfilemetadatasize"><a href="#_1-2-3-3-tsfilemetadatasize" class="header-anchor">#</a> 1.2.3.3 TsFileMetadataSize</h5> <p>在TsFileMetaData之后，有一个int值用来表示TsFileMetaData的大小。</p> <h4 id="_1-2-4-magic-string"><a href="#_1-2-4-magic-string" class="header-anchor">#</a> 1.2.4 Magic String</h4> <p>TsFile 是以6个字节的magic string (<code>TsFile</code>) 作为结束.</p> <p>恭喜您, 至此您已经完成了 TsFile 的探秘之旅，祝您玩儿的开心!</p> <h3 id="_1-3-tsfile工具集"><a href="#_1-3-tsfile工具集" class="header-anchor">#</a> 1.3 TsFile工具集</h3> <h4 id="_1-3-1-iotdb-data-directory-快速概览工具"><a href="#_1-3-1-iotdb-data-directory-快速概览工具" class="header-anchor">#</a> 1.3.1 IoTDB Data Directory 快速概览工具</h4> <p>该工具的启动脚本会在编译 server 之后生成至 <code>server\target\iotdb-server-0.10.0\tools\tsfileToolSet</code> 目录中。</p> <p>使用方式:</p> <p>For Windows:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>.\print-iotdb-data-dir.bat &lt;IoTDB数据文件夹路径，如果是多个文件夹用逗号分隔&gt; (&lt;输出结果的存储路径&gt;) 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>For Linux or MacOs:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>./print-iotdb-data-dir.sh &lt;IoTDB数据文件夹路径，如果是多个文件夹用逗号分隔&gt; (&lt;输出结果的存储路径&gt;) 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在Windows系统中的示例:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>D:\incubator-iotdb\server\target\iotdb-server-0.10.0-SNAPSHOT\tools\tsfileToolSet&gt;.\print-iotdb-data-dir.bat D:\\data\data
​````````````````````````
Starting Printing the IoTDB Data Directory Overview
​````````````````````````
output save path:IoTDB_data_dir_overview.txt
TsFile data dir num:1
21:17:38.841 [main] WARN org.apache.iotdb.tsfile.common.conf.TSFileDescriptor - Failed to find config file iotdb-engine.properties at classpath, use default configuration
|==============================================================
|D:\\data\data
|--sequence
|  |--root.ln.wf01.wt01
|  |  |--1575813520203-101-0.tsfile
|  |  |--1575813520203-101-0.tsfile.resource
|  |  |  |--device root.ln.wf01.wt01, start time 1 (1970-01-01T08:00:00.001+08:00[GMT+08:00]), end time 5 (1970-01-01T08:00:00.005+08:00[GMT+08:00])
|  |  |--1575813520669-103-0.tsfile
|  |  |--1575813520669-103-0.tsfile.resource
|  |  |  |--device root.ln.wf01.wt01, start time 100 (1970-01-01T08:00:00.100+08:00[GMT+08:00]), end time 300 (1970-01-01T08:00:00.300+08:00[GMT+08:00])
|  |  |--1575813521372-107-0.tsfile
|  |  |--1575813521372-107-0.tsfile.resource
|  |  |  |--device root.ln.wf01.wt01, start time 500 (1970-01-01T08:00:00.500+08:00[GMT+08:00]), end time 540 (1970-01-01T08:00:00.540+08:00[GMT+08:00])
|--unsequence
|  |--root.ln.wf01.wt01
|  |  |--1575813521063-105-0.tsfile
|  |  |--1575813521063-105-0.tsfile.resource
|  |  |  |--device root.ln.wf01.wt01, start time 10 (1970-01-01T08:00:00.010+08:00[GMT+08:00]), end time 50 (1970-01-01T08:00:00.050+08:00[GMT+08:00])
|==============================================================
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h4 id="_1-3-2-tsfileresource-打印工具"><a href="#_1-3-2-tsfileresource-打印工具" class="header-anchor">#</a> 1.3.2 TsFileResource 打印工具</h4> <p>该工具的启动脚本会在编译 server 之后生成至 <code>server\target\iotdb-server-0.10.0\tools\tsfileToolSet</code> 目录中。</p> <p>使用方式:</p> <p>Windows:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>.\print-tsfile-sketch.bat &lt;TsFileResource文件夹路径&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Linux or MacOs:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>./print-tsfile-sketch.sh &lt;TsFileResource文件夹路径&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在Windows系统中的示例:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>D:\incubator-iotdb\server\target\iotdb-server-0.10.0\tools\tsfileToolSet&gt;.\print-tsfile-resource-files.bat D:\data\data\sequence\root.vehicle
​````````````````````````
Starting Printing the TsFileResources
​````````````````````````
12:31:59.861 [main] WARN org.apache.iotdb.db.conf.IoTDBDescriptor - Cannot find IOTDB_HOME or IOTDB_CONF environment variable when loading config file iotdb-engine.properties, use default configuration
analyzing D:\data\data\sequence\root.vehicle\1572496142067-101-0.tsfile ...
device root.vehicle.d0, start time 3000 (1970-01-01T08:00:03+08:00[GMT+08:00]), end time 100999 (1970-01-01T08:01:40.999+08:00[GMT+08:00])
analyzing the resource file finished.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="_1-3-3-tsfile-描述工具"><a href="#_1-3-3-tsfile-描述工具" class="header-anchor">#</a> 1.3.3 TsFile 描述工具</h4> <p>该工具的启动脚本会在编译 server 之后生成至 <code>server\target\iotdb-server-0.10.0\tools\tsfileToolSet</code> 目录中。</p> <p>使用方式:</p> <p>Windows:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>.\print-tsfile-sketch.bat &lt;TsFile文件路径&gt; (&lt;输出结果的存储路径&gt;) 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>注意: 如果没有设置输出文件的存储路径, 将使用 &quot;TsFile_sketch_view.txt&quot; 做为默认值。</li></ul> <p>Linux or MacOs:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>./print-tsfile-sketch.sh &lt;TsFile文件路径&gt; (&lt;输出结果的存储路径&gt;) 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>注意: 如果没有设置输出文件的存储路径, 将使用 &quot;TsFile_sketch_view.txt&quot; 做为默认值。</li></ul> <p>在Windows系统中的示例:</p> <div class="language-$xslt line-numbers-mode"><pre class="language-text"><code>D:\incubator-iotdb\server\target\iotdb-server-0.10.0\tools\tsfileToolSet&gt;.\print-tsfile-sketch.bat D:\data\data\sequence\root.vehicle\1572496142067-101-0.tsfile
​````````````````````````
Starting Printing the TsFile Sketch
​````````````````````````
TsFile path:D:\data\data\sequence\root.vehicle\1572496142067-101-0.tsfile
Sketch save path:TsFile_sketch_view.txt
-------------------------------- TsFile Sketch --------------------------------
file path: D:\data\data\sequence\root.vehicle\1572496142067-101-0.tsfile
file length: 187382

            POSITION|   CONTENT
            --------    -------
                   0|   [magic head] TsFile
                   6|   [version number] 000001
|||||||||||||||||||||   [Chunk Group] of root.vehicle.d0 begins at pos 12, ends at pos 186469, version:102, num of Chunks:6
                  12|   [Chunk] of s3, numOfPoints:10600, time range:[3000,13599], tsDataType:TEXT,
                        TsDigest:[min_value:A,max_value:E,first_value:A,last_value:E,sum_value:0.0]
                    |           [marker] 1
                    |           [ChunkHeader]
                    |           11 pages
               55718|   [Chunk] of s4, numOfPoints:10600, time range:[3000,13599], tsDataType:BOOLEAN,
                        TsDigest:[min_value:false,max_value:true,first_value:true,last_value:false,sum_value:0.0]
                    |           [marker] 1
                    |           [ChunkHeader]
                    |           11 pages
               68848|   [Chunk] of s5, numOfPoints:10600, time range:[3000,13599], tsDataType:DOUBLE,
                        TsDigest:[min_value:3000.0,max_value:13599.0,first_value:3000.0,last_value:13599.0,sum_value:8.79747E7]
                    |           [marker] 1
                    |           [ChunkHeader]
                    |           11 pages
               98474|   [Chunk] of s0, numOfPoints:21900, time range:[3000,100999], tsDataType:INT32,
                        TsDigest:[min_value:0,max_value:99,first_value:0,last_value:19,sum_value:889750.0]
                    |           [marker] 1
                    |           [ChunkHeader]
                    |           22 pages
              123369|   [Chunk] of s1, numOfPoints:21900, time range:[3000,100999], tsDataType:INT64,
                        TsDigest:[min_value:0,max_value:39,first_value:8,last_value:19,sum_value:300386.0]
                    |           [marker] 1
                    |           [ChunkHeader]
                    |           22 pages
              144741|   [Chunk] of s2, numOfPoints:21900, time range:[3000,100999], tsDataType:FLOAT,
                        TsDigest:[min_value:0.0,max_value:122.0,first_value:8.0,last_value:52.0,sum_value:778581.0]
                    |           [marker] 1
                    |           [ChunkHeader]
                    |           22 pages
              186437|   [Chunk Group Footer]
                    |           [marker] 0
                    |           [deviceID] root.vehicle.d0
                    |           [dataSize] 186425
                    |           [num of chunks] 6
|||||||||||||||||||||   [Chunk Group] of root.vehicle.d0 ends
              186469|   [marker] 2
              186470|   [TsDeviceMetadata] of root.vehicle.d0, startTime:3000, endTime:100999
                    |           [startTime] 3000tfi
                    |           [endTime] 100999
                    |           [num of ChunkGroupMetaData] 1
                    |           1 ChunkGroupMetaData
              187133|   [TsFileMetaData]
                    |           [num of devices] 1
                    |           1 key&amp;TsDeviceMetadataIndex
                    |           [num of measurements] 6
                    |           6 key&amp;measurementSchema
                    |           [createBy isNotNull] false
                    |           [totalChunkNum] 6
                    |           [invalidChunkNum] 0
                    |           [bloom filter bit vector byte array length] 31
                    |           [bloom filter bit vector byte array]
                    |           [bloom filter number of bits] 256
                    |           [bloom filter number of hash functions] 5
              187372|   [TsFileMetaDataSize] 239
              187376|   [magic tail] TsFile
              187382|   END of TsFile

---------------------------------- TsFile Sketch End ----------------------------------
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br></div></div><h4 id="_1-3-4-tsfilesequenceread"><a href="#_1-3-4-tsfilesequenceread" class="header-anchor">#</a> 1.3.4 TsFileSequenceRead</h4> <p>您可以使用示例中的类 <code>example/tsfile/org/apache/iotdb/tsfile/TsFileSequenceRead</code> 顺序打印 TsFile 中的内容.</p> <h3 id="_1-4-tsfile-的总览图"><a href="#_1-4-tsfile-的总览图" class="header-anchor">#</a> 1.4 TsFile 的总览图</h3> <h4 id="v0-8-0"><a href="#v0-8-0" class="header-anchor">#</a> v0.8.0</h4> <img src="https://user-images.githubusercontent.com/33376433/65209576-2bd36000-dacb-11e9-9e43-49e0dd01274e.png" style="width:100%;max-width:800px;max-height:600px;margin-left:auto;margin-right:auto;display:block;"> <h4 id="v0-9-0"><a href="#v0-9-0" class="header-anchor">#</a> v0.9.0</h4> <img src="https://user-images.githubusercontent.com/33376433/69341240-26012300-0ca4-11ea-91a1-d516810cad44.png" style="width:100%;max-width:800px;max-height:600px;margin-left:auto;margin-right:auto;display:block;"></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/zh/SystemDesign/1-TsFile/1-TsFile.html" class="prev">
          TsFile
        </a></span> <span class="next"><a href="/zh/SystemDesign/1-TsFile/3-Write.html">
          写流程
        </a>
        →
      </span></p></div> <p style="text-align: center;">Copyright © 2020 The Apache Software Foundation.<br>
     Apache and the Apache feather logo are trademarks of The Apache Software Foundation</p> <p style="text-align:justify!important;paddingLeft:10px;paddingRight:10px;">
      Disclaimer: Apache IoTDB (incubating) (Database for Internet of Things) is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the Apache Incubator. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.
  </p></main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.a929ea2a.js" defer></script><script src="/assets/js/4.318808d1.js" defer></script><script src="/assets/js/3.961db017.js" defer></script><script src="/assets/js/176.5305befe.js" defer></script>
  </body>
</html>