<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title> </title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content=" ">
    <meta name="Description" content="Apache IoTDB: Time Series Database for IoT">
    <meta name="Keywords" content="TSDB, time series, time series database, IoTDB, IoT database, IoT data management,时序数据库, 时间序列管理, IoTDB, 物联网数据库, 实时数据库, 物联网数据管理, 物联网数据">
    <meta name="baidu-site-verification" content="wfKETzB3OT">
    <meta name="google-site-verification" content="mZWAoRY0yj_HAr-s47zHCGHzx5Ju-RVm5wDbPnwQYFo">
    
    <link rel="preload" href="/assets/css/0.styles.53b4846f.css" as="style"><link rel="preload" href="/assets/js/app.7e8d0fee.js" as="script"><link rel="preload" href="/assets/js/3.187083c5.js" as="script"><link rel="preload" href="/assets/js/39.54cd0bc6.js" as="script"><link rel="prefetch" href="/assets/js/10.1c603655.js"><link rel="prefetch" href="/assets/js/100.dab6e75e.js"><link rel="prefetch" href="/assets/js/101.d7637f69.js"><link rel="prefetch" href="/assets/js/102.4b31669b.js"><link rel="prefetch" href="/assets/js/103.df8a636e.js"><link rel="prefetch" href="/assets/js/104.f8b25f0c.js"><link rel="prefetch" href="/assets/js/105.a836abb5.js"><link rel="prefetch" href="/assets/js/106.62b870a3.js"><link rel="prefetch" href="/assets/js/107.f0bd827e.js"><link rel="prefetch" href="/assets/js/108.c6eec2f2.js"><link rel="prefetch" href="/assets/js/109.7a339e3c.js"><link rel="prefetch" href="/assets/js/11.cc3f9ffd.js"><link rel="prefetch" href="/assets/js/110.a0f4b386.js"><link rel="prefetch" href="/assets/js/111.002e30f1.js"><link rel="prefetch" href="/assets/js/112.e124c29e.js"><link rel="prefetch" href="/assets/js/113.fab59901.js"><link rel="prefetch" href="/assets/js/114.e5335893.js"><link rel="prefetch" href="/assets/js/115.be4e1fe4.js"><link rel="prefetch" href="/assets/js/116.c0dd7d85.js"><link rel="prefetch" href="/assets/js/117.81bb9bd1.js"><link rel="prefetch" href="/assets/js/118.eab6d5d4.js"><link rel="prefetch" href="/assets/js/119.8b54e7ae.js"><link rel="prefetch" href="/assets/js/12.b8a206cd.js"><link rel="prefetch" href="/assets/js/120.463b32a1.js"><link rel="prefetch" href="/assets/js/121.2ff179d1.js"><link rel="prefetch" href="/assets/js/122.4c390b2a.js"><link rel="prefetch" href="/assets/js/123.cd83f28a.js"><link rel="prefetch" href="/assets/js/124.113d9fba.js"><link rel="prefetch" href="/assets/js/125.c47a236e.js"><link rel="prefetch" href="/assets/js/126.cb13b873.js"><link rel="prefetch" href="/assets/js/127.b873082f.js"><link rel="prefetch" href="/assets/js/128.721d8520.js"><link rel="prefetch" href="/assets/js/129.0705d848.js"><link rel="prefetch" href="/assets/js/13.5c4247f9.js"><link rel="prefetch" href="/assets/js/130.b08ee2d9.js"><link rel="prefetch" href="/assets/js/131.eb1d2143.js"><link rel="prefetch" href="/assets/js/132.7fc7790c.js"><link rel="prefetch" href="/assets/js/133.87ec58e5.js"><link rel="prefetch" href="/assets/js/134.5b4d2b78.js"><link rel="prefetch" href="/assets/js/135.4b41db8a.js"><link rel="prefetch" href="/assets/js/136.85219757.js"><link rel="prefetch" href="/assets/js/137.3c2decde.js"><link rel="prefetch" href="/assets/js/138.648415d4.js"><link rel="prefetch" href="/assets/js/139.033ce790.js"><link rel="prefetch" href="/assets/js/14.14c0a23e.js"><link rel="prefetch" href="/assets/js/140.6bc7e5cc.js"><link rel="prefetch" href="/assets/js/141.317d3508.js"><link rel="prefetch" href="/assets/js/142.305de246.js"><link rel="prefetch" href="/assets/js/143.9807221d.js"><link rel="prefetch" href="/assets/js/144.1b7ea921.js"><link rel="prefetch" href="/assets/js/145.58d5d173.js"><link rel="prefetch" href="/assets/js/146.2f1ee190.js"><link rel="prefetch" href="/assets/js/147.8de4b5d5.js"><link rel="prefetch" href="/assets/js/148.29aae04a.js"><link rel="prefetch" href="/assets/js/149.6942d809.js"><link rel="prefetch" href="/assets/js/15.42f29f2e.js"><link rel="prefetch" href="/assets/js/150.833ba50d.js"><link rel="prefetch" href="/assets/js/151.fe221764.js"><link rel="prefetch" href="/assets/js/152.8c1abcbd.js"><link rel="prefetch" href="/assets/js/153.36f1af7a.js"><link rel="prefetch" href="/assets/js/154.d79829b5.js"><link rel="prefetch" href="/assets/js/155.f434a865.js"><link rel="prefetch" href="/assets/js/156.d9791f95.js"><link rel="prefetch" href="/assets/js/157.81dfde33.js"><link rel="prefetch" href="/assets/js/158.a4eccc5e.js"><link rel="prefetch" href="/assets/js/159.e18992b6.js"><link rel="prefetch" href="/assets/js/16.2114635f.js"><link rel="prefetch" href="/assets/js/160.2d69e069.js"><link rel="prefetch" href="/assets/js/161.2b986cf2.js"><link rel="prefetch" href="/assets/js/162.a2148c19.js"><link rel="prefetch" href="/assets/js/163.4bd0b3f4.js"><link rel="prefetch" href="/assets/js/164.e9ba602d.js"><link rel="prefetch" href="/assets/js/165.6d0a70b8.js"><link rel="prefetch" href="/assets/js/166.92f2a067.js"><link rel="prefetch" href="/assets/js/167.fadc6ed7.js"><link rel="prefetch" href="/assets/js/168.be19af7c.js"><link rel="prefetch" href="/assets/js/169.cbaae9e6.js"><link rel="prefetch" href="/assets/js/17.24e8b4f8.js"><link rel="prefetch" href="/assets/js/170.e2c608ba.js"><link rel="prefetch" href="/assets/js/171.0ada7198.js"><link rel="prefetch" href="/assets/js/172.26a85bbd.js"><link rel="prefetch" href="/assets/js/173.2eb7c3bb.js"><link rel="prefetch" href="/assets/js/174.7a120de2.js"><link rel="prefetch" href="/assets/js/175.a93318f6.js"><link rel="prefetch" href="/assets/js/176.6ad35d9c.js"><link rel="prefetch" href="/assets/js/177.30d70860.js"><link rel="prefetch" href="/assets/js/178.2bfe4516.js"><link rel="prefetch" href="/assets/js/179.229d373e.js"><link rel="prefetch" href="/assets/js/18.df811665.js"><link rel="prefetch" href="/assets/js/180.2a5566b7.js"><link rel="prefetch" href="/assets/js/181.8033dea4.js"><link rel="prefetch" href="/assets/js/182.3d4f481d.js"><link rel="prefetch" href="/assets/js/183.071b717c.js"><link rel="prefetch" href="/assets/js/184.5db69127.js"><link rel="prefetch" href="/assets/js/185.64ed7eb9.js"><link rel="prefetch" href="/assets/js/186.a2c59ddc.js"><link rel="prefetch" href="/assets/js/187.935e8efe.js"><link rel="prefetch" href="/assets/js/188.0b366a8d.js"><link rel="prefetch" href="/assets/js/189.7e07e916.js"><link rel="prefetch" href="/assets/js/19.4a1a4263.js"><link rel="prefetch" href="/assets/js/190.02ee3914.js"><link rel="prefetch" href="/assets/js/191.993b3775.js"><link rel="prefetch" href="/assets/js/192.571715fe.js"><link rel="prefetch" href="/assets/js/193.5b7aac46.js"><link rel="prefetch" href="/assets/js/194.3ef7659f.js"><link rel="prefetch" href="/assets/js/195.1741a0c1.js"><link rel="prefetch" href="/assets/js/196.4f334405.js"><link rel="prefetch" href="/assets/js/197.9aeeecbf.js"><link rel="prefetch" href="/assets/js/198.3f6c379f.js"><link rel="prefetch" href="/assets/js/199.5a3d16de.js"><link rel="prefetch" href="/assets/js/20.1b6deffc.js"><link rel="prefetch" href="/assets/js/200.1d2045a3.js"><link rel="prefetch" href="/assets/js/201.55db87cf.js"><link rel="prefetch" href="/assets/js/202.f42da840.js"><link rel="prefetch" href="/assets/js/203.dcc0df47.js"><link rel="prefetch" href="/assets/js/204.1ede630a.js"><link rel="prefetch" href="/assets/js/205.93704d14.js"><link rel="prefetch" href="/assets/js/206.f002fb3f.js"><link rel="prefetch" href="/assets/js/207.154d90f0.js"><link rel="prefetch" href="/assets/js/208.a0da203c.js"><link rel="prefetch" href="/assets/js/209.e0324575.js"><link rel="prefetch" href="/assets/js/21.28cc5d92.js"><link rel="prefetch" href="/assets/js/210.d703707b.js"><link rel="prefetch" href="/assets/js/211.a37a3003.js"><link rel="prefetch" href="/assets/js/212.1cc86b47.js"><link rel="prefetch" href="/assets/js/213.6e7a321e.js"><link rel="prefetch" href="/assets/js/214.582bf30f.js"><link rel="prefetch" href="/assets/js/215.a84ee040.js"><link rel="prefetch" href="/assets/js/216.372ca744.js"><link rel="prefetch" href="/assets/js/217.5fd5f8d2.js"><link rel="prefetch" href="/assets/js/218.b83d58fb.js"><link rel="prefetch" href="/assets/js/219.0ac1318f.js"><link rel="prefetch" href="/assets/js/22.75220083.js"><link rel="prefetch" href="/assets/js/220.4d78c5f4.js"><link rel="prefetch" href="/assets/js/221.cd2acc28.js"><link rel="prefetch" href="/assets/js/222.aaf5340a.js"><link rel="prefetch" href="/assets/js/223.7fd4a659.js"><link rel="prefetch" href="/assets/js/224.ba03cf4f.js"><link rel="prefetch" href="/assets/js/225.99e825d5.js"><link rel="prefetch" href="/assets/js/226.89569d80.js"><link rel="prefetch" href="/assets/js/227.a29c3a08.js"><link rel="prefetch" href="/assets/js/228.6fc8489e.js"><link rel="prefetch" href="/assets/js/229.918432b1.js"><link rel="prefetch" href="/assets/js/23.d200be4a.js"><link rel="prefetch" href="/assets/js/230.b834d921.js"><link rel="prefetch" href="/assets/js/231.12ec6410.js"><link rel="prefetch" href="/assets/js/232.1f1f141f.js"><link rel="prefetch" href="/assets/js/233.a260e8a0.js"><link rel="prefetch" href="/assets/js/234.7185ad8d.js"><link rel="prefetch" href="/assets/js/235.54ca025d.js"><link rel="prefetch" href="/assets/js/236.079080e9.js"><link rel="prefetch" href="/assets/js/237.6b434c25.js"><link rel="prefetch" href="/assets/js/238.9d98999f.js"><link rel="prefetch" href="/assets/js/239.9dbe10a0.js"><link rel="prefetch" href="/assets/js/24.bd10c191.js"><link rel="prefetch" href="/assets/js/240.8c591dd3.js"><link rel="prefetch" href="/assets/js/241.88e26f0b.js"><link rel="prefetch" href="/assets/js/242.2bfda616.js"><link rel="prefetch" href="/assets/js/243.c9f0ff67.js"><link rel="prefetch" href="/assets/js/244.78f7b606.js"><link rel="prefetch" href="/assets/js/245.45b1933a.js"><link rel="prefetch" href="/assets/js/246.a02c461b.js"><link rel="prefetch" href="/assets/js/247.76f0573f.js"><link rel="prefetch" href="/assets/js/248.6ae8c5c7.js"><link rel="prefetch" href="/assets/js/249.ee32bf93.js"><link rel="prefetch" href="/assets/js/25.cf534808.js"><link rel="prefetch" href="/assets/js/250.38d40712.js"><link rel="prefetch" href="/assets/js/251.4f0b12fb.js"><link rel="prefetch" href="/assets/js/252.54e44c81.js"><link rel="prefetch" href="/assets/js/253.f4a0f771.js"><link rel="prefetch" href="/assets/js/254.55bb81a5.js"><link rel="prefetch" href="/assets/js/255.b03e2837.js"><link rel="prefetch" href="/assets/js/256.022ccb19.js"><link rel="prefetch" href="/assets/js/257.fba96473.js"><link rel="prefetch" href="/assets/js/258.b627d685.js"><link rel="prefetch" href="/assets/js/259.28e21856.js"><link rel="prefetch" href="/assets/js/26.5c268ee4.js"><link rel="prefetch" href="/assets/js/260.f320a58f.js"><link rel="prefetch" href="/assets/js/261.442bf05d.js"><link rel="prefetch" href="/assets/js/262.a012b4d6.js"><link rel="prefetch" href="/assets/js/263.232b0668.js"><link rel="prefetch" href="/assets/js/264.9f3b9ebe.js"><link rel="prefetch" href="/assets/js/265.1c544d63.js"><link rel="prefetch" href="/assets/js/266.6a90ae42.js"><link rel="prefetch" href="/assets/js/267.5d57043b.js"><link rel="prefetch" href="/assets/js/268.a0efd2ca.js"><link rel="prefetch" href="/assets/js/269.fb357b46.js"><link rel="prefetch" href="/assets/js/27.c523847e.js"><link rel="prefetch" href="/assets/js/270.f78d8594.js"><link rel="prefetch" href="/assets/js/271.9d7ac7ee.js"><link rel="prefetch" href="/assets/js/272.4c66855d.js"><link rel="prefetch" href="/assets/js/273.48679754.js"><link rel="prefetch" href="/assets/js/274.2ba1afeb.js"><link rel="prefetch" href="/assets/js/275.ddc36b82.js"><link rel="prefetch" href="/assets/js/276.da9d42ba.js"><link rel="prefetch" href="/assets/js/277.8de6668b.js"><link rel="prefetch" href="/assets/js/278.4f40272a.js"><link rel="prefetch" href="/assets/js/279.1e7e051f.js"><link rel="prefetch" href="/assets/js/28.fd9ad585.js"><link rel="prefetch" href="/assets/js/280.7963e7a1.js"><link rel="prefetch" href="/assets/js/281.aa162023.js"><link rel="prefetch" href="/assets/js/282.7c154873.js"><link rel="prefetch" href="/assets/js/283.fce06b4b.js"><link rel="prefetch" href="/assets/js/284.85ba0950.js"><link rel="prefetch" href="/assets/js/285.cb1d1847.js"><link rel="prefetch" href="/assets/js/286.d22e9a94.js"><link rel="prefetch" href="/assets/js/287.1c447fe2.js"><link rel="prefetch" href="/assets/js/29.ae01a76e.js"><link rel="prefetch" href="/assets/js/30.5d12445f.js"><link rel="prefetch" href="/assets/js/31.40d895e0.js"><link rel="prefetch" href="/assets/js/32.d804069c.js"><link rel="prefetch" href="/assets/js/33.986d8626.js"><link rel="prefetch" href="/assets/js/34.6d4f343d.js"><link rel="prefetch" href="/assets/js/35.f3fe9c5b.js"><link rel="prefetch" href="/assets/js/36.e595add3.js"><link rel="prefetch" href="/assets/js/37.0af0dd97.js"><link rel="prefetch" href="/assets/js/38.0d46b6a1.js"><link rel="prefetch" href="/assets/js/4.632d617f.js"><link rel="prefetch" href="/assets/js/40.14f3866f.js"><link rel="prefetch" href="/assets/js/41.9b73489b.js"><link rel="prefetch" href="/assets/js/42.b2dbd5e2.js"><link rel="prefetch" href="/assets/js/43.a2228318.js"><link rel="prefetch" href="/assets/js/44.9b669393.js"><link rel="prefetch" href="/assets/js/45.61f31cb8.js"><link rel="prefetch" href="/assets/js/46.acf45d98.js"><link rel="prefetch" href="/assets/js/47.9fe02aa4.js"><link rel="prefetch" href="/assets/js/48.fb146ee2.js"><link rel="prefetch" href="/assets/js/49.04fad2e1.js"><link rel="prefetch" href="/assets/js/5.cfee286e.js"><link rel="prefetch" href="/assets/js/50.9b60306c.js"><link rel="prefetch" href="/assets/js/51.26406d50.js"><link rel="prefetch" href="/assets/js/52.072a62da.js"><link rel="prefetch" href="/assets/js/53.a47fdb0e.js"><link rel="prefetch" href="/assets/js/54.cc809413.js"><link rel="prefetch" href="/assets/js/55.ba79f41b.js"><link rel="prefetch" href="/assets/js/56.e18205ec.js"><link rel="prefetch" href="/assets/js/57.6387c8cf.js"><link rel="prefetch" href="/assets/js/58.6126efe9.js"><link rel="prefetch" href="/assets/js/59.3ee14771.js"><link rel="prefetch" href="/assets/js/6.32d5e3c9.js"><link rel="prefetch" href="/assets/js/60.e131c84c.js"><link rel="prefetch" href="/assets/js/61.ac70d0fd.js"><link rel="prefetch" href="/assets/js/62.4d78c883.js"><link rel="prefetch" href="/assets/js/63.f1673ed5.js"><link rel="prefetch" href="/assets/js/64.75c1d960.js"><link rel="prefetch" href="/assets/js/65.17f6f270.js"><link rel="prefetch" href="/assets/js/66.c41c79ac.js"><link rel="prefetch" href="/assets/js/67.d436b4bf.js"><link rel="prefetch" href="/assets/js/68.934a6989.js"><link rel="prefetch" href="/assets/js/69.8d7e0582.js"><link rel="prefetch" href="/assets/js/7.09a0a58f.js"><link rel="prefetch" href="/assets/js/70.5478ce89.js"><link rel="prefetch" href="/assets/js/71.47452bed.js"><link rel="prefetch" href="/assets/js/72.d8021923.js"><link rel="prefetch" href="/assets/js/73.ce988899.js"><link rel="prefetch" href="/assets/js/74.eda7e6a9.js"><link rel="prefetch" href="/assets/js/75.c4b54daa.js"><link rel="prefetch" href="/assets/js/76.def7577f.js"><link rel="prefetch" href="/assets/js/77.136b5ce4.js"><link rel="prefetch" href="/assets/js/78.16b0aac6.js"><link rel="prefetch" href="/assets/js/79.d7f87844.js"><link rel="prefetch" href="/assets/js/8.06b4cfd0.js"><link rel="prefetch" href="/assets/js/80.29285523.js"><link rel="prefetch" href="/assets/js/81.ce3f2478.js"><link rel="prefetch" href="/assets/js/82.9d42d270.js"><link rel="prefetch" href="/assets/js/83.c86347a5.js"><link rel="prefetch" href="/assets/js/84.b080e73d.js"><link rel="prefetch" href="/assets/js/85.7d901be3.js"><link rel="prefetch" href="/assets/js/86.574fa4c1.js"><link rel="prefetch" href="/assets/js/87.528e9a78.js"><link rel="prefetch" href="/assets/js/88.87ca45c1.js"><link rel="prefetch" href="/assets/js/89.2e9244aa.js"><link rel="prefetch" href="/assets/js/9.58340067.js"><link rel="prefetch" href="/assets/js/90.a8c05f0c.js"><link rel="prefetch" href="/assets/js/91.ad908c88.js"><link rel="prefetch" href="/assets/js/92.9e2883c0.js"><link rel="prefetch" href="/assets/js/93.07896987.js"><link rel="prefetch" href="/assets/js/94.695b0264.js"><link rel="prefetch" href="/assets/js/95.e35bd0f6.js"><link rel="prefetch" href="/assets/js/96.907c0900.js"><link rel="prefetch" href="/assets/js/97.7a7716d5.js"><link rel="prefetch" href="/assets/js/98.89c3fc09.js"><link rel="prefetch" href="/assets/js/99.b4ae9390.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.27982d69.js">
    <link rel="stylesheet" href="/assets/css/0.styles.53b4846f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt=" " class="logo"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Document</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/UserGuide/Master/Get Started/QuickStart.html" class="nav-link">In progress</a></li><li class="dropdown-item"><!----> <a href="/UserGuide/V0.10.x/Get Started/QuickStart.html" class="nav-link">V0.10.x</a></li><li class="dropdown-item"><!----> <a href="/UserGuide/V0.9.x/0-Get Started/1-QuickStart.html" class="nav-link">V0.9.x</a></li><li class="dropdown-item"><!----> <a href="/UserGuide/V0.8.x/0-Get Started/1-QuickStart.html" class="nav-link">V0.8.x</a></li></ul></div></div><div class="nav-item"><a href="/SystemDesign/Architecture/Architecture.html" class="nav-link">System design</a></div><div class="nav-item"><a href="/Download/" class="nav-link">Download</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Community</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://cwiki.apache.org/confluence/display/iotdb" class="nav-link external">
  Wiki
  <!----></a></li><li class="dropdown-item"><!----> <a href="/Community/Community-Project Committers.html" class="nav-link">People</a></li><li class="dropdown-item"><!----> <a href="/Community/Community-Powered By.html" class="nav-link">Powered By</a></li><li class="dropdown-item"><!----> <a href="/Community/Materials.html" class="nav-link">Resources</a></li><li class="dropdown-item"><!----> <a href="/Community/Feedback.html" class="nav-link">Feedback</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Development</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Development/VoteRelease.html" class="nav-link">How to vote</a></li><li class="dropdown-item"><!----> <a href="/Development/HowToCommit.html" class="nav-link">How to Commit</a></li><li class="dropdown-item"><!----> <a href="/Development/Committer.html" class="nav-link">Become a Committer</a></li><li class="dropdown-item"><!----> <a href="/Development/ContributeGuide.html" class="nav-link">ContributeGuide</a></li><li class="dropdown-item"><!----> <a href="/Development/format-changelist.html" class="nav-link">Changelist of TsFile</a></li><li class="dropdown-item"><!----> <a href="/Development/rpc-changelist.html" class="nav-link">Changelist of RPC</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Blog</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Blog/Index.html" class="nav-link">Overview</a></li><li class="dropdown-item"><!----> <a href="/Blog/Release0_93.html" class="nav-link">Some Notes on Release 0.9.3 and upcoming 0.10.0</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">ASF</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://www.apache.org/" class="nav-link external">
  Foundation
  <!----></a></li><li class="dropdown-item"><!----> <a href="http://www.apache.org/licenses/" class="nav-link external">
  License
  <!----></a></li><li class="dropdown-item"><!----> <a href="http://www.apache.org/security/" class="nav-link external">
  Security
  <!----></a></li><li class="dropdown-item"><!----> <a href="http://www.apache.org/foundation/sponsorship.html" class="nav-link external">
  Sponsorship
  <!----></a></li><li class="dropdown-item"><!----> <a href="http://www.apache.org/foundation/thanks.html" class="nav-link external">
  Thanks
  <!----></a></li><li class="dropdown-item"><!----> <a href="http://www.apache.org/events/current-event" class="nav-link external">
  Current Events
  <!----></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/SystemDesign/DataQuery/SeriesReader.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/zh/SystemDesign/DataQuery/SeriesReader.html" class="nav-link">简体中文</a></li></ul></div></div> <a href="https://github.com/apache/iotdb.git" target="_blank" rel="noopener noreferrer" class="repo-link">
    gitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Document</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/UserGuide/Master/Get Started/QuickStart.html" class="nav-link">In progress</a></li><li class="dropdown-item"><!----> <a href="/UserGuide/V0.10.x/Get Started/QuickStart.html" class="nav-link">V0.10.x</a></li><li class="dropdown-item"><!----> <a href="/UserGuide/V0.9.x/0-Get Started/1-QuickStart.html" class="nav-link">V0.9.x</a></li><li class="dropdown-item"><!----> <a href="/UserGuide/V0.8.x/0-Get Started/1-QuickStart.html" class="nav-link">V0.8.x</a></li></ul></div></div><div class="nav-item"><a href="/SystemDesign/Architecture/Architecture.html" class="nav-link">System design</a></div><div class="nav-item"><a href="/Download/" class="nav-link">Download</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Community</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://cwiki.apache.org/confluence/display/iotdb" class="nav-link external">
  Wiki
  <!----></a></li><li class="dropdown-item"><!----> <a href="/Community/Community-Project Committers.html" class="nav-link">People</a></li><li class="dropdown-item"><!----> <a href="/Community/Community-Powered By.html" class="nav-link">Powered By</a></li><li class="dropdown-item"><!----> <a href="/Community/Materials.html" class="nav-link">Resources</a></li><li class="dropdown-item"><!----> <a href="/Community/Feedback.html" class="nav-link">Feedback</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Development</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Development/VoteRelease.html" class="nav-link">How to vote</a></li><li class="dropdown-item"><!----> <a href="/Development/HowToCommit.html" class="nav-link">How to Commit</a></li><li class="dropdown-item"><!----> <a href="/Development/Committer.html" class="nav-link">Become a Committer</a></li><li class="dropdown-item"><!----> <a href="/Development/ContributeGuide.html" class="nav-link">ContributeGuide</a></li><li class="dropdown-item"><!----> <a href="/Development/format-changelist.html" class="nav-link">Changelist of TsFile</a></li><li class="dropdown-item"><!----> <a href="/Development/rpc-changelist.html" class="nav-link">Changelist of RPC</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Blog</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Blog/Index.html" class="nav-link">Overview</a></li><li class="dropdown-item"><!----> <a href="/Blog/Release0_93.html" class="nav-link">Some Notes on Release 0.9.3 and upcoming 0.10.0</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">ASF</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://www.apache.org/" class="nav-link external">
  Foundation
  <!----></a></li><li class="dropdown-item"><!----> <a href="http://www.apache.org/licenses/" class="nav-link external">
  License
  <!----></a></li><li class="dropdown-item"><!----> <a href="http://www.apache.org/security/" class="nav-link external">
  Security
  <!----></a></li><li class="dropdown-item"><!----> <a href="http://www.apache.org/foundation/sponsorship.html" class="nav-link external">
  Sponsorship
  <!----></a></li><li class="dropdown-item"><!----> <a href="http://www.apache.org/foundation/thanks.html" class="nav-link external">
  Thanks
  <!----></a></li><li class="dropdown-item"><!----> <a href="http://www.apache.org/events/current-event" class="nav-link external">
  Current Events
  <!----></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/SystemDesign/DataQuery/SeriesReader.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/zh/SystemDesign/DataQuery/SeriesReader.html" class="nav-link">简体中文</a></li></ul></div></div> <a href="https://github.com/apache/iotdb.git" target="_blank" rel="noopener noreferrer" class="repo-link">
    gitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>System design</span> <!----></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Architecture</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>TsFile</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>QueryEngine</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>SchemaManager</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>StorageEngine</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>DataQuery</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/SystemDesign/DataQuery/DataQuery.html" class="sidebar-link">DataQuery</a></li><li><a href="/SystemDesign/DataQuery/QueryFundamentals.html" class="sidebar-link">QueryFundamentals</a></li><li><a href="/SystemDesign/DataQuery/SeriesReader.html" aria-current="page" class="active sidebar-link">SeriesReader</a></li><li><a href="/SystemDesign/DataQuery/RawDataQuery.html" class="sidebar-link">RawDataQuery</a></li><li><a href="/SystemDesign/DataQuery/AggregationQuery.html" class="sidebar-link">AggregationQuery</a></li><li><a href="/SystemDesign/DataQuery/GroupByQuery.html" class="sidebar-link">GroupByQuery</a></li><li><a href="/SystemDesign/DataQuery/LastQuery.html" class="sidebar-link">LastQuery</a></li><li><a href="/SystemDesign/DataQuery/AlignByDeviceQuery.html" class="sidebar-link">AlignByDeviceQuery</a></li><li><a href="/SystemDesign/DataQuery/FillFunction.html" class="sidebar-link">FillFunction</a></li><li><a href="/SystemDesign/DataQuery/GroupByFillQuery.html" class="sidebar-link">GroupByFillQuery</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Tools</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Connector</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Client</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="content content__default"><h1 id="query-basic-components"><a href="#query-basic-components" class="header-anchor">#</a> Query basic components</h1> <h2 id="design-principle"><a href="#design-principle" class="header-anchor">#</a> Design principle</h2> <p>The IoTDB server module provides a total of 3 different forms of reading interfaces for a single time series to support different forms of queries.</p> <ul><li>The raw data query interface returns BatchData with time or value filters. Both filters cannot exist at the same time.</li> <li>Aggregation query interface (mainly used for aggregation query and downsampling query)</li> <li>Interface for querying corresponding values by increasing timestamp (mainly used for queries with value filtering)</li></ul> <h2 id="related-interfaces"><a href="#related-interfaces" class="header-anchor">#</a> Related interfaces</h2> <p>The above three ways to read a single time series data correspond to the three interfaces in the code.</p> <h3 id="org-apache-iotdb-tsfile-read-reader-ibatchreader"><a href="#org-apache-iotdb-tsfile-read-reader-ibatchreader" class="header-anchor">#</a> org.apache.iotdb.tsfile.read.reader.IBatchReader</h3> <h4 id="main-method"><a href="#main-method" class="header-anchor">#</a> Main method</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>// Determine if there is still BatchData
boolean hasNextBatch() throws IOException;

// Get the next BatchData and move the cursor back
BatchData nextBatch() throws IOException;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="use-process"><a href="#use-process" class="header-anchor">#</a> use process</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>while (batchReader.hasNextBatch()) {
	BatchData batchData = batchReader.nextBatch();
	
	// use batchData to do some work
	...
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="org-apache-iotdb-db-query-reader-series-iaggregatereader"><a href="#org-apache-iotdb-db-query-reader-series-iaggregatereader" class="header-anchor">#</a> org.apache.iotdb.db.query.reader.series.IAggregateReader</h3> <h4 id="main-method-2"><a href="#main-method-2" class="header-anchor">#</a> Main method</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>// Determine if there is still Chunk
boolean hasNextChunk() throws IOException;

// Determine if you can use the current Chunk statistics
boolean canUseCurrentChunkStatistics();

// Get statistics for the current Chunk
Statistics currentChunkStatistics();

// Skip the current Chunk
void skipCurrentChunk();

// Determine if the current Chunk has a next Page
boolean hasNextPage() throws IOException;

// Determine if the statistics of the current Page can be used
boolean canUseCurrentPageStatistics() throws IOException;

// Get statistics for the current Page
Statistics currentPageStatistics() throws IOException;

// Skip the current Page
void skipCurrentPage();

// Get data for the current Page
BatchData nextPage() throws IOException;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h4 id="general-use-process"><a href="#general-use-process" class="header-anchor">#</a> General use process</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>while (aggregateReader.hasNextChunk()) {
  if (aggregateReader.canUseCurrentChunkStatistics()) {
    Statistics chunkStatistics = aggregateReader.currentChunkStatistics();
    
    // Calculate with the statistics of the chunk layer
    ...
    
    aggregateReader.skipCurrentChunk();
    continue;
  }
  
  // Run out of pages in the current chunk
  while (aggregateReader.hasNextPage()) {
	 if (aggregateReader.canUseCurrentPageStatistics()) {
	   // Can use statistics
	   Statistics pageStatistic = aggregateReader.currentPageStatistics();
	   
	   // Calculate with page-level statistics
	   ...
	  
	   aggregateReader.skipCurrentPage();
	   continue;
	 } else {
	   // Can't use statistics, need to calculate with data
	   BatchData batchData = aggregateReader.nextOverlappedPage();
	   
	   // Calculate with batchData
	   ...
	 }
  }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h3 id="org-apache-iotdb-db-query-reader-ireaderbytimestamp"><a href="#org-apache-iotdb-db-query-reader-ireaderbytimestamp" class="header-anchor">#</a> org.apache.iotdb.db.query.reader.IReaderByTimestamp</h3> <h4 id="main-method-3"><a href="#main-method-3" class="header-anchor">#</a> Main method</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>// Get the value of the given timestamp, or null if none exists (requires that the //timestamp passed in is incremented)
Object getValueInTimestamp(long timestamp) throws IOException;

// Given a batch of timestamp values, return a batch of results (reduce the number //of method calls)
Object[] getValuesInTimestamps(long[] timestamps) throws IOException;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="general-use-process-2"><a href="#general-use-process-2" class="header-anchor">#</a> General use process</h4> <p>This interface is used in queries with value filtering. After TimeGenerator generates a timestamp, use this interface to obtain the value corresponding to the timestamp.</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Object value = readerByTimestamp.getValueInTimestamp(timestamp);

or

Object[] values = readerByTimestamp.getValueInTimestamp(timestamps);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="concrete-implementation-class"><a href="#concrete-implementation-class" class="header-anchor">#</a> Concrete implementation class</h2> <p>The above three interfaces all have their corresponding implementation classes. As the above three queries have similarities, we have designed a basic SeriesReader tool class that encapsulates the basic methods for a time series read operation to help implement the above three interfaces. The following first introduces the design principle of the SeriesReader, and then introduces the specific implementation of the three interfaces in turn.</p> <h3 id="org-apache-iotdb-db-query-reader-series-seriesreader"><a href="#org-apache-iotdb-db-query-reader-series-seriesreader" class="header-anchor">#</a> org.apache.iotdb.db.query.reader.series.SeriesReader</h3> <h4 id="design-ideas"><a href="#design-ideas" class="header-anchor">#</a> Design ideas</h4> <p>Background knowledge: TsFile source (TsFilesource) can be unpacked to get ChunkMetadata, ChunkMetadata can be unpacked to get a bunch of PageReader, PageReader can directly return BatchData data points.</p> <p>To support the above three interfaces</p> <p>The data is divided into four types according to the granularity: file, chunk, page, and intersecting data points. In the original data query, the largest data block return granularity is a page. If a page and other pages cover each other due to out-of-order writing, they are unraveled into data points for merging. Aggregate queries use Chunk's statistics first, followed by Page's statistics, and finally intersecting data points.</p> <p>The design principle is to use the larger granularity instead of the smaller granularity.</p> <p>First introduce some important fields in SeriesReader</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>
/*
 * File layer
 */
private final List&lt;TsFileResource&gt; seqFileResource;
	Sequential file list, because the sequential file itself is guaranteed to be ordered, and the timestamps do not overlap each other, just use List to store
	
private final PriorityQueue&lt;TsFileResource&gt; unseqFileResource;
	Out-of-order file list, because out-of-order files do not guarantee order between each other, and may overlap
	
/*
 * chunk layer
 * 
 * The data between the three fields is never duplicated, and first is always the first (minimum start time)
 */
private ChunkMetaData firstChunkMetaData;
	This field is filled first when filling the chunk layer to ensure that this chunk has the current minimum start time
	
private final List&lt;ChunkMetaData&gt; seqChunkMetadatas;
	The ChunkMetaData obtained after the sequential files are unpacked is stored here. It is ordered and does not overlap with each other, so the List is used for storage.

private final PriorityQueue&lt;ChunkMetaData&gt; unseqChunkMetadatas;
	ChunkMetaData obtained after unordered files are stored is stored here, there may be overlap between each other, in order to ensure order, priority queue is used for storage
	
/*
 * page layer
 *
 * The data between the two fields is never duplicated, and first is always the first (minimum start time)
 */ 
private VersionPageReader firstPageReader;
	Page reader with the smallest start time
	
private PriorityQueue&lt;VersionPageReader&gt; cachedPageReaders;
	All page readers currently acquired, sorted by the start time of each page
	
/*
 * Intersecting data point layer
 */ 
private PriorityMergeReader mergeReader;
	Essentially, there are multiple pages with priority, and the data points are output from low to high according to the timestamp. When the timestamps are the same, the high priority page is retained.

/*
 * Caching of results from intersecting data points
 */ 
private boolean hasCachedNextOverlappedPage;
	Whether the next batch is cached
	
private BatchData cachedBatchData;
	Cached reference to the next batch
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br></div></div><p>The following describes the important methods in SeriesReader</p> <h4 id="hasnextchunk"><a href="#hasnextchunk" class="header-anchor">#</a> hasNextChunk()</h4> <ul><li><p>Main function: determine whether the time series has the next chunk.</p></li> <li><p>Constraint: Before calling this method, you need to ensure that there is no page and data point level data in the <code>SeriesReader</code> , that is, all the previously unlocked chunks have been consumed. .</p></li> <li><p>Implementation: If <code>firstChunkMetaData</code> is not empty, it means that the first<code>ChunkMetaData</code> is currently cached and not used, and returns <code>true</code> directly;</p> <p>Try to untie the first sequential file and the first out-of-order file to fill the chunk layer. And unpack all files that coincide with <code>firstChunkMetadata</code>.</p></li></ul> <h4 id="ischunkoverlapped"><a href="#ischunkoverlapped" class="header-anchor">#</a> isChunkOverlapped()</h4> <ul><li><p>Main function: determine whether the current chunk overlaps with other Chunk</p></li> <li><p>Constraint: Before calling this method, make sure that the chunk layer has cached <code>firstChunkMetadata</code>, that is, hasNextChunk () is called and is true.</p></li> <li><p>Implementation: Compare <code>firstChunkMetadata</code> with<code>seqChunkMetadatas</code> and <code>unseqChunkMetadatas</code> directly. Because it has been guaranteed that all files that intersect with <code>firstChunkMetadata</code> will be unzipped.</p></li></ul> <h4 id="currentchunkstatistics"><a href="#currentchunkstatistics" class="header-anchor">#</a> currentChunkStatistics()</h4> <p>Returns statistics for <code>firstChunkMetaData</code>.</p> <h4 id="skipcurrentchunk"><a href="#skipcurrentchunk" class="header-anchor">#</a> skipCurrentChunk()</h4> <p>Skip the current chunk. Just set <code>firstChunkMetaData</code> to<code>null</code>.</p> <h4 id="hasnextpage"><a href="#hasnextpage" class="header-anchor">#</a> hasNextPage()</h4> <ul><li><p>Main function: determine whether there are already unwrapped pages in the SeriesReader. If there are intersecting pages, construct <code>cachedBatchData</code> and cache, otherwise cache<code>firstPageReader</code>.</p></li> <li><p>Implementation: If <code>cachedBatchData</code> is already cached, return directly. If there are intersecting data points, a <code>cachedBatchData</code> is constructed. If <code>firstPageReader</code> is already cached, return directly.</p> <p>If the current <code>firstChunkMetadata</code> has not been solved, then all the ChunkMetadata which overlaps with it are constructed to construct the firstPageReader.</p> <p>Determine if <code>firstPageReader</code> and<code>cachedPageReaders</code> intersect, then construct <code>cachedBatchData</code>, otherwise return directly.</p></li></ul> <h4 id="ispageoverlapped"><a href="#ispageoverlapped" class="header-anchor">#</a> isPageOverlapped()</h4> <ul><li><p>Main function: determine whether the current page overlaps with other pages</p></li> <li><p>Constraint: Before calling this method, you need to ensure that hasNextPage () is called and is true. That is, it is possible to cache an intersecting <code>cachedBatchData</code> or an disjoint<code>firstPageReader</code>.</p></li> <li><p>Implementation: First determine if there is <code>cachedBatchData</code>, if not, it means that the current page does not intersect, then there is no data in<code>mergeReader</code>. Then determine whether <code>firstPageReader</code> intersects with page in<code>cachedPageReaders</code>.</p></li></ul> <h4 id="currentpagestatistics"><a href="#currentpagestatistics" class="header-anchor">#</a> currentPageStatistics()</h4> <p>Returns statistics for <code>firstPageReader</code>.</p> <h4 id="skipcurrentpage"><a href="#skipcurrentpage" class="header-anchor">#</a> skipCurrentPage()</h4> <p>Skip the current Page. Just set <code>firstPageReader</code> to null.</p> <h4 id="nextpage"><a href="#nextpage" class="header-anchor">#</a> nextPage()</h4> <ul><li><p>Main function: return to the next intersecting or unwanted page</p></li> <li><p>Constraint: Before calling this method, you need to ensure that hasNextPage () is called and is true. That is, it is possible to cache an intersecting <code>cachedBatchData</code> or an disjoint<code>firstPageReader</code>.</p></li> <li><p>Implementation: If <code>hasCachedNextOverlappedPage</code> is true, it means that an intersecting page is cached, and<code>cachedBatchData</code> is returned directly. Otherwise, the current page does not intersect, and the data of the current page is taken directly from firstPageReader.</p></li></ul> <h4 id="hasnextoverlappedpage"><a href="#hasnextoverlappedpage" class="header-anchor">#</a> hasNextOverlappedPage()</h4> <ul><li><p>Main function: internal method, used to determine whether there is currently overlapping data, and construct intersecting pages and cache them.</p></li> <li><p>Implementation: If <code>hasCachedNextOverlappedPage</code> is<code>true</code>, return <code>true</code> directly.</p> <p>Otherwise, first call the <code>tryToPutAllDirectlyOverlappedPageReadersIntoMergeReader ()</code> method, and put all of the cachedPageReaders that overlap with the firstPageReader into the mergeReader. <code>mergeReader</code> maintains a<code>currentLargestEndTime</code> variable, which is updated each time a new Reader is added to record the maximum end time of the page currently added to <code>mergeReader</code>.
Then first take out the current maximum end time from <code>mergeReader</code>, as the end time of the first batch of data, record it as<code>currentPageEndTime</code>. Then go through <code>mergeReader</code> until the current timestamp is greater than<code>currentPageEndTime</code>.</p> <p>Before moving a point from mergeReader, we must first determine whether there is a file, chunk, or page that overlaps with the current timestamp. (The reason for this is to make another judgment here because, for example, the current page is 1-30, and he directly The intersecting pages are 20-50, and there is another page 40-60. Every time you take a point, you want to unlock 40-60. If so, unpack the corresponding file or chunk or page and put it in Enter <code>mergeReader</code>. After the overlap judgment is completed, the corresponding data is taken from <code>mergeReader</code>.</p> <p>After completing the iteration, the data will be cached in <code>cachedBatchData</code>, and<code>hasCachedNextOverlappedPage</code> will be set to <code>true</code>.</p></li></ul> <h4 id="nextoverlappedpage"><a href="#nextoverlappedpage" class="header-anchor">#</a> nextOverlappedPage()</h4> <p>Return cached <code>cachedBatchData</code> and set<code>hasCachedNextOverlappedPage</code> to <code>false</code>.</p> <h3 id="org-apache-iotdb-db-query-reader-series-seriesrawdatabatchreader"><a href="#org-apache-iotdb-db-query-reader-series-seriesrawdatabatchreader" class="header-anchor">#</a> org.apache.iotdb.db.query.reader.series.SeriesRawDataBatchReader</h3> <p><code>SeriesRawDataBatchReader</code> implements<code>IBatchReader</code>.</p> <p>The core judgment flow of its method <code>hasNextBatch ()</code> is</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>// There are cached batches, return directly
if (hasCachedBatchData) {
  return true;
}

/*
 * If there are still pages in the SeriesReader, return to page
 */
if (readPageData()) {
  hasCachedBatchData = true;
  return true;
}

/*
 * If there is a chunk and a page, return page
 */
while (seriesReader.hasNextChunk()) {
  if (readPageData()) {
    hasCachedBatchData = true;
    return true;
  }
}
return hasCachedBatchData;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h3 id="org-apache-iotdb-db-query-reader-series-seriesreaderbytimestamp"><a href="#org-apache-iotdb-db-query-reader-series-seriesreaderbytimestamp" class="header-anchor">#</a> org.apache.iotdb.db.query.reader.series.SeriesReaderByTimestamp</h3> <p><code>SeriesReaderByTimestamp</code> implements <code>IReaderByTimestamp</code>.</p> <p>Design idea: When a time stamp is used to query the value, this time stamp can be converted into a filter condition with time&gt; = x. Keep updating this filter, and skip files, chunks and pages that don't meet.</p> <p>Method to realize:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>/*
 * Prioritize whether the next page is currently checked, skip it if you can
 */
if (readPageData(timestamp)) {
  return true;
}

/*
 * Determine if the next chunk has the current search time, skip it if it can
 */
while (seriesReader.hasNextChunk()) {
  Statistics statistics = seriesReader.currentChunkStatistics();
  if (!satisfyTimeFilter(statistics)) {
    seriesReader.skipCurrentChunk();
    continue;
  }
  /*
   * The chunk cannot be skipped, continue to check the page in the chunk
   */
  if (readPageData(timestamp)) {
    return true;
  }
}
return false;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h3 id="org-apache-iotdb-db-query-reader-series-seriesaggregatereader"><a href="#org-apache-iotdb-db-query-reader-series-seriesaggregatereader" class="header-anchor">#</a> org.apache.iotdb.db.query.reader.series.SeriesAggregateReader</h3> <p><code>SeriesAggregateReader</code>implements <code>IAggregateReader</code></p> <p>Most interface methods of <code>IAggregateReader</code> have corresponding implementations in<code>SeriesReader</code>, except for <code>canUseCurrentChunkStatistics ()</code> and <code>canUseCurrentPageStatistics ()</code>.</p> <h4 id="canusecurrentchunkstatistics"><a href="#canusecurrentchunkstatistics" class="header-anchor">#</a> canUseCurrentChunkStatistics()</h4> <p>Design Idea: The conditions under which the statistical information can be used are that the current chunks do not overlap and meet the filtering conditions.</p> <p>First call the <code>CurrentChunkStatistics ()</code> method of <code>SeriesReader</code> to obtain the statistics of the current chunk, then call the<code>isChunkOverlapped ()</code>method of<code>SeriesReader</code> to determine whether the current chunks overlap. If the current chunks do not overlap and their statistics meet the filtering If true, return <code>true</code>, otherwise return<code>false</code>.</p> <h4 id="canusecurrentpagestatistics"><a href="#canusecurrentpagestatistics" class="header-anchor">#</a> canUseCurrentPageStatistics()</h4> <p>Design idea: The conditions under which the statistical information can be used are that the current pages do not overlap and meet the filter conditions.</p> <p>First call the <code>CurrentPageStatistics ()</code> method of <code>SeriesReader</code> to obtain the statistical information of the current page, and then call the<code>isPageOverlapped ()</code>method of<code>SeriesReader</code> to determine whether the current pages overlap. If the current pages do not overlap, and their statistics meet the filtering If true, return <code>true</code>, otherwise return<code>false</code>.</p></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/SystemDesign/DataQuery/QueryFundamentals.html" class="prev">
          QueryFundamentals
        </a></span> <span class="next"><a href="/SystemDesign/DataQuery/RawDataQuery.html">
          RawDataQuery
        </a>
        →
      </span></p></div> <p style="text-align: center;">Copyright © 2020 The Apache Software Foundation.<br>
     Apache and the Apache feather logo are trademarks of The Apache Software Foundation</p></main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.7e8d0fee.js" defer></script><script src="/assets/js/3.187083c5.js" defer></script><script src="/assets/js/39.54cd0bc6.js" defer></script>
  </body>
</html>